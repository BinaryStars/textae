/*! textae 4.3.1 18-01-2016 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c,d){"use strict";function e(b,e){function f(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function g(a,b){var c;return a&&"."===a.charAt(0)&&b&&(c=b.split("/"),c=c.slice(0,c.length-1),c=c.concat(a.split("/")),f(c),a=c.join("/")),a}function h(a){return function(b){return g(b,a)}}function i(a){function b(b){o[a]=b}return b.fromText=function(a,b){throw new Error("amdefine does not implement load.fromText")},b}function j(a,c,f){var g,h,i,j;if(a)h=o[a]={},i={id:a,uri:d,exports:h},g=l(e,h,i,a);else{if(p)throw new Error("amdefine with no module ID cannot be called more than once per file.");p=!0,h=b.exports,i=b,g=l(e,h,i,b.id)}c&&(c=c.map(function(a){return g(a)})),j="function"==typeof f?f.apply(i.exports,c):f,void 0!==j&&(i.exports=j,a&&(o[a]=i.exports))}function k(a,b,c){Array.isArray(a)?(c=b,b=a,a=void 0):"string"!=typeof a&&(c=a,a=b=void 0),b&&!Array.isArray(b)&&(c=b,b=void 0),b||(b=["require","exports","module"]),a?n[a]=[a,b,c]:j(a,b,c)}var l,m,n={},o={},p=!1,q=a("path");return l=function(a,b,d,e){function f(f,g){return"string"==typeof f?m(a,b,d,f,e):(f=f.map(function(c){return m(a,b,d,c,e)}),void(g&&c.nextTick(function(){g.apply(null,f)})))}return f.toUrl=function(a){return 0===a.indexOf(".")?g(a,q.dirname(d.filename)):a},f},e=e||function(){return b.require.apply(b,arguments)},m=function(a,b,c,d,e){var f,k,p=d.indexOf("!"),q=d;if(-1===p){if(d=g(d,e),"require"===d)return l(a,b,c,e);if("exports"===d)return b;if("module"===d)return c;if(o.hasOwnProperty(d))return o[d];if(n[d])return j.apply(null,n[d]),o[d];if(a)return a(q);throw new Error("No module with ID: "+d)}return f=d.substring(0,p),d=d.substring(p+1,d.length),k=m(a,b,c,f,e),d=k.normalize?k.normalize(d,h(e)):g(d,e),o[d]?o[d]:(k.load(d,l(a,b,c,e),i(d),{}),o[d])},k.require=function(a){return o[a]?o[a]:n[a]?(j.apply(null,n[a]),o[a]):void 0},k.amd={},k}b.exports=e}).call(this,a("_process"),"/node_modules/amdefine/amdefine.js")},{_process:112,path:111}],2:[function(a,b,c){b.exports={"default":a("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":25}],3:[function(a,b,c){b.exports={"default":a("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":26}],4:[function(a,b,c){b.exports={"default":a("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":27}],5:[function(a,b,c){b.exports={"default":a("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":28}],6:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":29}],7:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":30}],8:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":31}],9:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":32}],10:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":33}],11:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":34}],12:[function(a,b,c){b.exports={"default":a("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":35}],13:[function(a,b,c){b.exports={"default":a("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":36}],14:[function(a,b,c){"use strict";c["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},c.__esModule=!0},{}],15:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/define-property")["default"];c["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),d(a,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c.__esModule=!0},{"babel-runtime/core-js/object/define-property":8}],16:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/get-own-property-descriptor")["default"];c["default"]=function(a,b,c){for(var e=!0;e;){var f=a,g=b,h=c;e=!1,null===f&&(f=Function.prototype);var i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;if(void 0===j)return;return j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return;a=k,b=g,c=h,e=!0,i=k=void 0}},c.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":9}],17:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/create")["default"],e=a("babel-runtime/core-js/object/set-prototype-of")["default"];c["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=d(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e?e(a,b):a.__proto__=b)},c.__esModule=!0},{"babel-runtime/core-js/object/create":7,"babel-runtime/core-js/object/set-prototype-of":11}],18:[function(a,b,c){"use strict";c["default"]=function(a){return a&&a.__esModule?a:{"default":a}},c.__esModule=!0},{}],19:[function(a,b,c){"use strict";c["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},c.__esModule=!0},{}],20:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/get-iterator")["default"],e=a("babel-runtime/core-js/is-iterable")["default"];c["default"]=function(){function a(a,b){var c=[],e=!0,f=!1,g=void 0;try{for(var h,i=d(a);!(e=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(j){f=!0,g=j}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return c}return function(b,c){if(Array.isArray(b))return b;if(e(Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c.__esModule=!0},{"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/is-iterable":4}],21:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/array/from")["default"];c["default"]=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return d(a)},c.__esModule=!0},{"babel-runtime/core-js/array/from":2}],22:[function(a,b,c){(function(a,d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof d?e=d:"undefined"!=typeof self&&(e=self),e.Promise=a()}}(function(){var b,c,e;return function f(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(e)return e(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return d(c?c:b)},k,k.exports,f,a,b,c)}return b[g].exports}for(var e="function"==typeof _dereq_&&_dereq_,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(b,c,d){"use strict";function e(){this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=k.isStatic?k(this.drainQueues):k}function f(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function g(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function h(a){this._normalQueue._pushOne(a),this._queueTick()}var i;try{throw new Error}catch(j){i=j}var k=b("./schedule"),l=b("./queue"),m=b("./util");e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){m.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(b,c){c?(a.stderr.write("Fatal "+(b instanceof Error?b.stack:b)),a.exit(2)):this.throwLater(b)},e.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(c){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},m.hasDevTools?(k.isStatic&&(k=function(a){setTimeout(a,0)}),e.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},e.prototype.invoke=function(a,b,c){this._trampolineEnabled?g.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},e.prototype.settlePromises=function(a){this._trampolineEnabled?h.call(this,a):this._schedule(function(){a._settlePromises()})}):(e.prototype.invokeLater=f,e.prototype.invoke=g,e.prototype.settlePromises=h),e.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},e.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},c.exports=e,c.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0===(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=-2097153&this._bitField},a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){var b=this.pop(),d=c(a,b);return d.apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return 0>b&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype["break"]=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a.isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c.isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){return e?new b:void 0}function d(){var a=f.length-1;return a>=0?f[a]:void 0}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(b,c,d){"use strict";c.exports=function(c,d){function e(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+L.toString(a));d._attachCancellationCallback(a)})}catch(e){return e}}function f(a){if(!this.isCancellable())return this;var b=this._onCancel();void 0!==b?L.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function g(){return this._onCancelField}function h(a){this._onCancelField=a}function i(){this._cancellationParent=void 0,this._onCancelField=void 0}function j(a,b){if(0!==(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function k(a,b){0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function l(){var a=this._boundTo;return void 0!==a&&a instanceof c?a.isFulfilled()?a.value():void 0:a}function m(){this._trace=new E(this._peekContext())}function n(a,b){if(M(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=w(a);L.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),L.notEnumerableProp(a,"__stackCleaned__",!0)}}}function o(a,b,c,d){if(void 0===a&&null!==b&&_.longStackTraces&&_.warnings){var e="a promise was created in a "+c+" handler but was not returned from it";d._warn(e,!0,b)}}function p(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),q(c)}function q(a,b,d){if(_.warnings){var e,f=new K(a);if(b)d._attachExtraTrace(f);else if(_.longStackTraces&&(e=c._peekContext()))e.attachExtraTrace(f);else{var g=w(f);f.stack=g.message+"\n"+g.stack.join("\n")}x(f,"",!0)}}function r(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function s(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function t(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function u(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||O.test(d),f=e&&W(d);e&&!f&&(Q&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function v(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||O.test(d))break}return c>0&&(b=b.slice(c)),b}function w(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?v(a):["    (No stack trace)"],{message:c,stack:u(b)}}function x(a,b,c){if("undefined"!=typeof console){var d;if(L.isObject(a)){var e=a.stack;d=b+P(e,a)}else d=b+String(a);"function"==typeof H?H(d,c):("function"==typeof console.log||"object"==typeof console.log)&&console.log(d)}}function y(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(f){J.throwLater(f)}var g=!1;try{g=$(a,c,d)}catch(f){g=!0,J.throwLater(f)}var h=!1;if(Y)try{h=Y(a.toLowerCase(),{reason:c,promise:d})}catch(f){h=!0,J.throwLater(f)}g||e||h||"unhandledRejection"!==a||x(c,"Unhandled rejection ")}function z(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():L.toString(a);var c=/\[object [a-zA-Z0-9$_]+\]/;if(c.test(b))try{var d=JSON.stringify(a);b=d}catch(e){}0===b.length&&(b="(empty array)")}return"(<"+A(b)+">, no stack trace)"}function A(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function B(){return"function"==typeof Z}function C(a){var b=a.match(X);return b?{fileName:b[1],line:parseInt(b[2],10)}:void 0}function D(a,b){if(B()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=C(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=C(f[i]);if(j){d=j.fileName,h=j.line;break}}0>g||0>h||!c||!d||c!==d||g>=h||(W=function(a){if(N.test(a))return!0;var b=C(a);return b&&b.fileName===c&&g<=b.line&&b.line<=h?!0:!1})}}function E(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);Z(this,E),b>32&&this.uncycle()}var F,G,H,I=c._getDomain,J=c._async,K=b("./errors").Warning,L=b("./util"),M=L.canAttachTrace,N=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,O=null,P=null,Q=!1,R=!(0==L.env("BLUEBIRD_DEBUG")),S=!(0==L.env("BLUEBIRD_WARNINGS")||!R&&!L.env("BLUEBIRD_WARNINGS")),T=!(0==L.env("BLUEBIRD_LONG_STACK_TRACES")||!R&&!L.env("BLUEBIRD_LONG_STACK_TRACES"));c.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=-1048577&a._bitField|2097152},c.prototype._ensurePossibleRejectionHandled=function(){0===(2097152&this._bitField)&&(this._setRejectionIsUnhandled(),J.invokeLater(this._notifyUnhandledRejection,this,void 0))},c.prototype._notifyUnhandledRejectionIsHandled=function(){y("rejectionHandled",F,void 0,this)},c.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),y("unhandledRejection",G,a,this)}},c.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},c.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},c.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},c.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},c.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},c.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},c.prototype._warn=function(a,b,c){return q(a,b,c||this)},c.onPossiblyUnhandledRejection=function(a){var b=I();G="function"==typeof a?null===b?a:b.bind(a):void 0},c.onUnhandledRejectionHandled=function(a){var b=I();F="function"==typeof a?null===b?a:b.bind(a):void 0};var U=function(){};c.longStackTraces=function(){if(J.haveItemsQueued()&&!_.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!_.longStackTraces&&B()){var a=c.prototype._captureStackTrace,b=c.prototype._attachExtraTrace;_.longStackTraces=!0,U=function(){if(J.haveItemsQueued()&&!_.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");c.prototype._captureStackTrace=a,c.prototype._attachExtraTrace=b,d.deactivateLongStackTraces(),J.enableTrampoline(),_.longStackTraces=!1},c.prototype._captureStackTrace=m,c.prototype._attachExtraTrace=n,d.activateLongStackTraces(),J.disableTrampolineIfNecessary()}},c.hasLongStackTraces=function(){return _.longStackTraces&&B()},c.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?c.longStackTraces():!a.longStackTraces&&c.hasLongStackTraces()&&U()),"warnings"in a&&(_.warnings=!!a.warnings),"cancellation"in a&&a.cancellation&&!_.cancellation){if(J.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");c.prototype._clearCancellationData=i,c.prototype._propagateFrom=j,c.prototype._onCancel=g,c.prototype._setOnCancel=h,c.prototype._attachCancellationCallback=f,c.prototype._execute=e,V=j,_.cancellation=!0}},c.prototype._execute=function(a,b,c){try{a(b,c)}catch(d){return d}},c.prototype._onCancel=function(){},c.prototype._setOnCancel=function(a){},c.prototype._attachCancellationCallback=function(a){},c.prototype._captureStackTrace=function(){},c.prototype._attachExtraTrace=function(){},c.prototype._clearCancellationData=function(){},c.prototype._propagateFrom=function(a,b){};var V=k,W=function(){return!1},X=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;L.inherits(E,Error),d.CapturedTrace=E,E.prototype.uncycle=function(){var a=this._length;if(!(2>a)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;a>d;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;a-1>h?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},E.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=w(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(u(e.stack.split("\n"))),e=e._parent;t(d),s(d),L.notEnumerableProp(a,"stack",r(c,d)),L.notEnumerableProp(a,"__stackCleaned__",!0)}};var Y,Z=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():z(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,O=a,P=b;var c=Error.captureStackTrace;return W=function(a){return N.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return O=/@/,P=b,Q=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(f){e="stack"in f}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(P=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?z(b):b.toString()},null):(O=a,P=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}([]),$=function(){if(L.isNode)return function(b,c,d){return"rejectionHandled"===b?a.emit(b,d):a.emit(b,c,d)};var b=!1,c=!0;try{var d=new self.CustomEvent("test");b=d instanceof CustomEvent}catch(e){}if(!b)try{var f=document.createEvent("CustomEvent");f.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(f)}catch(e){c=!1}c&&(Y=function(a,c){var d;return b?d=new self.CustomEvent(a,{detail:c,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!1,!0,c)),d?!self.dispatchEvent(d):!1});var g={};return g.unhandledRejection="onunhandledRejection".toLowerCase(),g.rejectionHandled="onrejectionHandled".toLowerCase(),function(a,b,c){var d=g[a],e=self[d];return e?("rejectionHandled"===a?e.call(self,c):e.call(self,b,c),!0):!1}}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(H=function(a){console.warn(a)},L.isNode&&a.stderr.isTTY?H=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:L.isNode||"string"!=typeof(new Error).stack||(H=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var _={warnings:S,longStackTraces:!1,cancellation:!1};return T&&c.longStackTraces(),{longStackTraces:function(){return _.longStackTraces},warnings:function(){return _.warnings},cancellation:function(){return _.cancellation},propagateFromFunction:function(){return V},boundValueFunction:function(){return l},checkForgottenReturns:o,setBounds:D,warn:q,deprecated:p,CapturedTrace:E}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype["return"]=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype["throw"]=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return this.mapSeries(a)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,b){return d(a,b)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){return this instanceof c?(l(this,"message","string"==typeof d?d:b),l(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new c(d)}return k(c,Error),c}function e(a){return this instanceof e?(l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,void(a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new e(a)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(q){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var r="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),s=0;s<r.length;++s)"function"==typeof Array.prototype[r[s]]&&(p.prototype[r[s]]=Array.prototype[r[s]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var t=0;p.prototype.toString=function(){var a=Array(4*t+1).join(" "),b="\n"+a+"AggregateError of:\n";t++,a=Array(4*t+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return t--,b},k(e,Error);var u=Error.__BluebirdErrorTypes__;u||(u=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),l(Error,"__BluebirdErrorTypes__",u)),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:u.CancellationError,OperationalError:u.OperationalError,TimeoutError:u.TimeoutError,AggregateError:u.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(b){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(b){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){
this.finallyHandler=a}function e(a,b){return null!=a.cancelPromise?(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0):!1}function f(){return h.call(this,this.promise._target()._settledValue())}function g(a){return e(this,a)?void 0:(k.e=a,k)}function h(a){var h=this.promise,i=this.handler;if(!this.called){this.called=!0;var l=0===this.type?i.call(h._boundValue()):i.call(h._boundValue(),a);if(void 0!==l){var m=c(l,h);if(m instanceof b){if(null!=this.cancelPromise){if(m.isCancelled()){var n=new j("late cancellation observer");return h._attachExtraTrace(n),k.e=n,k}m.isPending()&&m._attachCancellationCallback(new d(this))}return m._then(f,g,void 0,this,void 0)}}}return h.isRejected()?(e(this),k.e=a,k):(e(this),a)}var i=a("./util"),j=b.CancellationError,k=i.errorObj;return d.prototype._resultCancelled=function(){e(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,d){return"function"!=typeof a?this.then():this._then(c,d,void 0,{promise:this,handler:a,called:!1,cancelPromise:null,type:b},void 0)},b.prototype.lastly=b.prototype["finally"]=function(a){return this._passThrough(a,0,h,h)},b.prototype.tap=function(a){return this._passThrough(a,1,h)},h}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){var g=this._promise=new b(d);g._captureStackTrace(),g._setOnCancel(this),this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this.promise},i.prototype._cleanup=function(){this._promise=this._generator=null},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c="undefined"!=typeof this._generator["return"];if(c)this._promise._pushContext(),a=n(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator["throw"]).call(this._generator,d),this._promise._popContext(),a===m&&a.e===d&&(a=null)}var e=this._promise;this._cleanup(),a===m?e._rejectCallback(a.e,!1):e.cancel()}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator["throw"]).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){var c=this._promise;if(a===m)return this._cleanup(),c._rejectCallback(a.e,!1);var d=a.value;if(a.done===!0)return this._cleanup(),c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&(f=h(f,this._yieldHandlers,this._promise),null===f))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0===(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!==(33554432&g)?this._promiseFulfilled(f._value()):0!==(16777216&g)?this._promiseRejected(f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util");f.canEvaluate,f.tryCatch,f.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:e.bind(b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=c>=1?[]:n,this._init$(void 0,-2)}function i(a,b,c,e){if("function"!=typeof b)return d("expecting a function but got "+k.classString(b));var f="object"==typeof c&&null!==c?c.concurrency:0;return f="number"==typeof f&&isFinite(f)&&f>=1?f:0,new h(a,b,f,e).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj,n=[];k.inherits(h,c),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(0>c){if(c=-1*c-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0===(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,-1*(c+1)),!1;if(0===(33554432&r))return 0!==(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}var s=++this._totalResolved;return s>=f?(null!==h?this._filter(d,h):this._resolve(d),!0):!1},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;c>f;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b["try"]=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(b,c,d){"use strict";c.exports=function(){function c(){}function d(a,b){if("function"!=typeof b)throw new s("expecting a function but got "+n.classString(b));if(a.constructor!==e)throw new s("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function e(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==u&&(d(this,a),this._resolveFromExecutor(a)),this._promiseCreated()}function f(a){this.promise._resolveCallback(a)}function g(a){this.promise._rejectCallback(a,!1)}function h(a){var b=new e(u);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var i,j=function(){return new s("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},k=function(){return new e.PromiseInspection(this._target())},l=function(a){return e.reject(new s(a))},m={},n=b("./util");i=n.isNode?function(){var b=a.domain;return void 0===b&&(b=null),b}:function(){return null},n.notEnumerableProp(e,"_getDomain",i);var o=b("./es5"),p=b("./async"),q=new p;o.defineProperty(e,"_async",{value:q});var r=b("./errors"),s=e.TypeError=r.TypeError;e.RangeError=r.RangeError;var t=e.CancellationError=r.CancellationError;e.TimeoutError=r.TimeoutError,e.OperationalError=r.OperationalError,e.RejectionError=r.OperationalError,e.AggregateError=r.AggregateError;var u=function(){},v={},w={},x=b("./thenables")(e,u),y=b("./promise_array")(e,u,x,l,c),z=b("./context")(e),A=z.create,B=b("./debuggability")(e,z),C=(B.CapturedTrace,b("./finally")(e,x)),D=b("./catch_filter")(w),E=b("./nodeback"),F=n.errorObj,G=n.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;b-1>c;++c){var f=arguments[c];if(!n.isObject(f))return l("expecting an object but got "+n.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,D(d,a,this))}return this.then(void 0,a)},e.prototype.reflect=function(){return this._then(k,k,void 0,this,void 0)},e.prototype.then=function(a,b){if(B.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+n.classString(a);arguments.length>1&&(c+=", "+n.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},e.prototype.done=function(a,b){var c=this._then(a,b,void 0,void 0,void 0);c._setIsFinal()},e.prototype.spread=function(a){return"function"!=typeof a?l("expecting a function but got "+n.classString(a)):this.all()._then(a,void 0,void 0,v,void 0)},e.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},e.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new y(this).promise()},e.prototype.error=function(a){return this.caught(n.originatesFromRejection,a)},e.is=function(a){return a instanceof e},e.fromNode=e.fromCallback=function(a){var b=new e(u),c=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,d=G(a)(E(b,c));return d===F&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},e.all=function(a){return new y(a).promise()},e.cast=function(a){var b=x(a);return b instanceof e||(b=new e(u),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(a){var b=new e(u);return b._captureStackTrace(),b._rejectCallback(a,!0),b},e.setScheduler=function(a){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));var b=q._schedule;return q._schedule=a,b},e.prototype._then=function(a,b,c,d,f){var g=void 0!==f,h=g?f:new e(u),j=this._target(),k=j._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!==(2097152&this._bitField)&&(d=0!==(50397184&k)?this._boundValue():j===this?void 0:this._boundTo));var l=i();if(0!==(50397184&k)){var m,n,o=j._settlePromiseCtx;0!==(33554432&k)?(n=j._rejectionHandler0,m=a):0!==(16777216&k)?(n=j._fulfillmentHandler0,m=b,j._unsetRejectionIsUnhandled()):(o=j._settlePromiseLateCancellationObserver,n=new t("late cancellation observer"),j._attachExtraTrace(n),m=b),q.invoke(o,j,{handler:null===l?m:"function"==typeof m&&l.bind(m),promise:h,receiver:d,value:n})}else j._addCallbacks(a,b,h,d,l);return h},e.prototype._length=function(){return 65535&this._bitField},e.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},e.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},e.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},e.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField},e.prototype._setRejected=function(){this._bitField=16777216|this._bitField},e.prototype._setFollowing=function(){this._bitField=67108864|this._bitField},e.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},e.prototype._isFinal=function(){return(4194304&this._bitField)>0},e.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},e.prototype._setCancelled=function(){this._bitField=65536|this._bitField},e.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},e.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==m)return void 0===b&&this._isBound()?this._boundValue():b},e.prototype._promiseAt=function(a){return this[4*a-4+2]},e.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},e.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},e.prototype._boundValue=function(){},e.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=m),this._addCallbacks(b,c,d,e,null)},e.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=m),this._addCallbacks(c,d,e,f,null)},e.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:e.bind(a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:e.bind(b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:e.bind(a)),"function"==typeof b&&(this[g+1]=null===e?b:e.bind(b))}return this._setLength(f+1),f},e.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},e.prototype._resolveCallback=function(a,b){if(0===(117506048&this._bitField)){if(a===this)return this._rejectCallback(j(),!1);var c=x(a,this);if(!(c instanceof e))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target(),f=d._bitField;if(0===(50397184&f)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;g>h;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!==(33554432&f))this._fulfill(d._value());else if(0!==(16777216&f))this._reject(d._reason());else{var i=new t("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},e.prototype._rejectCallback=function(a,b,c){var d=n.ensureErrorObject(a),e=d===a;if(!e&&!c&&B.warnings()){var f="a promise was rejected with a non-error: "+n.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,b?e:!1),this._reject(a)},e.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},e.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0===(65536&e)){d._pushContext();var f;b===v?c&&"number"==typeof c.length?f=G(a).apply(this._boundValue(),c):(f=F,f.e=new s("cannot .spread() a non-array: "+n.classString(c))):f=G(a).call(b,c);var g=d._popContext();if(e=d._bitField,0===(65536&e))if(f===w)d._reject(c);else if(f===F||f===d){var h=f===d?j():f.e;d._rejectCallback(h,!1)}else B.checkForgottenReturns(f,g,"",d),d._resolveCallback(f)}},e.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(a){this._rejectionHandler0=a},e.prototype._settlePromise=function(a,b,d,f){var g=a instanceof e,h=this._bitField,i=0!==(134217728&h);0!==(65536&h)?(g&&a._invokeInternalOnCancel(),b===C?(d.cancelPromise=a,G(b).call(d,f)===F&&a._reject(F.e)):b===k?a._fulfill(k.call(d)):d instanceof c?d._promiseCancelled(a):g||a instanceof y?a._cancel():d.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,d,f,a)):b.call(d,f,a):d instanceof c?d._isResolved()||(0!==(33554432&h)?d._promiseFulfilled(f,a):d._promiseRejected(f,a)):g&&(i&&a._setAsyncGuaranteed(),0!==(33554432&h)?a._fulfill(f):a._reject(f))},e.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,f=a.value;"function"==typeof b?c instanceof e?this._settlePromiseFromHandler(b,d,f,c):b.call(d,f,c):c instanceof e&&c._reject(f)},e.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},e.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},e.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},e.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=j();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!==(134217728&b)?this._settlePromises():q.settlePromises(this))}},e.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16))return this._setRejected(),this._fulfillmentHandler0=a,this._isFinal()?q.fatalError(a,n.isNode):void((65535&b)>0?0!==(134217728&b)?this._settlePromises():q.settlePromises(this):this._ensurePossibleRejectionHandled())},e.prototype._fulfillPromises=function(a,b){for(var c=1;a>c;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},e.prototype._rejectPromises=function(a,b){for(var c=1;a>c;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},e.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!==(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},e.prototype._settledValue=function(){var a=this._bitField;return 0!==(33554432&a)?this._rejectionHandler0:0!==(16777216&a)?this._fulfillmentHandler0:void 0},e.defer=e.pending=function(){B.deprecated("Promise.defer","new Promise");var a=new e(u);return{promise:a,resolve:f,reject:g}},n.notEnumerableProp(e,"_makeSelfResolutionError",j),b("./method")(e,u,x,l,B),b("./bind")(e,u,x,B),b("./cancel")(e,y,l,B),b("./direct_resolve")(e),b("./synchronous_inspection")(e),b("./join")(e,y,x,u,B),e.Promise=e,b("./map.js")(e,y,l,x,u,B),b("./using.js")(e,l,x,A,u,B),b("./timers.js")(e,u),b("./generators.js")(e,l,u,x,c,B),b("./nodeify.js")(e),b("./call_get.js")(e),b("./props.js")(e,y,x,l),b("./race.js")(e,u,x,l),b("./reduce.js")(e,y,l,x,u,B),b("./settle.js")(e,y,B),b("./some.js")(e,y,l),b("./promisify.js")(e,u),b("./any.js")(e),b("./each.js")(e,u),b("./filter.js")(e,u),n.toFastProperties(e),n.toFastProperties(e.prototype),h({a:1}),h({b:2}),h({c:3}),h(1),h(function(){}),h(void 0),h(!1),h(new e(u)),B.setBounds(p.firstLineError,n.lastLineError),e}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{}}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function j(a,c){var f=d(this._values,this._promise);if(f instanceof b){f=f._target();var h=f._bitField;if(this._values=f,0===(50397184&h))return this._promise._setAsyncGuaranteed(),f._then(j,this._reject,void 0,this,c);if(0===(33554432&h))return 0!==(16777216&h)?this._reject(f._reason()):this._cancel();f=f._value()}if(f=i.asArray(f),null===f){var k=e("expecting an array or an iterable object but got "+i.classString(f)).reason();return void this._promise._rejectCallback(k,!1)}return 0===f.length?void(-5===c?this._resolveEmptyArray():this._resolve(g(c))):void this._iterate(f)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;c>h;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0===(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!==(33554432&g)?this._promiseFulfilled(i._value(),h):0!==(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!w.test(a)}function e(a){try{return a.__isPromisified__===!0}catch(b){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,u);return d?e(d):!1}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===x?!0:x(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(l){f._rejectCallback(q(l),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(y(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;j>i;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===z)a[o]=z(k,m,k,l,b,e);else{var p=d(l,function(){return z(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return z(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t="Async",u={__isPromisified__:!0},v=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+v.join("|")+")$"),x=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},y=function(a){return a.replace(/([$])/,"\\$")},z=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d=t);var e=b.filter;"function"!=typeof e&&(e=x);var f=b.promisifier;if("function"!=typeof f&&(f=z),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;e>f;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;c>d;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){var d;if(this._isMap)d=m(this._values);else{d={};for(var e=this.length(),f=0,g=this.length();g>f;++f)d[this._values[f+e]]=this._values[f]}return this._resolve(d),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;e>f;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,e=this._length,f=c+e&b-1;d(this,0,this,b,f)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(a=g.asArray(a),null===a)return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;n>m;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:g.bind(c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,this._eachValues=e===f?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){if("function"!=typeof b)return d("expecting a function but got "+n.classString(b));var f=new h(a,b,c,e);return f.promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length),
f instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){return a===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel()))},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;e>d;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(b,c,e){"use strict";var f,g=b("./util"),h=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(g.isNode&&"undefined"==typeof MutationObserver){var i=d.setImmediate,j=a.nextTick;f=g.isRecentNode?function(a){i.call(d,a)}:function(b){j.call(a,b)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?f="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:h:(f=function(a){var b=document.createElement("div"),c=new MutationObserver(a);return c.observe(b,{attributes:!0}),function(){b.classList.toggle("foo")}},f.isStatic=!0);c.exports=f},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection,g=a("./util");g.inherits(e,c),e.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||0>b)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0===(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};b.prototype.isCancelled=a.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},a.prototype.isCancelled=function(){return this._target()._isCancelled()},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(b){return j.e=b,j}}function g(a){return l.call(a,"_promise0")}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){var b=this;return b instanceof Number&&(b=+b),clearTimeout(b),a}function e(a){var b=this;throw b instanceof Number&&(b=+b),clearTimeout(b),a}var f=a("./util"),g=b.TimeoutError,h=function(a,b,c){if(a.isPending()){var d;d="string"!=typeof b?b instanceof Error?b:new g("operation timed out"):new g(b),f.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),c.cancel()}},i=function(a){return j(+this).thenReturn(a)},j=b.delay=function(a,d){var e;return void 0!==d?e=b.resolve(d)._then(i,null,null,a,void 0):(e=new b(c),setTimeout(function(){e._fulfill()},+a)),e._setAsyncGuaranteed(),e};b.prototype.delay=function(a){return j(a,this)},b.prototype.timeout=function(a,b){a=+a;var c=this.then(),f=c.then(),g=setTimeout(function(){h(f,b,c)},a);return f._then(d,e,void 0,g,void 0)}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(l){return h(l)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch;k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=null!==b?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){var c=this.data();return c.call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;a>c;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(2>a)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;a>l;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(b,c,d){"use strict";function e(){try{var a=B;return B=null,a.apply(this,arguments)}catch(b){return A.e=b,A}}function f(a){return B=a,e}function g(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function h(a){return"function"==typeof a||"object"==typeof a&&null!==a}function i(a){return g(a)?new Error(r(a)):a}function j(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;d>c;++c)e[c]=a[c];return e[c]=b,e}function k(a,b,c){if(!y.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function l(a,b,c){if(g(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return y.defineProperty(a,b,d),a}function m(a){throw a}function n(a){try{if("function"==typeof a){var b=y.names(a.prototype),c=y.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=E.test(a+"")&&y.names(a).length>0;if(c||d||e)return!0}return!1}catch(f){return!1}}function o(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function p(a){return F.test(a)}function q(a,b,c){for(var d=new Array(a),e=0;a>e;++e)d[e]=b+e+c;return d}function r(a){try{return a+""}catch(b){return"[no string representation]"}}function s(a){try{l(a,"isOperational",!0)}catch(b){}}function t(a){return null==a?!1:a instanceof Error.__BluebirdErrorTypes__.OperationalError||a.isOperational===!0}function u(a){return a instanceof Error&&y.propertyIsWritable(a,"stack")}function v(a){return{}.toString.call(a)}function w(a,b,c){for(var d=y.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{y.defineProperty(b,f,y.getDescriptor(a,f))}catch(g){}}}function x(b,c){return J?a.env[b]:c}var y=b("./es5"),z="undefined"==typeof navigator,A={e:{}},B,C=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},D=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(y.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(g){return d}for(var h=0;h<f.length;++h){var i=f[h];if(!e[i]){e[i]=!0;var j=Object.getOwnPropertyDescriptor(a,i);null!=j&&null==j.get&&null==j.set&&d.push(i)}}a=y.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),E=/this\s*\.\s*\S+\s*=/,F=/^[a-z$_][a-z$_0-9]*$/i,G=function(){return"stack"in new Error?function(a){return u(a)?a:new Error(r(a))}:function(a){if(u(a))return a;try{throw new Error(r(a))}catch(b){return b}}}(),H=function(a){return y.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var I="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};H=function(a){return y.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?I(a):null}}var J="undefined"!=typeof a&&"[object process]"===v(a).toLowerCase(),K={isClass:n,isIdentifier:p,inheritedDataKeys:D,getDataPropertyOrDefault:k,thrower:m,isArray:y.isArray,asArray:H,notEnumerableProp:l,isPrimitive:g,isObject:h,canEvaluate:z,errorObj:A,tryCatch:f,inherits:C,withAppended:j,maybeWrapAsError:i,toFastProperties:o,filledRange:q,toString:r,canAttachTrace:u,ensureErrorObject:G,originatesFromRejection:t,markAsOriginatingFromRejection:s,classString:v,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:J,env:x};K.isRecentNode=K.isNode&&function(){var b=a.versions.node.split(".").map(Number);return 0===b[0]&&b[1]>10||b[0]>0}(),K.isNode&&K.toFastProperties(a);try{throw new Error}catch(L){K.lastLineError=L}c.exports=K},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:112}],23:[function(a,b,c){b.exports=function(a){return a.charAt(0).toUpperCase()+a.substring(1)},b.exports.words=function(a){return a.replace(/(^|[^a-zA-Z\u00C0-\u017F'])([a-zA-Z\u00C0-\u017F])/g,function(a){return a.toUpperCase()})}},{}],24:[function(a,b,c){var d=a("matches-selector");b.exports=function(a,b,c){for(var e=c?a:a.parentNode;e&&e!==document;){if(d(e,b))return e;e=e.parentNode}}},{"matches-selector":159}],25:[function(a,b,c){a("../../modules/es6.string.iterator"),a("../../modules/es6.array.from"),b.exports=a("../../modules/$.core").Array.from},{"../../modules/$.core":45,"../../modules/es6.array.from":93,"../../modules/es6.string.iterator":103}],26:[function(a,b,c){a("../modules/web.dom.iterable"),a("../modules/es6.string.iterator"),b.exports=a("../modules/core.get-iterator")},{"../modules/core.get-iterator":91,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":106}],27:[function(a,b,c){a("../modules/web.dom.iterable"),a("../modules/es6.string.iterator"),b.exports=a("../modules/core.is-iterable")},{"../modules/core.is-iterable":92,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":106}],28:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.map"),a("../modules/es7.map.to-json"),b.exports=a("../modules/$.core").Map},{"../modules/$.core":45,"../modules/es6.map":95,"../modules/es6.object.to-string":100,"../modules/es6.string.iterator":103,"../modules/es7.map.to-json":104,"../modules/web.dom.iterable":106}],29:[function(a,b,c){a("../../modules/es6.object.assign"),b.exports=a("../../modules/$.core").Object.assign},{"../../modules/$.core":45,"../../modules/es6.object.assign":96}],30:[function(a,b,c){var d=a("../../modules/$");b.exports=function(a,b){return d.create(a,b)}},{"../../modules/$":67}],31:[function(a,b,c){var d=a("../../modules/$");b.exports=function(a,b,c){return d.setDesc(a,b,c)}},{"../../modules/$":67}],32:[function(a,b,c){var d=a("../../modules/$");a("../../modules/es6.object.get-own-property-descriptor"),b.exports=function(a,b){return d.getDesc(a,b)}},{"../../modules/$":67,"../../modules/es6.object.get-own-property-descriptor":97}],33:[function(a,b,c){a("../../modules/es6.object.keys"),b.exports=a("../../modules/$.core").Object.keys},{"../../modules/$.core":45,"../../modules/es6.object.keys":98}],34:[function(a,b,c){a("../../modules/es6.object.set-prototype-of"),b.exports=a("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":45,"../../modules/es6.object.set-prototype-of":99}],35:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.promise"),b.exports=a("../modules/$.core").Promise},{"../modules/$.core":45,"../modules/es6.object.to-string":100,"../modules/es6.promise":101,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":106}],36:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.set"),a("../modules/es7.set.to-json"),b.exports=a("../modules/$.core").Set},{"../modules/$.core":45,"../modules/es6.object.to-string":100,"../modules/es6.set":102,"../modules/es6.string.iterator":103,"../modules/es7.set.to-json":105,"../modules/web.dom.iterable":106}],37:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],38:[function(a,b,c){b.exports=function(){}},{}],39:[function(a,b,c){var d=a("./$.is-object");b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{"./$.is-object":60}],40:[function(a,b,c){var d=a("./$.cof"),e=a("./$.wks")("toStringTag"),f="Arguments"==d(function(){return arguments}());b.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}},{"./$.cof":41,"./$.wks":89}],41:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],42:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.hide"),f=a("./$.redefine-all"),g=a("./$.ctx"),h=a("./$.strict-new"),i=a("./$.defined"),j=a("./$.for-of"),k=a("./$.iter-define"),l=a("./$.iter-step"),m=a("./$.uid")("id"),n=a("./$.has"),o=a("./$.is-object"),p=a("./$.set-species"),q=a("./$.descriptors"),r=Object.isExtensible||o,s=q?"_s":"size",t=0,u=function(a,b){if(!o(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!n(a,m)){if(!r(a))return"F";if(!b)return"E";e(a,m,++t)}return"O"+a[m]},v=function(a,b){var c,d=u(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};b.exports={getConstructor:function(a,b,c,e){var k=a(function(a,f){h(a,k,b),a._i=d.create(null),a._f=void 0,a._l=void 0,a[s]=0,void 0!=f&&j(f,c,a[e],a)});return f(k.prototype,{clear:function(){for(var a=this,b=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a._f=a._l=void 0,a[s]=0},"delete":function(a){var b=this,c=v(b,a);if(c){var d=c.n,e=c.p;delete b._i[c.i],c.r=!0,e&&(e.n=d),d&&(d.p=e),b._f==c&&(b._f=d),b._l==c&&(b._l=e),b[s]--}return!!c},forEach:function(a){for(var b,c=g(a,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!v(this,a)}}),q&&d.setDesc(k.prototype,"size",{get:function(){return i(this[s])}}),k},def:function(a,b,c){var d,e,f=v(a,b);return f?f.v=c:(a._l=f={i:e=u(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[s]++,"F"!==e&&(a._i[e]=f)),a},getEntry:v,setStrong:function(a,b,c){k(a,b,function(a,b){this._t=a,this._k=b,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?l(0,c.k):"values"==b?l(0,c.v):l(0,[c.k,c.v]):(a._t=void 0,l(1))},c?"entries":"values",!c,!0),p(b)}}},{"./$":67,"./$.ctx":46,"./$.defined":47,"./$.descriptors":48,"./$.for-of":52,"./$.has":54,"./$.hide":55,"./$.is-object":60,"./$.iter-define":63,"./$.iter-step":65,"./$.redefine-all":73,"./$.set-species":77,"./$.strict-new":81,"./$.uid":88}],43:[function(a,b,c){var d=a("./$.for-of"),e=a("./$.classof");b.exports=function(a){return function(){if(e(this)!=a)throw TypeError(a+"#toJSON isn't generic");var b=[];return d(this,!1,b.push,b),b}}},{"./$.classof":40,"./$.for-of":52}],44:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.global"),f=a("./$.export"),g=a("./$.fails"),h=a("./$.hide"),i=a("./$.redefine-all"),j=a("./$.for-of"),k=a("./$.strict-new"),l=a("./$.is-object"),m=a("./$.set-to-string-tag"),n=a("./$.descriptors");b.exports=function(a,b,c,o,p,q){var r=e[a],s=r,t=p?"set":"add",u=s&&s.prototype,v={};return n&&"function"==typeof s&&(q||u.forEach&&!g(function(){(new s).entries().next()}))?(s=b(function(b,c){k(b,s,a),b._c=new r,void 0!=c&&j(c,p,b[t],b)}),d.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(a){var b="add"==a||"set"==a;a in u&&(!q||"clear"!=a)&&h(s.prototype,a,function(c,d){if(!b&&q&&!l(c))return"get"==a?void 0:!1;var e=this._c[a](0===c?0:c,d);return b?this:e})}),"size"in u&&d.setDesc(s.prototype,"size",{get:function(){return this._c.size}})):(s=o.getConstructor(b,a,p,t),i(s.prototype,c)),m(s,a),v[a]=s,f(f.G+f.W+f.F,v),q||o.setStrong(s,a,p),s}},{"./$":67,"./$.descriptors":48,"./$.export":50,"./$.fails":51,"./$.for-of":52,"./$.global":53,"./$.hide":55,"./$.is-object":60,"./$.redefine-all":73,"./$.set-to-string-tag":78,"./$.strict-new":81}],45:[function(a,b,c){var d=b.exports={version:"1.2.6"};"number"==typeof __e&&(__e=d)},{}],46:[function(a,b,c){var d=a("./$.a-function");b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./$.a-function":37}],47:[function(a,b,c){b.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},{}],48:[function(a,b,c){b.exports=!a("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":51}],49:[function(a,b,c){var d=a("./$.is-object"),e=a("./$.global").document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{"./$.global":53,"./$.is-object":60}],50:[function(a,b,c){var d=a("./$.global"),e=a("./$.core"),f=a("./$.ctx"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,b.exports=h},{"./$.core":45,"./$.ctx":46,"./$.global":53}],51:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},{}],52:[function(a,b,c){var d=a("./$.ctx"),e=a("./$.iter-call"),f=a("./$.is-array-iter"),g=a("./$.an-object"),h=a("./$.to-length"),i=a("./core.get-iterator-method");b.exports=function(a,b,c,j){var k,l,m,n=i(a),o=d(c,j,b?2:1),p=0;if("function"!=typeof n)throw TypeError(a+" is not iterable!");if(f(n))for(k=h(a.length);k>p;p++)b?o(g(l=a[p])[0],l[1]):o(a[p]);else for(m=n.call(a);!(l=m.next()).done;)e(m,o,l.value,b)}},{"./$.an-object":39,"./$.ctx":46,"./$.is-array-iter":59,"./$.iter-call":61,"./$.to-length":86,"./core.get-iterator-method":90}],53:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],54:[function(a,b,c){var d={}.hasOwnProperty;b.exports=function(a,b){return d.call(a,b)}},{}],55:[function(a,b,c){var d=a("./$"),e=a("./$.property-desc");b.exports=a("./$.descriptors")?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{"./$":67,"./$.descriptors":48,"./$.property-desc":72}],56:[function(a,b,c){b.exports=a("./$.global").document&&document.documentElement},{"./$.global":53}],57:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],58:[function(a,b,c){var d=a("./$.cof");b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},{"./$.cof":41}],59:[function(a,b,c){var d=a("./$.iterators"),e=a("./$.wks")("iterator"),f=Array.prototype;b.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},{"./$.iterators":66,"./$.wks":89}],60:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],61:[function(a,b,c){var d=a("./$.an-object");b.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(f){var g=a["return"];throw void 0!==g&&d(g.call(a)),f}}},{"./$.an-object":39}],62:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.property-desc"),f=a("./$.set-to-string-tag"),g={};a("./$.hide")(g,a("./$.wks")("iterator"),function(){return this}),b.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")}},{"./$":67,"./$.hide":55,"./$.property-desc":72,"./$.set-to-string-tag":78,"./$.wks":89}],63:[function(a,b,c){"use strict";var d=a("./$.library"),e=a("./$.export"),f=a("./$.redefine"),g=a("./$.hide"),h=a("./$.has"),i=a("./$.iterators"),j=a("./$.iter-create"),k=a("./$.set-to-string-tag"),l=a("./$").getProto,m=a("./$.wks")("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};b.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w}},{"./$":67,"./$.export":50,"./$.has":54,"./$.hide":55,"./$.iter-create":62,"./$.iterators":66,"./$.library":68,"./$.redefine":74,"./$.set-to-string-tag":78,"./$.wks":89}],64:[function(a,b,c){var d=a("./$.wks")("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(g){}b.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){c=!0},f[d]=function(){return g},a(f)}catch(h){}return c}},{"./$.wks":89}],65:[function(a,b,c){b.exports=function(a,b){return{value:b,done:!!a}}},{}],66:[function(a,b,c){b.exports={}},{}],67:[function(a,b,c){var d=Object;b.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach}},{}],68:[function(a,b,c){b.exports=!0},{}],69:[function(a,b,c){var d,e,f,g=a("./$.global"),h=a("./$.task").set,i=g.MutationObserver||g.WebKitMutationObserver,j=g.process,k=g.Promise,l="process"==a("./$.cof")(j),m=function(){var a,b,c;for(l&&(a=j.domain)&&(j.domain=null,a.exit());d;)b=d.domain,c=d.fn,b&&b.enter(),c(),b&&b.exit(),d=d.next;e=void 0,a&&a.enter()};if(l)f=function(){j.nextTick(m)};else if(i){var n=1,o=document.createTextNode("");new i(m).observe(o,{characterData:!0}),f=function(){o.data=n=-n}}else f=k&&k.resolve?function(){k.resolve().then(m)}:function(){h.call(g,m)};b.exports=function(a){var b={fn:a,next:void 0,domain:l&&j.domain};e&&(e.next=b),d||(d=b,f()),e=b}},{"./$.cof":41,"./$.global":53,"./$.task":83}],70:[function(a,b,c){var d=a("./$"),e=a("./$.to-object"),f=a("./$.iobject");b.exports=a("./$.fails")(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign},{"./$":67,"./$.fails":51,"./$.iobject":58,"./$.to-object":87}],71:[function(a,b,c){var d=a("./$.export"),e=a("./$.core"),f=a("./$.fails");b.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},{"./$.core":45,"./$.export":50,"./$.fails":51}],72:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],73:[function(a,b,c){var d=a("./$.redefine");b.exports=function(a,b){for(var c in b)d(a,c,b[c]);return a}},{"./$.redefine":74}],74:[function(a,b,c){b.exports=a("./$.hide")},{"./$.hide":55}],75:[function(a,b,c){b.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b}},{}],76:[function(a,b,c){var d=a("./$").getDesc,e=a("./$.is-object"),f=a("./$.an-object"),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};b.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,e){try{e=a("./$.ctx")(Function.call,d(Object.prototype,"__proto__").set,2),e(b,[]),c=!(b instanceof Array)}catch(f){c=!0}return function(a,b){return g(a,b),
c?a.__proto__=b:e(a,b),a}}({},!1):void 0),check:g}},{"./$":67,"./$.an-object":39,"./$.ctx":46,"./$.is-object":60}],77:[function(a,b,c){"use strict";var d=a("./$.core"),e=a("./$"),f=a("./$.descriptors"),g=a("./$.wks")("species");b.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.setDesc(b,g,{configurable:!0,get:function(){return this}})}},{"./$":67,"./$.core":45,"./$.descriptors":48,"./$.wks":89}],78:[function(a,b,c){var d=a("./$").setDesc,e=a("./$.has"),f=a("./$.wks")("toStringTag");b.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},{"./$":67,"./$.has":54,"./$.wks":89}],79:[function(a,b,c){var d=a("./$.global"),e="__core-js_shared__",f=d[e]||(d[e]={});b.exports=function(a){return f[a]||(f[a]={})}},{"./$.global":53}],80:[function(a,b,c){var d=a("./$.an-object"),e=a("./$.a-function"),f=a("./$.wks")("species");b.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},{"./$.a-function":37,"./$.an-object":39,"./$.wks":89}],81:[function(a,b,c){b.exports=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a}},{}],82:[function(a,b,c){var d=a("./$.to-integer"),e=a("./$.defined");b.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}},{"./$.defined":47,"./$.to-integer":84}],83:[function(a,b,c){var d,e,f,g=a("./$.ctx"),h=a("./$.invoke"),i=a("./$.html"),j=a("./$.dom-create"),k=a("./$.global"),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a("./$.cof")(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{"./$.cof":41,"./$.ctx":46,"./$.dom-create":49,"./$.global":53,"./$.html":56,"./$.invoke":57}],84:[function(a,b,c){var d=Math.ceil,e=Math.floor;b.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}},{}],85:[function(a,b,c){var d=a("./$.iobject"),e=a("./$.defined");b.exports=function(a){return d(e(a))}},{"./$.defined":47,"./$.iobject":58}],86:[function(a,b,c){var d=a("./$.to-integer"),e=Math.min;b.exports=function(a){return a>0?e(d(a),9007199254740991):0}},{"./$.to-integer":84}],87:[function(a,b,c){var d=a("./$.defined");b.exports=function(a){return Object(d(a))}},{"./$.defined":47}],88:[function(a,b,c){var d=0,e=Math.random();b.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}},{}],89:[function(a,b,c){var d=a("./$.shared")("wks"),e=a("./$.uid"),f=a("./$.global").Symbol;b.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))}},{"./$.global":53,"./$.shared":79,"./$.uid":88}],90:[function(a,b,c){var d=a("./$.classof"),e=a("./$.wks")("iterator"),f=a("./$.iterators");b.exports=a("./$.core").getIteratorMethod=function(a){return void 0!=a?a[e]||a["@@iterator"]||f[d(a)]:void 0}},{"./$.classof":40,"./$.core":45,"./$.iterators":66,"./$.wks":89}],91:[function(a,b,c){var d=a("./$.an-object"),e=a("./core.get-iterator-method");b.exports=a("./$.core").getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}},{"./$.an-object":39,"./$.core":45,"./core.get-iterator-method":90}],92:[function(a,b,c){var d=a("./$.classof"),e=a("./$.wks")("iterator"),f=a("./$.iterators");b.exports=a("./$.core").isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}},{"./$.classof":40,"./$.core":45,"./$.iterators":66,"./$.wks":89}],93:[function(a,b,c){"use strict";var d=a("./$.ctx"),e=a("./$.export"),f=a("./$.to-object"),g=a("./$.iter-call"),h=a("./$.is-array-iter"),i=a("./$.to-length"),j=a("./core.get-iterator-method");e(e.S+e.F*!a("./$.iter-detect")(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,k,l=f(a),m="function"==typeof this?this:Array,n=arguments,o=n.length,p=o>1?n[1]:void 0,q=void 0!==p,r=0,s=j(l);if(q&&(p=d(p,o>2?n[2]:void 0,2)),void 0==s||m==Array&&h(s))for(b=i(l.length),c=new m(b);b>r;r++)c[r]=q?p(l[r],r):l[r];else for(k=s.call(l),c=new m;!(e=k.next()).done;r++)c[r]=q?g(k,p,[e.value,r],!0):e.value;return c.length=r,c}})},{"./$.ctx":46,"./$.export":50,"./$.is-array-iter":59,"./$.iter-call":61,"./$.iter-detect":64,"./$.to-length":86,"./$.to-object":87,"./core.get-iterator-method":90}],94:[function(a,b,c){"use strict";var d=a("./$.add-to-unscopables"),e=a("./$.iter-step"),f=a("./$.iterators"),g=a("./$.to-iobject");b.exports=a("./$.iter-define")(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},{"./$.add-to-unscopables":38,"./$.iter-define":63,"./$.iter-step":65,"./$.iterators":66,"./$.to-iobject":85}],95:[function(a,b,c){"use strict";var d=a("./$.collection-strong");a("./$.collection")("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(this,a);return b&&b.v},set:function(a,b){return d.def(this,0===a?0:a,b)}},d,!0)},{"./$.collection":44,"./$.collection-strong":42}],96:[function(a,b,c){var d=a("./$.export");d(d.S+d.F,"Object",{assign:a("./$.object-assign")})},{"./$.export":50,"./$.object-assign":70}],97:[function(a,b,c){var d=a("./$.to-iobject");a("./$.object-sap")("getOwnPropertyDescriptor",function(a){return function(b,c){return a(d(b),c)}})},{"./$.object-sap":71,"./$.to-iobject":85}],98:[function(a,b,c){var d=a("./$.to-object");a("./$.object-sap")("keys",function(a){return function(b){return a(d(b))}})},{"./$.object-sap":71,"./$.to-object":87}],99:[function(a,b,c){var d=a("./$.export");d(d.S,"Object",{setPrototypeOf:a("./$.set-proto").set})},{"./$.export":50,"./$.set-proto":76}],100:[function(a,b,c){},{}],101:[function(a,b,c){"use strict";var d,e=a("./$"),f=a("./$.library"),g=a("./$.global"),h=a("./$.ctx"),i=a("./$.classof"),j=a("./$.export"),k=a("./$.is-object"),l=a("./$.an-object"),m=a("./$.a-function"),n=a("./$.strict-new"),o=a("./$.for-of"),p=a("./$.set-proto").set,q=a("./$.same-value"),r=a("./$.wks")("species"),s=a("./$.species-constructor"),t=a("./$.microtask"),u="Promise",v=g.process,w="process"==i(v),x=g[u],y=function(a){var b=new x(function(){});return a&&(b.constructor=Object),x.resolve(b)===b},z=function(){function b(a){var c=new x(a);return p(c,b.prototype),c}var c=!1;try{if(c=x&&x.resolve&&y(),p(b,x),b.prototype=e.create(x.prototype,{constructor:{value:b}}),b.resolve(5).then(function(){})instanceof b||(c=!1),c&&a("./$.descriptors")){var d=!1;x.resolve(e.setDesc({},"then",{get:function(){d=!0}})),c=d}}catch(f){c=!1}return c}(),A=function(a,b){return f&&a===x&&b===d?!0:q(a,b)},B=function(a){var b=l(a)[r];return void 0!=b?b:a},C=function(a){var b;return k(a)&&"function"==typeof(b=a.then)?b:!1},D=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=m(b),this.reject=m(c)},E=function(a){try{a()}catch(b){return{error:b}}},F=function(a,b){if(!a.n){a.n=!0;var c=a.c;t(function(){for(var d=a.v,e=1==a.s,f=0,h=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject;try{g?(e||(a.h=!0),c=g===!0?d:g(d),c===b.promise?i(TypeError("Promise-chain cycle")):(f=C(c))?f.call(c,h,i):h(c)):i(d)}catch(j){i(j)}};c.length>f;)h(c[f++]);c.length=0,a.n=!1,b&&setTimeout(function(){var b,c,e=a.p;G(e)&&(w?v.emit("unhandledRejection",d,e):(b=g.onunhandledrejection)?b({promise:e,reason:d}):(c=g.console)&&c.error&&c.error("Unhandled promise rejection",d)),a.a=void 0},1)})}},G=function(a){var b,c=a._d,d=c.a||c.c,e=0;if(c.h)return!1;for(;d.length>e;)if(b=d[e++],b.fail||!G(b.promise))return!1;return!0},H=function(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,b.a=b.c.slice(),F(b,!0))},I=function(a){var b,c=this;if(!c.d){c.d=!0,c=c.r||c;try{if(c.p===a)throw TypeError("Promise can't be resolved itself");(b=C(a))?t(function(){var d={r:c,d:!1};try{b.call(a,h(I,d,1),h(H,d,1))}catch(e){H.call(d,e)}}):(c.v=a,c.s=1,F(c,!1))}catch(d){H.call({r:c,d:!1},d)}}};z||(x=function(a){m(a);var b=this._d={p:n(this,x,u),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{a(h(I,b,1),h(H,b,1))}catch(c){H.call(b,c)}},a("./$.redefine-all")(x.prototype,{then:function(a,b){var c=new D(s(this,x)),d=c.promise,e=this._d;return c.ok="function"==typeof a?a:!0,c.fail="function"==typeof b&&b,e.c.push(c),e.a&&e.a.push(c),e.s&&F(e,!1),d},"catch":function(a){return this.then(void 0,a)}})),j(j.G+j.W+j.F*!z,{Promise:x}),a("./$.set-to-string-tag")(x,u),a("./$.set-species")(u),d=a("./$.core")[u],j(j.S+j.F*!z,u,{reject:function(a){var b=new D(this),c=b.reject;return c(a),b.promise}}),j(j.S+j.F*(!z||y(!0)),u,{resolve:function(a){if(a instanceof x&&A(a.constructor,this))return a;var b=new D(this),c=b.resolve;return c(a),b.promise}}),j(j.S+j.F*!(z&&a("./$.iter-detect")(function(a){x.all(a)["catch"](function(){})})),u,{all:function(a){var b=B(this),c=new D(b),d=c.resolve,f=c.reject,g=[],h=E(function(){o(a,!1,g.push,g);var c=g.length,h=Array(c);c?e.each.call(g,function(a,e){var g=!1;b.resolve(a).then(function(a){g||(g=!0,h[e]=a,--c||d(h))},f)}):d(h)});return h&&f(h.error),c.promise},race:function(a){var b=B(this),c=new D(b),d=c.reject,e=E(function(){o(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})},{"./$":67,"./$.a-function":37,"./$.an-object":39,"./$.classof":40,"./$.core":45,"./$.ctx":46,"./$.descriptors":48,"./$.export":50,"./$.for-of":52,"./$.global":53,"./$.is-object":60,"./$.iter-detect":64,"./$.library":68,"./$.microtask":69,"./$.redefine-all":73,"./$.same-value":75,"./$.set-proto":76,"./$.set-species":77,"./$.set-to-string-tag":78,"./$.species-constructor":80,"./$.strict-new":81,"./$.wks":89}],102:[function(a,b,c){"use strict";var d=a("./$.collection-strong");a("./$.collection")("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(this,a=0===a?0:a,a)}},d)},{"./$.collection":44,"./$.collection-strong":42}],103:[function(a,b,c){"use strict";var d=a("./$.string-at")(!0);a("./$.iter-define")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},{"./$.iter-define":63,"./$.string-at":82}],104:[function(a,b,c){var d=a("./$.export");d(d.P,"Map",{toJSON:a("./$.collection-to-json")("Map")})},{"./$.collection-to-json":43,"./$.export":50}],105:[function(a,b,c){var d=a("./$.export");d(d.P,"Set",{toJSON:a("./$.collection-to-json")("Set")})},{"./$.collection-to-json":43,"./$.export":50}],106:[function(a,b,c){a("./es6.array.iterator");var d=a("./$.iterators");d.NodeList=d.HTMLCollection=d.Array},{"./$.iterators":66,"./es6.array.iterator":94}],107:[function(a,b,c){function d(a,b,c,d){var f=e.apply(this,arguments);return a.addEventListener(c,f),{destroy:function(){a.removeEventListener(c,f)}}}function e(a,b,c,d){return function(c){c.delegateTarget=f(c.target,b,!0),c.delegateTarget&&d.call(a,c)}}var f=a("closest");b.exports=d},{closest:24}],108:[function(a,b,c){function d(a){e.call(this),a=a||{},this.states=a.states||["default"],this.currentState=a.defaultState||this.states[0],this.history=[],this.configs={},this.events=[];var b=this;this.on("transition",function(a){b.events.forEach(function(c){c.from===a.from&&c.to===a.to&&b.emit(c.event)})})}var e=a("events").EventEmitter;d.prototype=Object.create(e.prototype),d.prototype.setState=function(a){var b=this.currentState;if(!this._validate(b,a))return!1;this.history.push({state:b,args:this.currentArgs});var c=arguments.length>1?[].slice.call(arguments,1):null;return this.currentArgs=c,this.currentState=a,this._emit(b,a,c),!0},d.prototype.back=function(){if(!this.history.length)return!1;var a=this.history[this.history.length-1],b=this.currentState,c=a.state,d=a.args;return this._validate(b,c)?(this.history.pop(),this.currentState=c,this.currentArgs=d,this._emit(b,c,d,!0),!0):!1},d.prototype.lock=function(){this.locked=!0},d.prototype.unlock=function(){this.locked=!1},d.prototype.config=function(a,b){b.to=b.to||{},b.from=b.from||{},this.configs[a]=b},d.prototype.register=function(a,b){this.events.push({event:a,from:b.from,to:b.to})},d.prototype._emit=function(a,b,c,d){var e={from:a,to:b,args:c,back:d};this.emit("transition",e),this.emit("leave:"+a,e),this.emit("enter:"+b,e)},d.prototype._validate=function(a,b){if(!(this.locked||a===b||this.states.indexOf(b)<0)){var c=this.configs[a];if(c)if(c.to.only){if(c.to.only.indexOf(b)<0)return}else if(c.to.exclude&&c.to.exclude.indexOf(b)>-1)return;var d=this.configs[b];if(d)if(d.from.only){if(d.from.only.indexOf(a)<0)return}else if(d.from.exclude&&d.from.exclude.indexOf(a)>-1)return;return!0}},b.exports=d},{events:110}],109:[function(a,b,c){arguments[4][100][0].apply(c,arguments)},{dup:100}],110:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],111:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:112}],112:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],113:[function(a,b,c){(function(a){!function(d){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,".");var e=a.split("."),g=f(e,b).join(".");return d+g}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;(s.global===s||s.window===s||s.self===s)&&(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.3.2",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],114:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],115:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],116:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":114,"./encode":115}],117:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:113,querystring:116}],118:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a);
},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}c.__esModule=!0;var f=a("./handlebars.runtime"),g=d(f),h=a("./handlebars/compiler/ast"),i=d(h),j=a("./handlebars/compiler/base"),k=a("./handlebars/compiler/compiler"),l=a("./handlebars/compiler/javascript-compiler"),m=d(l),n=a("./handlebars/compiler/visitor"),o=d(n),p=a("./handlebars/no-conflict"),q=d(p),r=g["default"].create,s=e();s.create=e,q["default"](s),s.Visitor=o["default"],s["default"]=s,c["default"]=s,b.exports=c["default"]},{"./handlebars.runtime":119,"./handlebars/compiler/ast":121,"./handlebars/compiler/base":122,"./handlebars/compiler/compiler":124,"./handlebars/compiler/javascript-compiler":126,"./handlebars/compiler/visitor":129,"./handlebars/no-conflict":143}],119:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}c.__esModule=!0;var g=a("./handlebars/base"),h=e(g),i=a("./handlebars/safe-string"),j=d(i),k=a("./handlebars/exception"),l=d(k),m=a("./handlebars/utils"),n=e(m),o=a("./handlebars/runtime"),p=e(o),q=a("./handlebars/no-conflict"),r=d(q),s=f();s.create=f,r["default"](s),s["default"]=s,c["default"]=s,b.exports=c["default"]},{"./handlebars/base":120,"./handlebars/exception":133,"./handlebars/no-conflict":143,"./handlebars/runtime":144,"./handlebars/safe-string":145,"./handlebars/utils":146}],120:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}c.__esModule=!0,c.HandlebarsEnvironment=e;var f=a("./utils"),g=a("./exception"),h=d(g),i=a("./helpers"),j=a("./decorators"),k=a("./logger"),l=d(k),m="4.0.5";c.VERSION=m;var n=7;c.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};c.REVISION_CHANGES=o;var p="[object Object]";e.prototype={constructor:e,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;c.log=q,c.createFrame=f.createFrame,c.logger=l["default"]},{"./decorators":131,"./exception":133,"./helpers":134,"./logger":142,"./utils":146}],121:[function(a,b,c){"use strict";c.__esModule=!0;var d={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!d.helpers.scopedId(a)&&!a.depth}}};c["default"]=d,b.exports=c["default"]},{}],122:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}c.__esModule=!0,c.parse=f;var g=a("./parser"),h=e(g),i=a("./whitespace-control"),j=e(i),k=a("./helpers"),l=d(k),m=a("../utils");c.parser=h["default"];var n={};m.extend(n,l)},{"../utils":146,"./helpers":125,"./parser":127,"./whitespace-control":130}],123:[function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;g>e;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}c.__esModule=!0;var f=a("../utils"),g=void 0;try{if("function"!=typeof define||!define.amd){var h=a("source-map");g=h.SourceNode}}catch(i){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;c>b;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;e>c;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},c["default"]=e,b.exports=c["default"]},{"../utils":146,"source-map":148}],124:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){}function f(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function g(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function h(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!h(a[c],b[c]))return!1;return!0}}function i(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}c.__esModule=!0,c.Compiler=e,c.precompile=f,c.compile=g;var j=a("../exception"),k=d(j),l=a("../utils"),m=a("./ast"),n=d(m),o=[].slice;e.prototype={compiler:e,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!h(d.args,e.args))return!1}b=this.children.length;for(var c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;c>d;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){i(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){i(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");d>c;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;c>b;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},{"../exception":133,"../utils":146,"./ast":121}],125:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function f(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function g(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function h(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function i(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function j(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;i>h;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function k(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function l(a,b,c,d){e(a,c),d=this.locInfo(d);var f={type:"Program",body:b,strip:{},loc:d};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:d}}function m(a,b,c,d,f,g){d&&d.path&&e(a,d);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=d.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:d&&d.strip,loc:this.locInfo(g)}}function n(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function o(a,b,c,d){return e(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(d)}}c.__esModule=!0,c.SourceLocation=f,c.id=g,c.stripFlags=h,c.stripComment=i,c.preparePath=j,c.prepareMustache=k,c.prepareRawBlock=l,c.prepareBlock=m,c.prepareProgram=n,c.preparePartialBlock=o;var p=a("../exception"),q=d(p)},{"../exception":133}],126:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){this.value=a}function f(){}function g(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;g>f;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}c.__esModule=!0;var h=a("../base"),i=a("../exception"),j=d(i),k=a("../utils"),l=a("./code-gen"),m=d(l);f.prototype={nameLookup:function(a,b){return f.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;i>h;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;i>h;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var f=this;if(this.options.strict||this.options.assumeObjects)return void this.push(g(this.options.strict&&e,this,b,a));for(var h=b.length;h>c;c++)this.replaceStack(function(e){var g=f.nameLookup(e,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:f,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;g>f;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);null==h?(this.context.programs.push(""),h=this.context.programs.length,d.index=h,d.name="program"+h,this.context.programs[h]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[h]=e.decorators,this.context.environments[h]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams):(d.index=h,d.name="program"+h,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof e||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new e(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,d=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof e)c=[g.value],b=["(",c],f=!0;else{d=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),d&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d instanceof e)this.compileStack.push(d);else{var f=this.incrStack();this.pushSource([f," = ",d,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof e)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof e?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : {}");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=f.RESERVED_WORDS={},c=0,d=a.length;d>c;c++)b[a[c]]=!0}(),f.isValidJavaScriptVariableName=function(a){return!f.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},c["default"]=f,b.exports=c["default"]},{"../base":120,"../exception":133,"../utils":146,"./code-gen":123}],127:[function(a,b,c){"use strict";var d=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,
openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();c.__esModule=!0,c["default"]=d},{}],128:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return(new f).accept(a)}function f(){this.padding=0}c.__esModule=!0,c.print=e,c.PrintVisitor=f;var g=a("./visitor"),h=d(g);f.prototype=new h["default"],f.prototype.pad=function(a){for(var b="",c=0,d=this.padding;d>c;c++)b+="  ";return b+=a+"\n"},f.prototype.Program=function(a){var b="",c=a.body,d=void 0,e=void 0;if(a.blockParams){var f="BLOCK PARAMS: [";for(d=0,e=a.blockParams.length;e>d;d++)f+=" "+a.blockParams[d];f+=" ]",b+=this.pad(f)}for(d=0,e=c.length;e>d;d++)b+=this.accept(c[d]);return this.padding--,b},f.prototype.MustacheStatement=function(a){return this.pad("{{ "+this.SubExpression(a)+" }}")},f.prototype.Decorator=function(a){return this.pad("{{ DIRECTIVE "+this.SubExpression(a)+" }}")},f.prototype.BlockStatement=f.prototype.DecoratorBlock=function(a){var b="";return b+=this.pad(("DecoratorBlock"===a.type?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,b+=this.pad(this.SubExpression(a)),a.program&&(b+=this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--),a.inverse&&(a.program&&this.padding++,b+=this.pad("{{^}}"),this.padding++,b+=this.accept(a.inverse),this.padding--,a.program&&this.padding--),this.padding--,b},f.prototype.PartialStatement=function(a){var b="PARTIAL:"+a.name.original;return a.params[0]&&(b+=" "+this.accept(a.params[0])),a.hash&&(b+=" "+this.accept(a.hash)),this.pad("{{> "+b+" }}")},f.prototype.PartialBlockStatement=function(a){var b="PARTIAL BLOCK:"+a.name.original;return a.params[0]&&(b+=" "+this.accept(a.params[0])),a.hash&&(b+=" "+this.accept(a.hash)),b+=" "+this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--,this.pad("{{> "+b+" }}")},f.prototype.ContentStatement=function(a){return this.pad("CONTENT[ '"+a.value+"' ]")},f.prototype.CommentStatement=function(a){return this.pad("{{! '"+a.value+"' }}")},f.prototype.SubExpression=function(a){for(var b=a.params,c=[],d=void 0,e=0,f=b.length;f>e;e++)c.push(this.accept(b[e]));return b="["+c.join(", ")+"]",d=a.hash?" "+this.accept(a.hash):"",this.accept(a.path)+" "+b+d},f.prototype.PathExpression=function(a){var b=a.parts.join("/");return(a.data?"@":"")+"PATH:"+b},f.prototype.StringLiteral=function(a){return'"'+a.value+'"'},f.prototype.NumberLiteral=function(a){return"NUMBER{"+a.value+"}"},f.prototype.BooleanLiteral=function(a){return"BOOLEAN{"+a.value+"}"},f.prototype.UndefinedLiteral=function(){return"UNDEFINED"},f.prototype.NullLiteral=function(){return"NULL"},f.prototype.Hash=function(a){for(var b=a.pairs,c=[],d=0,e=b.length;e>d;d++)c.push(this.accept(b[d]));return"HASH{"+c.join(", ")+"}"},f.prototype.HashPair=function(a){return a.key+"="+this.accept(a.value)}},{"./visitor":129}],129:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){this.parents=[]}function f(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function g(a){f.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function h(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}c.__esModule=!0;var i=a("../exception"),j=d(i);e.prototype={constructor:e,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!e.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;c>b;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:f,Decorator:f,BlockStatement:g,DecoratorBlock:g,PartialStatement:h,PartialBlockStatement:function(a){h.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:f,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},c["default"]=e,b.exports=c["default"]},{"../exception":133}],130:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function f(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function g(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function h(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function i(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}c.__esModule=!0;var j=a("./visitor"),k=d(j);e.prototype=new k["default"],e.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,e=0,j=d.length;j>e;e++){var k=d[e],l=this.accept(k);if(l){var m=f(d,e,c),n=g(d,e,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&h(d,e,!0),l.open&&i(d,e,!0),b&&q&&(h(d,e),i(d,e)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[e-1].original)[1])),b&&o&&(h((k.program||k.inverse).body),i(d,e)),b&&p&&(h(d,e),
i((k.inverse||k.program).body))}}return a},e.prototype.BlockStatement=e.prototype.DecoratorBlock=e.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,e=c;if(c&&c.chained)for(d=c.body[0].program;e.chained;)e=e.body[e.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:g(b.body),closeStandalone:f((d||b).body)};if(a.openStrip.close&&h(b.body,null,!0),c){var k=a.inverseStrip;k.open&&i(b.body,null,!0),k.close&&h(d.body,null,!0),a.closeStrip.open&&i(e.body,null,!0),!this.options.ignoreStandalone&&f(b.body)&&g(d.body)&&(i(b.body),h(d.body))}else a.closeStrip.open&&i(b.body,null,!0);return j},e.prototype.Decorator=e.prototype.MustacheStatement=function(a){return a.strip},e.prototype.PartialStatement=e.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},c["default"]=e,b.exports=c["default"]},{"./visitor":129}],131:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a)}c.__esModule=!0,c.registerDefaultDecorators=e;var f=a("./decorators/inline"),g=d(f)},{"./decorators/inline":132}],132:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},b.exports=c["default"]},{"../utils":146}],133:[function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d),c&&(this.lineNumber=f,this.column=g)}c.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d,b.exports=c["default"]},{}],134:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}c.__esModule=!0,c.registerDefaultHelpers=e;var f=a("./helpers/block-helper-missing"),g=d(f),h=a("./helpers/each"),i=d(h),j=a("./helpers/helper-missing"),k=d(j),l=a("./helpers/if"),m=d(l),n=a("./helpers/log"),o=d(n),p=a("./helpers/lookup"),q=d(p),r=a("./helpers/with"),s=d(r)},{"./helpers/block-helper-missing":135,"./helpers/each":136,"./helpers/helper-missing":137,"./helpers/if":138,"./helpers/log":139,"./helpers/lookup":140,"./helpers/with":141}],135:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},b.exports=c["default"]},{"../utils":146}],136:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../utils"),f=a("../exception"),g=d(f);c["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;l>h;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},b.exports=c["default"]},{"../exception":133,"../utils":146}],137:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../exception"),f=d(e);c["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},b.exports=c["default"]},{"../exception":133}],138:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},b.exports=c["default"]},{"../utils":146}],139:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},b.exports=c["default"]},{}],140:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},b.exports=c["default"]},{}],141:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},b.exports=c["default"]},{"../utils":146}],142:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("./utils"),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;c>f;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};c["default"]=e,b.exports=c["default"]},{"./utils":146}],143:[function(a,b,c){(function(a){"use strict";c.__esModule=!0,c["default"]=function(b){var c="undefined"!=typeof a?a:window,d=c.Handlebars;b.noConflict=function(){return c.Handlebars===b&&(c.Handlebars=d),b}},b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],144:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(c>b){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function g(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=l(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!==f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=m(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var f=this.programs[a],g=this.fn(a);return b||e||d||c?f=h(this,a,g,b,c,d,e):f||(f=this.programs[a]=h(this,a,g)),f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,f){if(a.useBlockParams&&!d)throw new q["default"]("must pass block params");if(a.useDepths&&!f)throw new q["default"]("must pass parent depths");return h(e,b,a[b],c,0,d,f)},d}function h(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return g&&b!==g[0]&&(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=m(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function j(a,b,c){c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var d=void 0;if(c.fn&&c.fn!==k&&(c.data=r.createFrame(c.data),d=c.data["partial-block"]=c.fn,d.partials&&(c.partials=o.extend({},c.partials,d.partials))),void 0===a&&d&&(a=d),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function k(){return""}function l(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function m(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}c.__esModule=!0,c.checkRevision=f,c.template=g,c.wrapProgram=h,c.resolvePartial=i,c.invokePartial=j,c.noop=k;var n=a("./utils"),o=e(n),p=a("./exception"),q=d(p),r=a("./base")},{"./base":120,"./exception":133,"./utils":146}],145:[function(a,b,c){"use strict";function d(a){this.string=a}c.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},c["default"]=d,b.exports=c["default"]},{}],146:[function(a,b,c){"use strict";function d(a){return l[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return n.test(a)?a.replace(m,d):a}function h(a){return a||0===a?q(a)&&0===a.length?!0:!1:!0}function i(a){var b=e({},a);return b._parent=a,b}function j(a,b){return a.path=b,a}function k(a,b){return(a?a+".":"")+b}c.__esModule=!0,c.extend=e,c.indexOf=f,c.escapeExpression=g,c.isEmpty=h,c.createFrame=i,c.blockParams=j,c.appendContextPath=k;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},m=/[&<>"'`=]/g,n=/[&<>"'`=]/,o=Object.prototype.toString;c.toString=o;var p=function(a){return"function"==typeof a};p(/x/)&&(c.isFunction=p=function(a){return"function"==typeof a&&"[object Function]"===o.call(a)}),c.isFunction=p;var q=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===o.call(a):!1};c.isArray=q},{}],147:[function(a,b,c){function d(b,c){var d=a("fs"),f=d.readFileSync(c,"utf8");b.exports=e.compile(f)}var e=a("../dist/cjs/handlebars")["default"],f=a("../dist/cjs/handlebars/compiler/printer");e.PrintVisitor=f.PrintVisitor,e.print=f.print,b.exports=e,"undefined"!=typeof a&&a.extensions&&(a.extensions[".handlebars"]=d,a.extensions[".hbs"]=d)},{"../dist/cjs/handlebars":118,"../dist/cjs/handlebars/compiler/printer":128,fs:109}],148:[function(a,b,c){c.SourceMapGenerator=a("./source-map/source-map-generator").SourceMapGenerator,c.SourceMapConsumer=a("./source-map/source-map-consumer").SourceMapConsumer,c.SourceNode=a("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":155,"./source-map/source-map-generator":156,"./source-map/source-node":157}],149:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(){this._array=[],this._set={}}var e=a("./util");d.fromArray=function(a,b){for(var c=new d,e=0,f=a.length;f>e;e++)c.add(a[e],b);return c},d.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},d.prototype.add=function(a,b){var c=this.has(a),d=this._array.length;(!c||b)&&this._array.push(a),c||(this._set[e.toSetString(a)]=d)},d.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this._set,e.toSetString(a))},d.prototype.indexOf=function(a){if(this.has(a))return this._set[e.toSetString(a)];throw new Error('"'+a+'" is not in the set.')},d.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},d.prototype.toArray=function(){return this._array.slice()},b.ArraySet=d})},{"./util":158,amdefine:1}],150:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){return 0>a?(-a<<1)+1:(a<<1)+0}function e(a){var b=1===(1&a),c=a>>1;return b?-c:c}var f=a("./base64"),g=5,h=1<<g,i=h-1,j=h;b.encode=function(a){var b,c="",e=d(a);do b=e&i,e>>>=g,e>0&&(b|=j),c+=f.encode(b);while(e>0);return c},b.decode=function(a,b,c){var d,h,k=a.length,l=0,m=0;do{if(b>=k)throw new Error("Expected more digits in base 64 VLQ value.");if(h=f.decode(a.charCodeAt(b++)),-1===h)throw new Error("Invalid base64 digit: "+a.charAt(b-1));d=!!(h&j),h&=i,l+=h<<m,m+=g}while(d);c.value=e(l),c.rest=b}})},{"./base64":151,amdefine:1}],151:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");b.encode=function(a){if(a>=0&&a<d.length)return d[a];throw new TypeError("Must be between 0 and 63: "+aNumber)},b.decode=function(a){var b=65,c=90,d=97,e=122,f=48,g=57,h=43,i=47,j=26,k=52;return a>=b&&c>=a?a-b:a>=d&&e>=a?a-d+j:a>=f&&g>=a?a-f+k:a==h?62:a==i?63:-1}})},{amdefine:1}],152:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,c,e,f,g,h){var i=Math.floor((c-a)/2)+a,j=g(e,f[i],!0);return 0===j?i:j>0?c-i>1?d(i,c,e,f,g,h):h==b.LEAST_UPPER_BOUND?c<f.length?c:-1:i:i-a>1?d(a,i,e,f,g,h):h==b.LEAST_UPPER_BOUND?i:0>a?-1:a}b.GREATEST_LOWER_BOUND=1,b.LEAST_UPPER_BOUND=2,b.search=function(a,c,e,f){if(0===c.length)return-1;var g=d(-1,c.length,a,c,e,f||b.GREATEST_LOWER_BOUND);if(0>g)return-1;for(;g-1>=0&&0===e(c[g],c[g-1],!0);)--g;return g}})},{amdefine:1}],153:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b){var c=a.generatedLine,d=b.generatedLine,e=a.generatedColumn,g=b.generatedColumn;return d>c||d==c&&g>=e||f.compareByGeneratedPositionsInflated(a,b)<=0}function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var f=a("./util");e.prototype.unsortedForEach=function(a,b){this._array.forEach(a,b)},e.prototype.add=function(a){d(this._last,a)?(this._last=a,this._array.push(a)):(this._sorted=!1,this._array.push(a))},e.prototype.toArray=function(){return this._sorted||(this._array.sort(f.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},b.MappingList=e})},{"./util":158,amdefine:1}],154:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function e(a,b){return Math.round(a+Math.random()*(b-a))}function f(a,b,c,g){if(g>c){var h=e(c,g),i=c-1;d(a,h,g);for(var j=a[g],k=c;g>k;k++)b(a[k],j)<=0&&(i+=1,d(a,i,k));d(a,i+1,k);var l=i+1;f(a,b,c,l-1),f(a,b,l+1,g)}}b.quickSort=function(a,b){f(a,b,0,a.length-1)}})},{amdefine:1}],155:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){var b=a;return"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,""))),null!=b.sections?new g(b):new e(b)}function e(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),d=h.getArg(b,"sources"),e=h.getArg(b,"names",[]),f=h.getArg(b,"sourceRoot",null),g=h.getArg(b,"sourcesContent",null),i=h.getArg(b,"mappings"),k=h.getArg(b,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);d=d.map(h.normalize),this._names=j.fromArray(e,!0),this._sources=j.fromArray(d,!0),this.sourceRoot=f,this.sourcesContent=g,this._mappings=i,this.file=k}function f(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function g(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),e=h.getArg(b,"sections");if(c!=this._version)throw new Error("Unsupported version: "+c);this._sources=new j,this._names=new j;var f={line:-1,column:0};this._sections=e.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var b=h.getArg(a,"offset"),c=h.getArg(b,"line"),e=h.getArg(b,"column");if(c<f.line||c===f.line&&e<f.column)throw new Error("Section offsets must be ordered and non-overlapping.");return f=b,{generatedOffset:{generatedLine:c+1,generatedColumn:e+1},consumer:new d(h.getArg(a,"map"))}})}var h=a("./util"),i=a("./binary-search"),j=a("./array-set").ArraySet,k=a("./base64-vlq"),l=a("./quick-sort").quickSort;d.fromSourceMap=function(a){return e.fromSourceMap(a)},d.prototype._version=3,d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),d.prototype._charIsMappingSeparator=function(a,b){var c=a.charAt(b);return";"===c||","===c},d.prototype._parseMappings=function(a,b){throw new Error("Subclasses must implement _parseMappings")},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.prototype.eachMapping=function(a,b,c){var e,f=b||null,g=c||d.GENERATED_ORDER;switch(g){case d.GENERATED_ORDER:e=this._generatedMappings;break;case d.ORIGINAL_ORDER:e=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;e.map(function(a){var b=null===a.source?null:this._sources.at(a.source);return null!=b&&null!=i&&(b=h.join(i,b)),{source:b,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:null===a.name?null:this._names.at(a.name)}},this).forEach(a,f)},d.prototype.allGeneratedPositionsFor=function(a){var b=h.getArg(a,"line"),c={source:h.getArg(a,"source"),originalLine:b,originalColumn:h.getArg(a,"column",0)};if(null!=this.sourceRoot&&(c.source=h.relative(this.sourceRoot,c.source)),!this._sources.has(c.source))return[];c.source=this._sources.indexOf(c.source);var d=[],e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(e>=0){var f=this._originalMappings[e];if(void 0===a.column)for(var g=f.originalLine;f&&f.originalLine===g;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e];else for(var j=f.originalColumn;f&&f.originalLine===b&&f.originalColumn==j;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e]}return d},b.SourceMapConsumer=d,e.prototype=Object.create(d.prototype),e.prototype.consumer=d,e.fromSourceMap=function(a){var b=Object.create(e.prototype),c=b._names=j.fromArray(a._names.toArray(),!0),d=b._sources=j.fromArray(a._sources.toArray(),!0);b.sourceRoot=a._sourceRoot,b.sourcesContent=a._generateSourcesContent(b._sources.toArray(),b.sourceRoot),b.file=a._file;for(var g=a._mappings.toArray().slice(),i=b.__generatedMappings=[],k=b.__originalMappings=[],m=0,n=g.length;n>m;m++){var o=g[m],p=new f;p.generatedLine=o.generatedLine,p.generatedColumn=o.generatedColumn,o.source&&(p.source=d.indexOf(o.source),p.originalLine=o.originalLine,p.originalColumn=o.originalColumn,o.name&&(p.name=c.indexOf(o.name)),k.push(p)),i.push(p)}return l(b.__originalMappings,h.compareByOriginalPositions),b},e.prototype._version=3,Object.defineProperty(e.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?h.join(this.sourceRoot,a):a},this)}}),e.prototype._parseMappings=function(a,b){for(var c,d,e,g,i,j=1,m=0,n=0,o=0,p=0,q=0,r=a.length,s=0,t={},u={},v=[],w=[];r>s;)if(";"===a.charAt(s))j++,s++,m=0;else if(","===a.charAt(s))s++;else{for(c=new f,c.generatedLine=j,g=s;r>g&&!this._charIsMappingSeparator(a,g);g++);if(d=a.slice(s,g),e=t[d])s+=d.length;else{for(e=[];g>s;)k.decode(a,s,u),i=u.value,s=u.rest,e.push(i);if(2===e.length)throw new Error("Found a source, but no line and column");if(3===e.length)throw new Error("Found a source and line, but no column");t[d]=e}c.generatedColumn=m+e[0],m=c.generatedColumn,e.length>1&&(c.source=p+e[1],p+=e[1],c.originalLine=n+e[2],n=c.originalLine,c.originalLine+=1,c.originalColumn=o+e[3],o=c.originalColumn,e.length>4&&(c.name=q+e[4],q+=e[4])),w.push(c),"number"==typeof c.originalLine&&v.push(c)}l(w,h.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,l(v,h.compareByOriginalPositions),this.__originalMappings=v},e.prototype._findMapping=function(a,b,c,d,e,f){if(a[c]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+a[c]);if(a[d]<0)throw new TypeError("Column must be greater than or equal to 0, got "+a[d]);return i.search(a,b,e,f)},e.prototype.computeColumnSpans=function(){for(var a=0;a<this._generatedMappings.length;++a){var b=this._generatedMappings[a];if(a+1<this._generatedMappings.length){var c=this._generatedMappings[a+1];if(b.generatedLine===c.generatedLine){b.lastGeneratedColumn=c.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},e.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=this._findMapping(b,this._generatedMappings,"generatedLine","generatedColumn",h.compareByGeneratedPositionsDeflated,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(c>=0){var e=this._generatedMappings[c];if(e.generatedLine===b.generatedLine){var f=h.getArg(e,"source",null);null!==f&&(f=this._sources.at(f),null!=this.sourceRoot&&(f=h.join(this.sourceRoot,f)));var g=h.getArg(e,"name",null);return null!==g&&(g=this._names.at(g)),{source:f,line:h.getArg(e,"originalLine",null),column:h.getArg(e,"originalColumn",null),name:g}}}return{source:null,line:null,column:null,name:null}},e.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(a){return null==a}):!1},e.prototype.sourceContentFor=function(a,b){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(a=h.relative(this.sourceRoot,a)),this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];var c;if(null!=this.sourceRoot&&(c=h.urlParse(this.sourceRoot))){var d=a.replace(/^file:\/\//,"");if("file"==c.scheme&&this._sources.has(d))return this.sourcesContent[this._sources.indexOf(d)];if((!c.path||"/"==c.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},e.prototype.generatedPositionFor=function(a){var b=h.getArg(a,"source");if(null!=this.sourceRoot&&(b=h.relative(this.sourceRoot,b)),!this._sources.has(b))return{line:null,column:null,lastColumn:null};b=this._sources.indexOf(b);var c={source:b,originalLine:h.getArg(a,"line"),originalColumn:h.getArg(a,"column")},e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(e>=0){var f=this._originalMappings[e];if(f.source===c.source)return{line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},b.BasicSourceMapConsumer=e,g.prototype=Object.create(d.prototype),g.prototype.constructor=d,g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){for(var a=[],b=0;b<this._sections.length;b++)for(var c=0;c<this._sections[b].consumer.sources.length;c++)a.push(this._sections[b].consumer.sources[c]);return a}}),g.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=i.search(b,this._sections,function(a,b){var c=a.generatedLine-b.generatedOffset.generatedLine;return c?c:a.generatedColumn-b.generatedOffset.generatedColumn}),d=this._sections[c];return d?d.consumer.originalPositionFor({line:b.generatedLine-(d.generatedOffset.generatedLine-1),column:b.generatedColumn-(d.generatedOffset.generatedLine===b.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:a.bias}):{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})},g.prototype.sourceContentFor=function(a,b){for(var c=0;c<this._sections.length;c++){var d=this._sections[c],e=d.consumer.sourceContentFor(a,!0);if(e)return e}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(a){for(var b=0;b<this._sections.length;b++){var c=this._sections[b];if(-1!==c.consumer.sources.indexOf(h.getArg(a,"source"))){var d=c.consumer.generatedPositionFor(a);if(d){var e={line:d.line+(c.generatedOffset.generatedLine-1),column:d.column+(c.generatedOffset.generatedLine===d.line?c.generatedOffset.generatedColumn-1:0)};return e}}}return{line:null,column:null}},g.prototype._parseMappings=function(a,b){this.__generatedMappings=[],this.__originalMappings=[];for(var c=0;c<this._sections.length;c++)for(var d=this._sections[c],e=d.consumer._generatedMappings,f=0;f<e.length;f++){var g=e[c],i=d.consumer._sources.at(g.source);null!==d.consumer.sourceRoot&&(i=h.join(d.consumer.sourceRoot,i)),this._sources.add(i),i=this._sources.indexOf(i);var j=d.consumer._names.at(g.name);this._names.add(j),j=this._names.indexOf(j);var k={source:i,generatedLine:g.generatedLine+(d.generatedOffset.generatedLine-1),generatedColumn:g.column+(d.generatedOffset.generatedLine===g.generatedLine)?d.generatedOffset.generatedColumn-1:0,originalLine:g.originalLine,originalColumn:g.originalColumn,name:j};this.__generatedMappings.push(k),"number"==typeof k.originalLine&&this.__originalMappings.push(k)}l(this.__generatedMappings,h.compareByGeneratedPositionsDeflated),l(this.__originalMappings,h.compareByOriginalPositions)},b.IndexedSourceMapConsumer=g})},{"./array-set":149,"./base64-vlq":150,"./binary-search":152,"./quick-sort":154,"./util":158,amdefine:1}],156:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){a||(a={}),this._file=f.getArg(a,"file",null),this._sourceRoot=f.getArg(a,"sourceRoot",null),this._skipValidation=f.getArg(a,"skipValidation",!1),this._sources=new g,this._names=new g,this._mappings=new h,this._sourcesContents=null}var e=a("./base64-vlq"),f=a("./util"),g=a("./array-set").ArraySet,h=a("./mapping-list").MappingList;d.prototype._version=3,d.fromSourceMap=function(a){var b=a.sourceRoot,c=new d({file:a.file,sourceRoot:b});return a.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};null!=a.source&&(d.source=a.source,null!=b&&(d.source=f.relative(b,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name)),c.addMapping(d)}),a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&c.setSourceContent(b,d)}),c},d.prototype.addMapping=function(a){var b=f.getArg(a,"generated"),c=f.getArg(a,"original",null),d=f.getArg(a,"source",null),e=f.getArg(a,"name",null);this._skipValidation||this._validateMapping(b,c,d,e),null==d||this._sources.has(d)||this._sources.add(d),null==e||this._names.has(e)||this._names.add(e),this._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:d,name:e})},d.prototype.setSourceContent=function(a,b){var c=a;null!=this._sourceRoot&&(c=f.relative(this._sourceRoot,c)),null!=b?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[f.toSetString(c)]=b):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(c)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},d.prototype.applySourceMap=function(a,b,c){var d=b;if(null==b){if(null==a.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');d=a.file}var e=this._sourceRoot;null!=e&&(d=f.relative(e,d));var h=new g,i=new g;this._mappings.unsortedForEach(function(b){if(b.source===d&&null!=b.originalLine){var g=a.originalPositionFor({line:b.originalLine,column:b.originalColumn});null!=g.source&&(b.source=g.source,null!=c&&(b.source=f.join(c,b.source)),null!=e&&(b.source=f.relative(e,b.source)),b.originalLine=g.line,b.originalColumn=g.column,null!=g.name&&(b.name=g.name))}var j=b.source;null==j||h.has(j)||h.add(j);var k=b.name;null==k||i.has(k)||i.add(k)},this),this._sources=h,this._names=i,a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&(null!=c&&(b=f.join(c,b)),null!=e&&(b=f.relative(e,b)),this.setSourceContent(b,d))},this)},d.prototype._validateMapping=function(a,b,c,d){if((!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0)||b||c||d)&&!(a&&"line"in a&&"column"in a&&b&&"line"in b&&"column"in b&&a.line>0&&a.column>=0&&b.line>0&&b.column>=0&&c))throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:b,name:d}))},d.prototype._serializeMappings=function(){for(var a,b=0,c=1,d=0,g=0,h=0,i=0,j="",k=this._mappings.toArray(),l=0,m=k.length;m>l;l++){if(a=k[l],a.generatedLine!==c)for(b=0;a.generatedLine!==c;)j+=";",c++;else if(l>0){if(!f.compareByGeneratedPositionsInflated(a,k[l-1]))continue;j+=","}j+=e.encode(a.generatedColumn-b),b=a.generatedColumn,null!=a.source&&(j+=e.encode(this._sources.indexOf(a.source)-i),i=this._sources.indexOf(a.source),j+=e.encode(a.originalLine-1-g),g=a.originalLine-1,j+=e.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(j+=e.encode(this._names.indexOf(a.name)-h),h=this._names.indexOf(a.name)))}return j},d.prototype._generateSourcesContent=function(a,b){return a.map(function(a){
if(!this._sourcesContents)return null;null!=b&&(a=f.relative(b,a));var c=f.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)},d.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(a.file=this._file),null!=this._sourceRoot&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},d.prototype.toString=function(){return JSON.stringify(this.toJSON())},b.SourceMapGenerator=d})},{"./array-set":149,"./base64-vlq":150,"./mapping-list":153,"./util":158,amdefine:1}],157:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c,d,e){this.children=[],this.sourceContents={},this.line=null==a?null:a,this.column=null==b?null:b,this.source=null==c?null:c,this.name=null==e?null:e,this[i]=!0,null!=d&&this.add(d)}var e=a("./source-map-generator").SourceMapGenerator,f=a("./util"),g=/(\r?\n)/,h=10,i="$$$isSourceNode$$$";d.fromStringWithSourceMap=function(a,b,c){function e(a,b){if(null===a||void 0===a.source)h.add(b);else{var e=c?f.join(c,a.source):a.source;h.add(new d(a.originalLine,a.originalColumn,e,b,a.name))}}var h=new d,i=a.split(g),j=function(){var a=i.shift(),b=i.shift()||"";return a+b},k=1,l=0,m=null;return b.eachMapping(function(a){if(null!==m){if(!(k<a.generatedLine)){var b=i[0],c=b.substr(0,a.generatedColumn-l);return i[0]=b.substr(a.generatedColumn-l),l=a.generatedColumn,e(m,c),void(m=a)}var c="";e(m,j()),k++,l=0}for(;k<a.generatedLine;)h.add(j()),k++;if(l<a.generatedColumn){var b=i[0];h.add(b.substr(0,a.generatedColumn)),i[0]=b.substr(a.generatedColumn),l=a.generatedColumn}m=a},this),i.length>0&&(m&&e(m,j()),h.add(i.join(""))),b.sources.forEach(function(a){var d=b.sourceContentFor(a);null!=d&&(null!=c&&(a=f.join(c,a)),h.setSourceContent(a,d))}),h},d.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(a){this.add(a)},this);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);a&&this.children.push(a)}return this},d.prototype.prepend=function(a){if(Array.isArray(a))for(var b=a.length-1;b>=0;b--)this.prepend(a[b]);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);this.children.unshift(a)}return this},d.prototype.walk=function(a){for(var b,c=0,d=this.children.length;d>c;c++)b=this.children[c],b[i]?b.walk(a):""!==b&&a(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(a){var b,c,d=this.children.length;if(d>0){for(b=[],c=0;d-1>c;c++)b.push(this.children[c]),b.push(a);b.push(this.children[c]),this.children=b}return this},d.prototype.replaceRight=function(a,b){var c=this.children[this.children.length-1];return c[i]?c.replaceRight(a,b):"string"==typeof c?this.children[this.children.length-1]=c.replace(a,b):this.children.push("".replace(a,b)),this},d.prototype.setSourceContent=function(a,b){this.sourceContents[f.toSetString(a)]=b},d.prototype.walkSourceContents=function(a){for(var b=0,c=this.children.length;c>b;b++)this.children[b][i]&&this.children[b].walkSourceContents(a);for(var d=Object.keys(this.sourceContents),b=0,c=d.length;c>b;b++)a(f.fromSetString(d[b]),this.sourceContents[d[b]])},d.prototype.toString=function(){var a="";return this.walk(function(b){a+=b}),a},d.prototype.toStringWithSourceMap=function(a){var b={code:"",line:1,column:0},c=new e(a),d=!1,f=null,g=null,i=null,j=null;return this.walk(function(a,e){b.code+=a,null!==e.source&&null!==e.line&&null!==e.column?((f!==e.source||g!==e.line||i!==e.column||j!==e.name)&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name}),f=e.source,g=e.line,i=e.column,j=e.name,d=!0):d&&(c.addMapping({generated:{line:b.line,column:b.column}}),f=null,d=!1);for(var k=0,l=a.length;l>k;k++)a.charCodeAt(k)===h?(b.line++,b.column=0,k+1===l?(f=null,d=!1):d&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name})):b.column++}),this.walkSourceContents(function(a,b){c.setSourceContent(a,b)}),{code:b.code,map:c}},b.SourceNode=d})},{"./source-map-generator":156,"./util":158,amdefine:1}],158:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){if(b in a)return a[b];if(3===arguments.length)return c;throw new Error('"'+b+'" is a required argument.')}function e(a){var b=a.match(p);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function f(a){var b="";return a.scheme&&(b+=a.scheme+":"),b+="//",a.auth&&(b+=a.auth+"@"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),b}function g(a){var b=a,c=e(a);if(c){if(!c.path)return a;b=c.path}for(var d,g="/"===b.charAt(0),h=b.split(/\/+/),i=0,j=h.length-1;j>=0;j--)d=h[j],"."===d?h.splice(j,1):".."===d?i++:i>0&&(""===d?(h.splice(j+1,i),i=0):(h.splice(j,2),i--));return b=h.join("/"),""===b&&(b=g?"/":"."),c?(c.path=b,f(c)):b}function h(a,b){""===a&&(a="."),""===b&&(b=".");var c=e(b),d=e(a);if(d&&(a=d.path||"/"),c&&!c.scheme)return d&&(c.scheme=d.scheme),f(c);if(c||b.match(q))return b;if(d&&!d.host&&!d.path)return d.host=b,f(d);var h="/"===b.charAt(0)?b:g(a.replace(/\/+$/,"")+"/"+b);return d?(d.path=h,f(d)):h}function i(a,b){""===a&&(a="."),a=a.replace(/\/$/,"");for(var c=0;0!==b.indexOf(a+"/");){var d=a.lastIndexOf("/");if(0>d)return b;if(a=a.slice(0,d),a.match(/^([^\/]+:\/)?\/*$/))return b;++c}return Array(c+1).join("../")+b.substr(a.length+1)}function j(a){return"$"+a}function k(a){return a.substr(1)}function l(a,b,c){var d=a.source-b.source;return 0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d||c?d:(d=a.generatedColumn-b.generatedColumn,0!==d?d:(d=a.generatedLine-b.generatedLine,0!==d?d:a.name-b.name))))}function m(a,b,c){var d=a.generatedLine-b.generatedLine;return 0!==d?d:(d=a.generatedColumn-b.generatedColumn,0!==d||c?d:(d=a.source-b.source,0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d?d:a.name-b.name))))}function n(a,b){return a===b?0:a>b?1:-1}function o(a,b){var c=a.generatedLine-b.generatedLine;return 0!==c?c:(c=a.generatedColumn-b.generatedColumn,0!==c?c:(c=n(a.source,b.source),0!==c?c:(c=a.originalLine-b.originalLine,0!==c?c:(c=a.originalColumn-b.originalColumn,0!==c?c:n(a.name,b.name)))))}b.getArg=d;var p=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,q=/^data:.+\,.+$/;b.urlParse=e,b.urlGenerate=f,b.normalize=g,b.join=h,b.relative=i,b.toSetString=j,b.fromSetString=k,b.compareByOriginalPositions=l,b.compareByGeneratedPositionsDeflated=m,b.compareByGeneratedPositionsInflated=o})},{amdefine:1}],159:[function(a,b,c){function d(a,b){if(f)return f.call(a,b);for(var c=a.parentNode.querySelectorAll(b),d=0;d<c.length;++d)if(c[d]==a)return!0;return!1}var e=Element.prototype,f=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;b.exports=d},{}],160:[function(a,b,c){function d(a){function b(){return!a.apply(this,arguments)}return b}b.exports=d},{}],161:[function(a,b,c){function d(a){function b(b){return b?(c.push(b),function(){c.splice(c.indexOf(b),1)}):a}var c=[];return a=void 0===a?null:a,b.set=function(b){a=b,c.forEach(function(a){a(b)})},b}b.exports=d},{}],162:[function(a,b,c){"use strict";function d(a){var b=new h.EventEmitter,c=!1,d=function(a){return void 0===a?c:(c=a,void f())},e=function(){c=!c,f()},f=function(){return b.emit("change",{buttonName:a,state:c})};return _.extend(b,{name:a,value:d,toggle:e,propagate:f})}function e(a,b){b.map(f).forEach(function(b){return a.emit("change",b)})}function f(a){return{buttonName:a.name,state:a.value()}}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("events"),i=a("./reduce2hash"),j=g(i),k=["view","term","relation","simple","boundary-detection","negation","replicate-auto","speculation"];c["default"]=function(){var a=new h.EventEmitter,b=k.map(d),c=function(){return e(a,b)},f=b.reduce((0,j["default"])(),{});return f["boundary-detection"].value(!0),b.forEach(function(b){b.on("change",function(b){return a.emit("change",b)})}),_.extend(a,f,{propagate:c})},b.exports=c["default"]},{"./reduce2hash":164,"babel-runtime/helpers/interop-require-default":18,events:110}],163:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("events"),f=a("./ModeAccordingToButton"),g=d(f),h=function(){var a={},b=function(b,c){a[b]=c},c=new e.EventEmitter,d=function(){c.emit("change",a)};return _.extend(c,{set:b,propagate:d})},i=function(a,b,c){var d=a.selectionModel,e=function(a){return _.isFunction(a)?a():d[a].some()},f=function(){for(var a=0;a<arguments.length;a++)if(!e(arguments[a]))return!1;return!0},g=function(){for(var a=0;a<arguments.length;a++)if(e(arguments[a]))return!0;return!1},h=function(){return c.clipBoard.length>0},i=_.partial(g,"span","entity"),j=_.partial(g,"entity","relation"),k={replicate:function(){return Boolean(d.span.single())},entity:d.span.some,"delete":d.some,copy:i,paste:_.partial(f,h,"span"),pallet:j,"change-label":j,negation:j,speculation:j};return function(a){a.forEach(function(a){b.set(a,k[a]())})}},j=function(a,b){var c=function(a,b){return b.length>0&&_.every(b,function(b){return _.contains(b,a)})},d=function(a,d){b[a.toLowerCase()].value(c(a,d))};return function(b){var c=b.all().map(function(b){return a.annotationData.getModificationOf(b).map(function(a){return a.pred})});d("Negation",c),d("Speculation",c)}},k=function(a,b,c,d,e){var f=["delete"],g=f.concat(["replicate","entity","copy","paste"]),h=f.concat(["pallet","change-label","negation","speculation"]),i=h.concat(["copy"]),j=_.compose(b.propagate,c.propagate),k=_.partial(_.compose,j);return{propagate:j,enabled:k(c.set),updateBySpan:k(_.partial(d,g)),updateByEntity:_.compose(j,_.partial(e,a.selectionModel.entity),_.partial(d,i)),updateByRelation:_.compose(j,_.partial(e,a.selectionModel.relation),_.partial(d,h))}};b.exports=function(a,b,c){var d=new g["default"],e=new h,f=new i(b,e,c),l=new j(b,d),m=new k(b,d,e,f,l);return d.on("change",function(b){a.eventEmitter.emit("textae.control.button.push",b)}),e.on("change",function(b){a.eventEmitter.emit("textae.control.buttons.change",b)}),{modeAccordingToButton:d,buttonStateHelper:m}}},{"./ModeAccordingToButton":162,"babel-runtime/helpers/interop-require-default":18,events:110}],164:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(){var a=arguments.length<=0||void 0===arguments[0]?"name":arguments[0];return function(b,c){return b[c[a]]=c,b}},b.exports=c["default"]},{}],165:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("observ"),f=d(e);c["default"]=function(){var a=!1,b=new f["default"](!1);return b.forceModified=function(c){b.set(c),a=c},b.update=function(c){b.set(a||c)},b},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,observ:161}],166:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("babel-runtime/helpers/interop-require-wildcard")["default"],f=a("url"),g=d(f),h=a("events"),i=a("../util/ajaxAccessor"),j=e(i),k=a("../util/CursorChanger"),l=d(k),m=a("./dialog/GetEditorDialog"),n=d(m),o=a("./jQuerySugar"),p=d(o),q=function(a,b,c){a.on(b,c)},r=function(a){return q(a,"dialog.close",function(){a.close()}),a};b.exports=function(a,b){var c="",d=new l["default"](a),e=function(a){d.startWait(),j.getAsync(a,function(b){i.emit("load",{annotation:b,source:p["default"].toLink(g["default"].resolve(location.href,a))}),c=a},function(){d.endWait(),toastr.error("Could not load the target.")})},f=function(){var f=function(a){return a.openAndSetParam||(a.openAndSetParam=_.compose(a.open.bind(a),function(b){this.find('[type="text"].url').val(c).trigger("input"),a.params=b})),a},g=_.compose(f,r,new n["default"](a)),h={URL:"URL",LOCAL:"Local"},k=function(a){var c=function(a){var b=a.files[0],c=new FileReader;c.onload=function(){var a=JSON.parse(this.result);i.emit("load",{annotation:a,source:b.name+"(local file)"})},c.readAsText(b)},d=_.partial(p["default"].Div,"textae-editor__load-dialog__row"),f=_.partial(p["default"].Label,"textae-editor__load-dialog__label"),j=_.partial(p["default"].Button,"Open"),k=function(){return!o.params||window.confirm(b)},l=new j("url"),m=new j("local"),n=$("<div>").append((new d).append(new f(h.URL),$('<input type="text" class="textae-editor__load-dialog__file-name url" />'),l)).on("input",'[type="text"].url',function(){p["default"].enabled(l,this.value)}).on("click",'[type="button"].url',function(){k()&&e(p["default"].getValueFromText(n,"url")),n.trigger("dialog.close")}).append((new d).append(new f(h.LOCAL),$('<input class="textae-editor__load-dialog__file" type="file" />'),m)).on("change",'[type="file"]',function(){p["default"].enabled(m,this.files.length>0)}).on("click",'[type="button"].local',function(){k()&&c(n.find('[type="file"]')[0]),n.trigger("dialog.close")}),o=g("textae.dialog.load","Load Annotations",n);return o},l=function(a){var b=function(){i.emit("save"),d.endWait()},c=function(){i.emit("save error"),d.endWait()},e=function(a,e){d.startWait(),j.post(a,e,b,c,function(){d.endWait()})},f=function(a){var b=new Blob([a],{type:"application/json"});return URL.createObjectURL(b)},l=function(){var b=k(a).find("input[type='file']"),c=b.prop("files")[0];return c?c.name:"annotations.json"},m=_.partial(p["default"].Div,"textae-editor__save-dialog__row"),n=_.partial(p["default"].Label,"textae-editor__save-dialog__label"),o=new p["default"].Button("Save","url"),q=$("<div>").append((new m).append(new n(h.URL),$('<input type="text" class="textae-editor__save-dialog__server-file-name url" />'),o)).on("input","input.url",function(){p["default"].enabled(o,this.value)}).on("click",'[type="button"].url',function(){e(p["default"].getValueFromText(q,"url"),r.params),q.trigger("dialog.close")}).append((new m).append(new n(h.LOCAL),$('<input type="text" class="textae-editor__save-dialog__local-file-name local">'),$('<a class="download" href="#">Download</a>'))).on("click","a.download",function(){var a=f(r.params);$(this).attr("href",a).attr("download",p["default"].getValueFromText(q,"local")),i.emit("save"),q.trigger("dialog.close")}).append((new m).append(new n,$('<a class="viewsource" href="#">Click to see the json source in a new window.</a>'))).on("click","a.viewsource",function(a){var b=f(r.params);return window.open(b,"_blank"),i.emit("save"),q.trigger("dialog.close"),!1}),r=g("textae.dialog.save","Save Annotations",q);return r.on("dialogopen",function(){var a=l();r.find('[type="text"].local').val(a)}),r};return{showLoad:function(a,b){k(a).openAndSetParam(b)},showSave:function(a,b){l(a).openAndSetParam(b)}}}(),i=_.extend(new h.EventEmitter,{getAnnotationFromServer:e,showAccess:_.partial(f.showLoad,a.editorId),showSave:_.partial(f.showSave,a.editorId)});return i}},{"../util/CursorChanger":406,"../util/ajaxAccessor":407,"./dialog/GetEditorDialog":182,"./jQuerySugar":192,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,events:110,url:117}],167:[function(a,b,c){"use strict";var d=a("./dialog/GetToolDialog");b.exports=function(){var a=new d("textae-control__help","Help (Keyboard short-cuts)",{height:313,width:523},$("<div>").addClass("textae-tool__key-help"));return a.open}},{"./dialog/GetToolDialog":183}],168:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("delegate"),f=d(e);c["default"]=function(a,b){var c=document.createElement("div");return c.classList.add("textae-editor__type-pallet"),c.style.display="none",c.appendChild(document.createElement("table")),(0,f["default"])(c,".textae-editor__type-pallet__entity-type__label","click",function(b){c.style.display="none",a(b.delegateTarget.id)}),(0,f["default"])(c,".textae-editor__type-pallet__entity-type__radio","change",function(a){c.style.display="none",b(a.delegateTarget.id)}),c},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,delegate:107}],169:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Component"),f=d(e),g=a("./updateDisplay"),h=d(g);c["default"]=function(a,b){var c=new f["default"](a,b);$(c);return document.body.appendChild(c),{show:function(a,b){return(0,h["default"])(c,a,b)},hide:function(){return c.style.display="none"}}},b.exports=c["default"]},{"./Component":168,"./updateDisplay":171,"babel-runtime/helpers/interop-require-default":18}],170:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("handlebars"),f=d(e),g='\n{{#each this}}\n<tr class="textae-editor__type-pallet__entity-type" style="background-color: {{color}};">\n  <td>\n    <input class="textae-editor__type-pallet__entity-type__radio" type="radio" name="etype" id="{{id}}" {{#if defaultType}}title="default type" checked="checked"{{/if}}>\n  </td>\n  <td class="textae-editor__type-pallet__entity-type__label" id="{{id}}">\n    <span title={{id}}>\n      {{id}}\n    </span>\n  </td>\n  <td>\n    {{label}}\n  </td>\n  <td>\n    {{#if uri}}\n    <a href="{{uri}}" target="_blank"><span class="textae-editor__type-pallet__link"></span></a>\n    {{/if}}\n  </td>\n</tr>\n{{/each}}\n',h=f["default"].compile(g);c["default"]=function(a){var b=a.getSortedIds().map(function(b){return{id:b,label:a.getLabel(b),defaultType:b===a.getDefaultType(),uri:a.getUri(b),color:a.getColor(b)}});return h(b)},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,handlebars:147}],171:[function(a,b,c){"use strict";function d(a){a.querySelector("table").innerHTML="",a.style.height=""}function e(a,b){a.querySelector("table").innerHTML=(0,k["default"])(b)}function f(a){a.style.display="block"}function g(a){window.innerHeight-2<=a.offsetHeight&&(a.style.height=window.innerHeight-2+"px")}function h(a,b){a.offsetHeight+b.top>window.innerHeight&&(b.top=window.innerHeight-a.offsetHeight-1),a.style.top=b.top+"px",a.style.left=b.left+"px"}var i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("./toRows"),k=i(j);c["default"]=function(a,b,c){b&&b.getSortedIds().length>0&&(d(a),e(a,b),f(a),g(a),h(a,c))},b.exports=c["default"]},{"./toRows":170,"babel-runtime/helpers/interop-require-default":18}],172:[function(a,b,c){"use strict";function d(a,b,c){e(a,b,c),f(a,b)}function e(a,b,c){var d=h(function(d){c.changeTypeGap(d.target.value),(0,n["default"])(b,a)});return a.on("change",".type-gap",d)}function f(a,b){var c=h(function(a){l.set(b[0],a.target.value),g()});return a.on("change",".line-height",c)}function g(){$(window).trigger("resize")}function h(a){return _.debounce(a,300)}var i=a("babel-runtime/helpers/interop-require-wildcard")["default"],j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("../../editor/start/View/lineHeight"),l=i(k),m=a("./updateLineHeight"),n=j(m),o=a("./updateTypeGapEnable"),p=(j(o),a("./updateTypeGapValue")),q=(j(p),'\n    <div class="textae-editor__setting-dialog">\n        <div>\n            <label class="textae-editor__setting-dialog__label">Type Gap</label>\n            <input type="number" class="textae-editor__setting-dialog__type-gap type-gap" step="1" min="0" max="5">\n        </div>\n        <div>\n            <label class="textae-editor__setting-dialog__label">Line Height</label>\n            <input type="number" class="textae-editor__setting-dialog__line-height line-height" step="1" min="50" max="500">\n            px\n        </div>\n    </div>\n');c["default"]=function(a,b){var c=$(q);return d(c,a,b),c},b.exports=c["default"]},{"../../editor/start/View/lineHeight":387,"./updateLineHeight":175,"./updateTypeGapEnable":176,"./updateTypeGapValue":177,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],173:[function(a,b,c){"use strict";function d(a,b){return new g["default"](b)("textae.dialog.setting","Setting",a,{noCancelButton:!0})}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../dialog/GetEditorDialog"),g=e(f),h=a("./create"),i=e(h),j=a("./update"),k=e(j);c["default"]=function(a,b){var c=(0,i["default"])(a,b),e=d(c,a);return function(){return(0,k["default"])(e,a,b),e.open()}},b.exports=c["default"]},{"../dialog/GetEditorDialog":182,"./create":172,"./update":174,"babel-runtime/helpers/interop-require-default":18}],174:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./updateLineHeight"),f=d(e),g=a("./updateTypeGapEnable"),h=d(g),i=a("./updateTypeGapValue"),j=d(i);c["default"]=function(a,b,c){(0,h["default"])(c,a),(0,j["default"])(c,a),(0,f["default"])(b,a)},b.exports=c["default"]},{"./updateLineHeight":175,"./updateTypeGapEnable":176,"./updateTypeGapValue":177,"babel-runtime/helpers/interop-require-default":18}],175:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../editor/start/View/lineHeight"),g=d(f),h=a("../jQuerySugar"),i=e(h);c["default"]=function(a,b){return i["default"].setValue(b,".line-height",g.get(a[0]))},b.exports=c["default"]},{"../../editor/start/View/lineHeight":387,"../jQuerySugar":192,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],176:[function(a,b,c){"use strict";function d(a){return a.find(".type-gap")}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../jQuerySugar"),g=e(f);c["default"]=function(a,b){return g["default"].enabled(d(b),a.showInstance()),b},b.exports=c["default"]},{"../jQuerySugar":192,"babel-runtime/helpers/interop-require-default":18}],177:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../jQuerySugar"),f=d(e);c["default"]=function(a,b){return f["default"].setValue(b,".type-gap",a.getTypeGap)},b.exports=c["default"]},{"../jQuerySugar":192,"babel-runtime/helpers/interop-require-default":18}],178:[function(a,b,c){"use strict";var d=function(a){var b=a.find(".textae-editor__footer .textae-editor__footer__message");if(0===b.length){b=$("<div>").addClass("textae-editor__footer__message");var c=$("<div>").addClass("textae-editor__footer").append(b);a.append(c)}return b};b.exports=function(a){var b=_.partial(d,a),c=function(a){""!==a&&b().html("Source: "+a)};return{status:c}}},{}],179:[function(a,b,c){"use strict";var d=function(a,b,c){return $("<div>").attr("id",a).attr("title",b).hide().append(c)},e=function(a,b){return{open:function(){a.dialog(b)},close:function(){a.dialog("close")}}},f=function(a,b){return _.extend(b,new e(b,a))},g=function(a){return $("body").append(a),a};b.exports=function(a,b,c,e){a=_.extend({resizable:!1,modal:!0},a);var h=_.partial(f,a),i=_.compose(g,h,d);return i(b,c,e)}},{}],180:[function(a,b,c){"use strict";function d(a){var b=f({},j,a);return b.noCancelButton||(b.buttons=f({},b.buttons,{Cancel:function(){$(this).dialog("close")}})),b}function e(a,b){return a+"."+b}var f=a("babel-runtime/core-js/object/assign")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./Dialog"),i=g(h),j={width:550,height:220};c["default"]=function(a,b,c,g,h){var j=d(h),k=new i["default"](j,e(a,b),c,g);return f(k,{id:b})},b.exports=c["default"]},{"./Dialog":179,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],181:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/to-consumable-array")["default"],e=function(a,b){return a[b]},f=function(a,b,c){return a[b]=c,c};b.exports=function(a){var b={},c=_.partial(e,b),g=_.partial(f,b),h=function(a,b){var c=a.apply(void 0,d(b));return g(c.id,c)};return function(b,d,e,f){return c(b)||h(a,arguments)}}},{"babel-runtime/helpers/to-consumable-array":21}],182:[function(a,b,c){"use strict";var d=a("./EditorDialog"),e=a("./FunctionUseCache");b.exports=function(a){return a.getDialog=a.getDialog||new e(_.partial(d,a.editorId)),a.getDialog}},{"./EditorDialog":180,"./FunctionUseCache":181}],183:[function(a,b,c){"use strict";var d=a("./ToolDialog"),e=a("./FunctionUseCache");b.exports=new e(d)},{"./FunctionUseCache":181,"./ToolDialog":184}],184:[function(a,b,c){"use strict";var d=a("./Dialog");b.exports=function(a,b,c,e){var f=new d(c,a,b,e);return _.extend(f,{id:a})}},{"./Dialog":179}],185:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="textae-editor__edit-id-dialog__id";c["default"]=d,b.exports=c["default"]},{}],186:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("delegate"),f=d(e),g=a("../dialog/GetEditorDialog"),h=d(g),i=a("./className"),j=d(i);c["default"]=function(a,b,c,d){var e=function(){g.done(c.value,d.innerText),g.close()},g=new h["default"](a)("textae.dialog.edit-id","Please enter new id",b,{noCancelButton:!0,buttons:{OK:e},height:200});return(0,f["default"])(g[0],"."+j["default"],"keyup",function(a){13===a.keyCode&&e()}),g},b.exports=c["default"]},{"../dialog/GetEditorDialog":182,"./className":185,"babel-runtime/helpers/interop-require-default":18,delegate:107}],187:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./template"),f=d(e),g=a("./create"),h=d(g),i=a("./update"),j=d(i),k=$(f["default"]),l=k[0].querySelector("span"),m=k[2].querySelector("input"),n=void 0;c["default"]=function(a,b,c,d,e){n||(n=(0,h["default"])(a,k,m,l)),(0,j["default"])(n,m,l,c,e,d,b),n.open()},b.exports=c["default"]},{"./create":186,"./template":189,"./update":190,"babel-runtime/helpers/interop-require-default":18}],188:[function(a,b,c){"use strict";function d(a,b){return a.getDefinedTypes().filter(function(a){return a.label}).filter(function(a){return a.label.includes(b)}).map(function(a){return{label:a.label+"@"+a.id,raw:a}})}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,e){var f=d(a,c.term);return b?void $.getJSON(b,c,function(a,b,c){var d=a.filter(function(a){return 0===f.filter(function(b){return a.id===b.raw.id}).length}).map(function(a){return{label:a.label+"@"+a.id,raw:a}});e(f.concat(d))}):void e(f)},b.exports=c["default"]},{}],189:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./className"),f=d(e),g='\n<div>\n  label: <span></span>\n</div>\n<div>\n  <input type="text" class="'+f["default"]+'"></input>\n</div>';c["default"]=g,b.exports=c["default"]},{"./className":185,"babel-runtime/helpers/interop-require-default":18}],190:[function(a,b,c){"use strict";function d(a,b,c){return a.value=c.item.raw.id,b.innerText=c.item.raw.label,!1}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./source"),g=e(f);c["default"]=function(a,b,c,e,f,h,i){$(b).autocomplete({source:function(a,b){c.innerText="",(0,g["default"])(e,f,a,b)},minLength:2,select:function(a,e){return d(b,c,e)}}),a.done=h,b.value=i,e.getLabel(i)?c.innerText=e.getLabel(i):c.innerText=""},b.exports=c["default"]},{"./source":188,"babel-runtime/helpers/interop-require-default":18}],191:[function(a,b,c){"use strict";b.exports=function(a,b){b?a.removeAttr("disabled"):a.attr("disabled","disabled")}},{}],192:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./jQueryEnabled"),f=d(e),g=function(a,b,c,d){var e={};return e[a]=d,b.find(c).prop(e).end()};b.exports={enabled:f["default"],Div:function(a){return $("<div>").addClass(a)},Label:function(a,b){return $("<label>").addClass(a).text(b)},Button:function(a,b){return $('<input type="button" disabled="disabled" />').addClass(b).val(a)},Checkbox:function(a){return $('<input type="checkbox"/>').addClass(a)},Number:function(a){return $('<input type="number"/>').addClass(a)},toLink:function(a){return'<a href="'+a+'">'+a+"</a>"},getValueFromText:function(a,b){return a.find('[type="text"].'+b).val()},setChecked:_.partial(g,"checked"),setValue:_.partial(g,"value")}},{"./jQueryEnabled":191,"babel-runtime/helpers/interop-require-default":18}],193:[function(a,b,c){"use strict";function d(a,b){return a.innerHTML="",b.map(e).map(n).forEach(function(b,c){1===c&&a.insertAdjacentHTML("beforeend",m),a.insertAdjacentHTML("beforeend",b)}),a}function e(a){return a.referencedItems=a.relationObj.map(function(a){return a.alertObj=!0,a}).concat(a.relationSubj.map(function(a){return a.alertSubj=!0,a})).concat(a.modification.map(function(a){return a.subj="-",a.alertObj=!0,a})),a}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("handlebars"),h=f(g),i=a("../editor/Model/AnnotationData/parseAnnotation/validateAnnotation"),j=a("./dialog/GetEditorDialog"),k=f(j),l='\n    <div class="textae-editor__valiondate-dialog__content">\n        <h2>{{name}}</h2>\n        {{#if denotationHasLength}}\n            <table>\n                <caption>Wrong range.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationHasLength}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationHasLength}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if denotationInText}}\n            <table>\n                <caption>Out of text.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationInText}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationInText}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if denotationIsNotCrossing}}\n            <table>\n                <caption>Spans with boundary-cross.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationIsNotCrossing}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationIsNotCrossing}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if denotationInParagraph}}\n            <table>\n                <caption>Spans across paragraphs (newline-delimited).</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="range">begin</th>\n                        <th class="range">end</th>\n                        <th>obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#denotationInParagraph}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td class="alert">{{span.begin}}</td>\n                        <td class="alert">{{span.end}}</td>\n                        <td>{{obj}}</td>\n                    </tr>\n                    {{/denotationInParagraph}}\n                </tbody>\n            </table>\n        {{/if}}\n        {{#if referencedItems}}\n            <table>\n                <caption>Referenced items do not exist.</caption>\n                <thead>\n                    <tr>\n                        <th class="id">id</th>\n                        <th class="referencedItem">subj</th>\n                        <th>pred</th>\n                        <th class="referencedItem">obj</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#referencedItems}}\n                    <tr>\n                        <td>{{id}}</td>\n                        <td{{#if alertSubj}} class="alert"{{/if}}>{{subj}}</td>\n                        <td>{{pred}}</td>\n                        <td{{#if alertObj}} class="alert"{{/if}}>{{obj}}</td>\n                    </tr>\n                    {{/referencedItems}}\n                </tbody>\n            </table>\n        {{/if}}\n    </div>',m='\n        <div class="textae-editor__valiondate-dialog__content">\n            <h1>Track annatations will be merged to the root anntations.</h1>\n        </div>',n=h["default"].compile(l);
c["default"]=function(a,b){if((0,i.hasError)(b)){var c=new k["default"](a)("textae.dialog.validation","The following erroneous annotations ignored",$("<div>"),{noCancelButton:!0,height:450});d(c[0].firstChild,b),c.open()}},b.exports=c["default"]},{"../editor/Model/AnnotationData/parseAnnotation/validateAnnotation":221,"./dialog/GetEditorDialog":182,"babel-runtime/helpers/interop-require-default":18,handlebars:147}],194:[function(a,b,c){b.exports={buttonGroup:[{list:[{type:"read",title:"Import [I]"},{type:"write",title:"Upload [U]"}]},{list:[{type:"view",title:"View Mode"},{type:"term",title:"Term Edit Mode"},{type:"relation",title:"Relation Edit Mode"}]},{list:[{type:"simple",title:"Simple View"},{type:"line-height",title:"Adjust LineHeight"}]},{list:[{type:"undo",title:"Undo [Z]"},{type:"redo",title:"Redo [A]"}]},{list:[{type:"replicate",title:"Replicate span annotation [R]"},{type:"replicate-auto",title:"Auto replicate"},{type:"boundary-detection",title:"Boundary Detection [B]"}]},{list:[{type:"entity",title:"New entity [E]"},{type:"pallet",title:"Select label [Q]"},{type:"change-label",title:"Change label [W]"}]},{list:[{type:"negation",title:"Negation [X]"},{type:"speculation",title:"Speculation [S]"}]},{list:[{type:"delete",title:"Delete [D]"},{type:"copy",title:"Copy [C]"},{type:"paste",title:"Paste [V]"}]},{list:[{type:"setting",title:"Setting"}]},{list:[{type:"help",title:"Help [H]"}]}]}},{}],195:[function(a,b,c){"use strict";function d(a,b){h(a,b).removeClass("textae-control__icon--disabled")}function e(a,b){h(a,b).addClass("textae-control__icon--disabled")}function f(a,b){h(a,b).addClass("textae-control__icon--pushed")}function g(a,b){h(a,b).removeClass("textae-control__icon--pushed")}function h(a,b){return a.find((0,k["default"])(b))}var i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.enable=d,c.disable=e,c.push=f,c.unpush=g;var j=a("./toButtonClass"),k=i(j)},{"./toButtonClass":198,"babel-runtime/helpers/interop-require-default":18}],196:[function(a,b,c){"use strict";function d(a,b,c){var d=_.extend({},b,r,c);(0,q["default"])(a,b,d)}function e(a,b,c){c?o.push(a,b):o.unpush(a,b)}var f=a("babel-runtime/helpers/interop-require-default")["default"],g=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./buttonMap"),i=f(h),j=a("./makeButtons"),k=f(j),l=a("./toButtonList"),m=f(l),n=a("./iconCssUtil"),o=g(n),p=a("./updateButtons"),q=f(p),r={read:!0,help:!0};c["default"]=function(a){var b=(0,m["default"])(i["default"]);return(0,k["default"])(a,i["default"]),a.updateAllButtonEnableState=function(c){return d(a,b,c)},a.updateButtonPushState=function(b,c){return e(a,b,c)},a},b.exports=c["default"]},{"./buttonMap":194,"./iconCssUtil":195,"./makeButtons":197,"./toButtonList":199,"./updateButtons":200,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],197:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("handlebars"),f=d(e),g='\n    <span class="textae-control__title">\n        <a href="http://textae.pubannotation.org/" target="_blank">TextAE</a>\n    </span>\n    {{#buttonGroup}}\n    <span class="textae-control__separator"></span>\n        {{#list}}\n    <span class="textae-control__icon textae-control__{{type}}-button" title="{{title}}"></span>\n        {{/list}}\n    {{/buttonGroup}}\n    ',h=f["default"].compile(g);c["default"]=function(a,b){a[0].innerHTML=h(b)},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,handlebars:147}],198:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return".textae-control__"+a+"-button"},b.exports=c["default"]},{}],199:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.buttonGroup.reduce(function(a,b){return b.list.reduce(function(a,b){return a[b.type]=1,a},a)},{})},b.exports=c["default"]},{}],200:[function(a,b,c){"use strict";function d(a,b){var c=function(){return a.trigger("textae.control.button.click","textae.control.button."+b.replace(/-/g,"_")+".click"),!1};a.off(n,(0,m["default"])(b)).on(n,(0,m["default"])(b),c),k.enable(a,b)}function e(a,b){a.off(n,(0,m["default"])(b)),k.disable(a,b)}function f(a,b,c){c===!0?d(a,b):e(a,b)}var g=a("babel-runtime/core-js/object/keys")["default"],h=a("babel-runtime/helpers/interop-require-wildcard")["default"],i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("./iconCssUtil"),k=h(j),l=a("./toButtonClass"),m=i(l),n="click";c["default"]=function(a,b,c){g(c).filter(function(a){return b[a]}).forEach(function(b){return f(a,b,c[b])})},b.exports=c["default"]},{"./iconCssUtil":195,"./toButtonClass":198,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],201:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("events");c["default"]=function(){var a=-1,b=-1,c=[],e=function(){return b>-1},f=function(){return b<c.length-1},g=function(){return b!==a},h=new d.EventEmitter,i=function(){h.emit("change",{hasAnythingToSave:g(),hasAnythingToUndo:e(),hasAnythingToRedo:f()})};return _.extend(h,{reset:function(){a=-1,b=-1,c=[],i()},push:function(a){c.splice(b+1,c.length-b,a),b++,i()},next:function(){return b++,i(),c[b]},prev:function(){var a=c[b];return b--,i(),a},saved:function(){a=b,i()},hasAnythingToSave:g,hasAnythingToUndo:e,hasAnythingToRedo:f})},b.exports=c["default"]},{events:110}],202:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../../../idFactory"),f=d(e),g=a("./ModelContainer"),h=d(g),i=function(a,b){return{id:b.id,span:f["default"].makeSpanId(a,b.span),type:b.obj}},j=function(a,b){return b=b||[],b.map(_.partial(i,a))},k=function(a,b,c){var d=new h["default"](b,"entity",_.partial(j,a),"T"),e=_.compose(d.add,function(a){if(a.span)return a;throw new Error("entity has no span! "+JSON.stringify(a))}),f=function(a){return c.all().filter(function(b){return b.obj===a||b.subj===a}).map(function(a){return a.id})},g=_.extend(d,{add:e,assosicatedRelations:f});return g};b.exports=k},{"../../../idFactory":236,"./ModelContainer":203,"babel-runtime/helpers/interop-require-default":18}],203:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/keys")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"],f=a("./getNextId"),g=e(f),h='Set the mappingFunction by the constructor to use the method "ModelContainer.setSource".';b.exports=function(a,b,c,e){var f={},i=function(){return d(f)},j=_.partial(g["default"],e?e:b.charAt(0).toUpperCase()),k=function(a){return a.id=a.id||j(i()),f[a.id]=a,a},l=function(a){a&&(a.sort(function(a,b){return a.id?b.id?a.id<b.id?-1:a.id>b.id?1:0:-1:1}),a.forEach(k))},m=function(a){return f[a]},n=function(){return _.map(f,_.identity)},o=function(){f={}};return{name:b,addSource:function(a){if(!_.isFunction(c))throw new Error(h);l(c(a))},add:function(c,d){var e=k(c);return _.isFunction(d)&&d(),a.emit(b+".add",e),e},get:m,all:n,some:function(){return _.some(f)},types:function(){return n().map(function(a){return a.type})},changeType:function(c,d){var e=m(c);return e.type=d,a.emit(b+".change",e),e},remove:function(c){var d=f[c];return d&&(delete f[c],a.emit(b+".remove",d)),d},clear:o}}},{"./getNextId":206,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18}],204:[function(a,b,c){"use strict";var d=a("../../../idFactory"),e=a("./ModelContainer");b.exports=function(a,b){var c=function(b){b=b||[];var c=0;return b.split("\n").map(function(b,e){var f={id:d.makeParagraphId(a,e),begin:c,end:c+b.length,text:b,order:e};return c+=b.length+1,f})},f=new e(b,"paragraph",c),g=f.all,h=_.extend(f,{getBelongingTo:function(a){var b=f.all().filter(function(b){return a.begin>=b.begin&&a.end<=b.end});if(0===b.length)throw new Error("span should belong to any paragraph.");return b[0]},all:function(){var a=g();return a.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),a}});return h}},{"../../../idFactory":236,"./ModelContainer":203}],205:[function(a,b,c){"use strict";function d(a,b,c,d){if(!d)return!1;var e=h["default"].makeSpanId(a,d);if(!b.get(e))throw new Error("maybeParent is removed. "+d.toStringOnlyThis());return d.begin<=c.begin&&c.end<=d.end}function e(a,b){return"span "+a.begin+":"+a.end+":"+b.sourceDoc.substring(a.begin,a.end)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../../idFactory"),h=f(g),i=a("./ModelContainer"),j=f(i),k=a("../parseAnnotation/validateAnnotation");c["default"]=function(a,b,c){var f=function(){var d={toStringOnlyThis:function(){return e(this,b)},toString:function(a){a=a||1;var b=this.children&&this.children.length>0?"\n"+this.children.map(function(b){return new Array(a+1).join("	")+b.toString(a+1)}).join("\n"):"";return this.toStringOnlyThis()+b},getTypes:function(){var a=this.id;return b.entity.all().filter(function(b){return a===b.span}).reduce(function(a,b){var c=h["default"].makeTypeId(b.span,b.type),d=a.filter(function(a){return a.id===c});return d.length>0?d[0].entities.push(b.id):a.push({id:c,name:b.type,entities:[b.id]}),a},[])},getEntities:function(){return _.flatten(this.getTypes().map(function(a){return a.entities}))}};return function(b){return $.extend({},b,{id:h["default"].makeSpanId(a,b),paragraph:c.getBelongingTo(b)},d)}}(),g=function(a){return a=a||[],a.map(function(a){return a.span}).map(f).filter(function(a,b,c){return!(0,k.isBoundaryCrossingWithOtherSpans)(c.slice(0,b-1),a)})},i=new j["default"](b,"span",g),l=[],m=function(a,b){a.children.push(b),b.parent=a},n=function(b,c){for(var e=!0;e;){var f=b,g=c;if(e=!1,d(a,i,g,f))return f;if(!f.parent)return null;b=f.parent,c=g,e=!0}},o=function(){var a=i.all().sort(p),b=[];a.map(function(a,b,c){return $.extend(a,{parent:null,children:[],left:0!==b?c[b-1]:null,right:b!==c.length-1?c[b+1]:null})}).forEach(function(a){if(a.left){var c=n(a.left,a);c?m(c,a):b.push(a)}else b.push(a)}),b.toString=function(){return this.map(function(a){return a.toString()}).join("\n")},l=b},p=function(a,b){return a.begin-b.begin||b.end-a.end},q={add:function(a){if(a)return i.add(f(a),o);throw new Error("span is undefined.")},addSource:function(a){i.addSource(a),o()},get:function(a){return i.get(a)},all:i.all,range:function(a,b){var c=i.get(a),d=i.get(b);if(p(c,d)>0){var e=c;c=d,d=e}return i.all().filter(function(a){return c.begin<=a.begin&&a.end<=d.end}).map(function(a){return a.id})},topLevel:function(){return l},multiEntities:function(){return i.all().filter(function(a){var b=a.getTypes().filter(function(a){return a.entities.length>1});return b.length>0})},remove:function(a){var b=i.remove(a);return o(),b},clear:function(){i.clear(),l=[]}};return q},b.exports=c["default"]},{"../../../idFactory":236,"../parseAnnotation/validateAnnotation":221,"./ModelContainer":203,"babel-runtime/helpers/interop-require-default":18}],206:[function(a,b,c){"use strict";function d(a,b){var c=new RegExp(a+"\\d+$");return c.test(b)}function e(a){return a.slice(1)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=b.filter(function(b){return d(a,b)}).map(e),f=0===c.length?0:Math.max.apply(null,c),g=f+1;return a+g},b.exports=c["default"]},{}],207:[function(a,b,c){"use strict";function d(a){return a.map(function(a){return{id:a.id,type:a.pred,subj:a.subj,obj:a.obj}})}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("events"),g=a("./ModelContainer"),h=e(g),i=a("./ParagraphContainer"),j=e(i),k=a("./SpanContainer"),l=e(k),m=a("./EntityContainer"),n=e(m);c["default"]=function(a){var b=new f.EventEmitter,c=new h["default"](b,"namespace",_.identity),e=new j["default"](a,b),g=new l["default"](a,b,e),i=new h["default"](b,"relation",d),k=new n["default"](a,b,i),m=new h["default"](b,"modification",_.identity);return _.extend(b,{namespace:c,sourceDoc:"",paragraph:e,span:g,entity:k,relation:i,modification:m})},b.exports=c["default"]},{"./EntityContainer":202,"./ModelContainer":203,"./ParagraphContainer":204,"./SpanContainer":205,"babel-runtime/helpers/interop-require-default":18,events:110}],208:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/assign")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./reset"),g=e(f),h=a("./toJson"),i=e(h),j=a("./Container"),k=e(j);c["default"]=function(a){var b=new k["default"](a);return d(b,{reset:function(a){return(0,g["default"])(b,a)},toJson:function(){return(0,i["default"])(b)},getModificationOf:function(a){return b.modification.all().filter(function(b){return b.obj===a})}})},b.exports=c["default"]},{"./Container":207,"./reset":229,"./toJson":231,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],209:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e),g=a("./translateDenotation"),h=d(g);c["default"]=function(a,b,c,d){(0,f["default"])([a,b],function(a){return(0,h["default"])(d,a)},c)},b.exports=c["default"]},{"./importSource":210,"./translateDenotation":215,"babel-runtime/helpers/interop-require-default":18}],210:[function(a,b,c){"use strict";b.exports=function(a,b,c){c&&(c=c.map(b)),a.forEach(function(a){a.addSource(c)})}},{}],211:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e),g=a("./translateModification"),h=d(g);c["default"]=function(a,b,c){(0,f["default"])([a],function(a){return(0,h["default"])(c,a)},b)},b.exports=c["default"]},{"./importSource":210,"./translateModification":216,"babel-runtime/helpers/interop-require-default":18}],212:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e);c["default"]=function(a,b){(0,f["default"])([a],function(a){return _.extend({},a)},b)},b.exports=c["default"]},{"./importSource":210,"babel-runtime/helpers/interop-require-default":18}],213:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./importSource"),f=d(e),g=a("./translateRelation"),h=d(g);c["default"]=function(a,b,c){(0,f["default"])([a],function(a){return(0,h["default"])(c,a)},b)},b.exports=c["default"]},{"./importSource":210,"./translateRelation":217,"babel-runtime/helpers/interop-require-default":18}],214:[function(a,b,c){"use strict";b.exports=function(a,b){return a.id?b+a.id:null}},{}],215:[function(a,b,c){"use strict";var d=a("./setIdPrefixIfExist");b.exports=function(a,b){return a=a||"",_.extend({},b,{id:d(b,a)})}},{"./setIdPrefixIfExist":214}],216:[function(a,b,c){"use strict";var d=a("./setIdPrefixIfExist");b.exports=function(a,b){return a=a||"",_.extend({},b,{id:d(b,a),obj:a+b.obj})}},{"./setIdPrefixIfExist":214}],217:[function(a,b,c){"use strict";var d=a("./setIdPrefixIfExist");b.exports=function(a,b){return a=a||"",_.extend({},b,{id:d(b,a),subj:a+b.subj,obj:a+b.obj})}},{"./setIdPrefixIfExist":214}],218:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validateAnnotation"),f=d(e),g=a("./importAnnotation/denotation"),h=d(g),i=a("./importAnnotation/relation"),j=d(i),k=a("./importAnnotation/modification"),l=d(k);c["default"]=function(a,b,c,d,e,g,i,k){var m=(0,f["default"])(g,e,i);return(0,h["default"])(a,b,m.accept.denotation,k),(0,j["default"])(c,m.accept.relation,k),(0,l["default"])(d,m.accept.modification,k),m.reject},b.exports=c["default"]},{"./importAnnotation/denotation":209,"./importAnnotation/modification":211,"./importAnnotation/relation":213,"./validateAnnotation":221,"babel-runtime/helpers/interop-require-default":18}],219:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.reduce(function(a,b){return a||b.hasError},!1)},b.exports=c["default"]},{}],220:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{accept:[],reject:a?a:[]}},b.exports=c["default"]},{}],221:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./main"),f=d(e),g=a("./Reject/hasError"),h=d(g),i=a("./isBoundaryCrossingWithOtherSpans"),j=d(i);c["default"]=f["default"],c.hasError=h["default"],c.isBoundaryCrossingWithOtherSpans=j["default"]},{"./Reject/hasError":219,"./isBoundaryCrossingWithOtherSpans":222,"./main":224,"babel-runtime/helpers/interop-require-default":18}],222:[function(a,b,c){"use strict";function d(a,b){var c=b.begin<a.begin&&a.begin<b.end&&b.end<a.end,d=a.begin<b.begin&&b.begin<a.end&&a.end<b.end;return c||d}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return a.filter(function(a){return d(b,a)}).length>0},b.exports=c["default"]},{}],223:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return b.dictionary?1===b.dictionary.filter(function(c){return c.id===a[b.property]}).length:!1},b.exports=c["default"]},{}],224:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validateDenotation"),f=d(e),g=a("./validateRelation"),h=d(g),i=a("./validateModificatian"),j=d(i);c["default"]=function(a,b,c){var d=(0,f["default"])(a,b,c.denotations),e=(0,h["default"])(d.accept,c.relations),g=(0,j["default"])(d.accept,e.accept,c.modifications);return{accept:{denotation:d.accept,relation:e.accept,modification:g.accept},reject:{denotationHasLength:d.reject.hasLength,denotationInText:d.reject.inText,denotationInParagraph:d.reject.inParagraph,denotationIsNotCrossing:d.reject.isNotCrossing,relationObj:e.reject.obj,relationSubj:e.reject.subj,modification:g.reject.modification,hasError:d.hasError||e.hasError||g.hasError}}},b.exports=c["default"]},{"./validateDenotation":226,"./validateModificatian":227,"./validateRelation":228,"babel-runtime/helpers/interop-require-default":18}],225:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){return a(d,b,e,f)?c.accept.push(d):c.reject.push(d),c}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./Reject"),g=e(f);c["default"]=function(a,b,c){return a?a.reduce(function(a,e,f,g){return d(b,c,a,e,f,g)},new g["default"]):new g["default"]},b.exports=c["default"]},{"./Reject":220,"babel-runtime/helpers/interop-require-default":18}],226:[function(a,b,c){"use strict";function d(a){return a.span.end-a.span.begin>0}function e(a,b){return a>=0&&a<=b.length}function f(a,b){return e(a.span.begin,b)&&e(a.span.end,b)}function g(a,b){return 1===b.all().filter(function(b){return b.begin<=a.span.begin&&a.span.end<=b.end}).length}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./validate"),j=h(i),k=a("./isBoundaryCrossingWithOtherSpans"),l=h(k);c["default"]=function(a,b,c){var e=(0,j["default"])(c,d),h=(0,j["default"])(e.accept,f,a),i=(0,j["default"])(h.accept,g,b),k=(0,j["default"])(i.accept,function(a,b,c,d){var e=d.slice(0,c).map(function(a){return a.span}),f=(0,l["default"])(e,a.span);return!f}),m=e.reject.length+h.reject.length+i.reject.length+k.reject.length;return{accept:k.accept,reject:{hasLength:e.reject,inText:h.reject,inParagraph:i.reject,isNotCrossing:k.reject},hasError:0!==m}},b.exports=c["default"]},{"./isBoundaryCrossingWithOtherSpans":222,"./validate":225,"babel-runtime/helpers/interop-require-default":18}],227:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validate"),f=d(e),g=a("./isContains"),h=d(g);c["default"]=function(a,b,c){var d=(0,f["default"])(c,h["default"],{property:"obj",dictionary:_.union(a,b)});return{accept:d.accept,reject:{modification:d.reject,hasError:0!==d.reject.length}}},b.exports=c["default"]},{"./isContains":223,"./validate":225,"babel-runtime/helpers/interop-require-default":18}],228:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./validate"),f=d(e),g=a("./isContains"),h=d(g);c["default"]=function(a,b){var c=(0,f["default"])(b,h["default"],{property:"obj",dictionary:a}),d=(0,f["default"])(c.accept,h["default"],{property:"subj",dictionary:a}),e=c.reject.length+d.reject.length;return{accept:d.accept,reject:{obj:c.reject,subj:d.reject,hasError:0!==e}}},b.exports=c["default"]},{"./isContains":223,"./validate":225,"babel-runtime/helpers/interop-require-default":18}],229:[function(a,b,c){"use strict";function d(a,b){try{if(e(a),!b.text)throw new Error("read failed.");var c=(0,h["default"])(a,b);return a.emit("paragraph.change",a.paragraph.all()),a.emit("all.change",a,c.multitrack,c.rejects),c.rejects}catch(d){console.error(d,d.stack)}}function e(a){a.span.clear(),a.entity.clear(),a.relation.clear(),a.modification.clear(),a.paragraph.clear()}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var g=a("./setNewData"),h=f(g);b.exports=c["default"]},{"./setNewData":230,"babel-runtime/helpers/interop-require-default":18}],230:[function(a,b,c){"use strict";function d(a,b){a.addSource(b)}function e(a,b,c,d,e,f,g){if(!g.tracks)return[!1,[]];var h=g.tracks;delete g.tracks;var j=h.map(function(g,h){var j=h+1,k="track"+j+"_",l=(0,i["default"])(a,b,c,d,e,f,g,k);return l.name="Track "+j+" annotations.",l});return[!0,j]}function f(a,b){var c=e(a.span,a.entity,a.relation,a.modification,a.paragraph,b.text,b),d=(0,i["default"])(a.span,a.entity,a.relation,a.modification,a.paragraph,b.text,b);return d.name="Root annotations.",(0,k["default"])(a.namespace,b.namespaces),{multitrack:c[0],rejects:[d].concat(c[1])}}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./parseAnnotation"),i=g(h),j=a("./parseAnnotation/importAnnotation/namespace"),k=g(j);c["default"]=function(a,b){return d(a.paragraph,b.text),a.sourceDoc=b.text,a.config=b.config,f(a,b)},b.exports=c["default"]},{"./parseAnnotation":218,"./parseAnnotation/importAnnotation/namespace":212,"babel-runtime/helpers/interop-require-default":18}],231:[function(a,b,c){"use strict";function d(a){return a.entity.all().filter(function(b){return a.span.get(b.span)}).map(function(b){var c=a.span.get(b.span);return{id:b.id,span:{begin:c.begin,end:c.end},obj:b.type}})}function e(a){return a.relation.all().map(function(a){return{id:a.id,pred:a.type,subj:a.subj,obj:a.obj}})}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{denotations:d(a),relations:e(a),modifications:a.modification.all()}},b.exports=c["default"]},{}],232:[function(a,b,c){"use strict";function d(a,b){a.emit(b+".change")}function e(a,b,c,e){e.forEach&&e.forEach(function(e){a.add(e),b.emit(c+".select",e),d(b,c)}),a.add(e),b.emit(c+".select",e),d(b,c)}function f(a){return 1===a.size?a.values().next().value:null}function g(a,b,c,d){a.has(d)?h(a,b,c,d):e(a,b,c,d)}function h(a,b,c,e){a["delete"](e),b.emit(c+".deselect",e),d(b,c)}function i(a,b,c){0!==a.size&&(a.forEach(function(d){return h(a,b,c,d)}),d(b,c))}var j=a("babel-runtime/core-js/set")["default"],k=a("babel-runtime/core-js/array/from")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=new j;return{add:function(d){return e(c,a,b,d)},all:function(){return k(c.values())},has:function(a){return c.has(a)},some:function(){return c.size>0},single:function(){return f(c)},toggle:function(d){return g(c,a,b,d)},remove:function(d){return h(c,a,b,d)},clear:function(){return i(c,a,b)}}},b.exports=c["default"]},{"babel-runtime/core-js/array/from":2,"babel-runtime/core-js/set":13}],233:[function(a,b,c){"use strict";function d(a){var b=!1;return a.forEach(function(a){return b=b||a.some()}),b}var e=a("babel-runtime/core-js/map")["default"],f=a("babel-runtime/core-js/object/assign")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("events"),i=a("./IdContainer"),j=g(i);c["default"]=function(a){var b=new h.EventEmitter,c=new e(a.map(function(a){return[a,new j["default"](b,a)]})),g={};return c.forEach(function(a,b){g[b]=a}),f(b,g,{clear:function(){return c.forEach(function(a){return a.clear()})},some:function(){return d(c)}})},b.exports=c["default"]},{"./IdContainer":232,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18,events:110}],234:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./AnnotationData"),f=d(e),g=a("./Selection"),h=d(g);c["default"]=function(a){return{annotationData:new f["default"](a),selectionModel:new h["default"](["span","entity","relation"])}},b.exports=c["default"]},{"./AnnotationData":208,"./Selection":233,"babel-runtime/helpers/interop-require-default":18}],235:[function(a,b,c){"use strict";b.exports=function(a,b){return a.filter(function(a){return a.begin===b.begin&&a.end===b.end}).length>0}},{}],236:[function(a,b,c){"use strict";var d=[],e=function(a,b){return a+"__"+b},f=function(a,b,c){return e(a,b)+c},g="_";b.exports={makeSpanId:function(a,b){var c=e(a.editorId,"S");return c+b.begin+g+b.end},makeTypeId:function(a,b){return-1===d.indexOf(b)&&d.push(b),a+"-"+d.indexOf(b)},makeEntityDomId:function(a,b){return f(a.editorId,"E",b.replace(/[:¥.]/g,""))},makeParagraphId:function(a,b){return f(a.editorId,"P",b)}}},{}],237:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("observ"),g=(d(f),a("../component/DataAccessObject")),h=d(g),i=a("../buttonModel/ButtonController"),j=d(i),k=a("../buttonModel/Writable"),l=d(k),m=a("./Model"),n=d(m),o=a("./History"),p=d(o),q=a("./observe"),r=e(q),s=a("./start"),t=d(s),u="There is a change that has not been saved. If you procceed now, you will lose it.";c["default"]=function(){var a=new n["default"](this),b=new p["default"],c={clipBoard:[]},d=new j["default"](this,a,c),e=new h["default"](this,u),f=new l["default"];return r.observeModelChange(a.annotationData,b,f),r.observeHistoryChange(b,d.buttonStateHelper,u,f),r.observeDataSave(e,b,f),this.api={start:function(g){return(0,t["default"])(g,e,b,d,a,c,f)}},this},b.exports=c["default"]},{"../buttonModel/ButtonController":163,"../buttonModel/Writable":165,"../component/DataAccessObject":166,"./History":201,"./Model":234,"./observe":238,"./start":395,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,observ:161}],238:[function(a,b,c){"use strict";function d(a,b,c){a.on("all.change",function(a,c,d){b.reset(),(0,i["default"])(self,d)})}function e(a,b,c,d){a.on("change",function(a){b.enabled("undo",a.hasAnythingToUndo),b.enabled("redo",a.hasAnythingToRedo),window.onbeforeunload=a.hasAnythingToSave?function(){return c}:null,d.update(a.hasAnythingToSave)})}function f(a,b,c){a.on("save",function(){b.saved(),c.forceModified(!1),toastr.success("annotation saved")}).on("save error",function(){toastr.error("could not save")})}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.observeModelChange=d,c.observeHistoryChange=e,c.observeDataSave=f;var h=a("../component/showVilidationDialog"),i=g(h)},{"../component/showVilidationDialog":193,"babel-runtime/helpers/interop-require-default":18}],239:[function(a,b,c){"use strict";function d(a,b,c){a.has(b)&&a.get(b)(c)}function e(a,b,c){return new g([["A",a.redo],["B",b.event.toggleDetectBoundaryMode],["C",b.event.copyEntities],["D",b.event.removeSelectedElements],["DEL",b.event.removeSelectedElements],["E",b.event.createEntity],["F",b.event.toggleInstaceRelation],["I",c.showAccess],["M",b.event.toggleInstaceRelation],["Q",b.event.showPallet],["R",b.event.replicate],["S",b.event.speculation],["U",c.showSave],["V",b.event.pasteEntities],["W",b.event.changeLabel],["X",b.event.negation],["Y",a.redo],["Z",a.undo],["ESC",b.event.cancelSelect],["LEFT",b.event.selectLeft],["RIGHT",b.event.selectRight],["UP",b.event.selectUp],["DOWN",b.event.selectDown]])}function f(a,b,c,d,e){return new g([["textae.control.button.view.click",b.event.toViewMode],["textae.control.button.term.click",b.event.toTermMode],["textae.control.button.relation.click",b.event.toRelationMode],["textae.control.button.simple.click",b.event.toggleSimpleMode],["textae.control.button.read.click",c.showAccess],["textae.control.button.write.click",c.showSave],["textae.control.button.undo.click",a.undo],["textae.control.button.redo.click",a.redo],["textae.control.button.replicate.click",b.event.replicate],["textae.control.button.replicate_auto.click",d.modeAccordingToButton["replicate-auto"].toggle],["textae.control.button.boundary_detection.click",b.event.toggleDetectBoundaryMode],["textae.control.button.entity.click",b.event.createEntity],["textae.control.button.change_label.click",b.event.changeLabel],["textae.control.button.pallet.click",b.event.showPallet],["textae.control.button.negation.click",b.event.negation],["textae.control.button.speculation.click",b.event.speculation],["textae.control.button.delete.click",b.event.removeSelectedElements],["textae.control.button.copy.click",b.event.copyEntities],["textae.control.button.paste.click",b.event.pasteEntities],["textae.control.button.setting.click",b.event.showSettingDialog],["textae.control.button.line_height.click",e]])}var g=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,g,h,i){var j=new e(a,b,c),k=new f(a,b,c,g,i);return{handleKeyInput:function(a,b){return d(j,a,b)},handleButtonClick:function(a,b){return d(k,a,b)},redraw:function(){return h.updateDisplay()}}},b.exports=c["default"]},{"babel-runtime/core-js/map":5}],240:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/create-class")["default"],e=a("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(b){e(this,a),this.execute=b}return d(a,[{key:"execute",value:function(){}},{key:"revert",value:function(){}}]),a}();c["default"]=f,b.exports=c["default"]},{"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15}],241:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/class-call-check")["default"],g=a("babel-runtime/core-js/object/assign")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./BaseCommand"),j=h(i),k=a("./commandLog"),l=h(k),m=function(a){function b(a,c,e){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){
var d=a.getDefinedType(c),f=d.label;a.setDefinedType(g(d,{label:e})),this.revert=function(){return new b(a,c,f)},(0,l["default"])("change label of a type. id: "+c+", old label: "+f+", new label: "+e)})}return e(b,a),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"./BaseCommand":240,"./commandLog":243,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],242:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/class-call-check")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./BaseCommand"),i=g(h),j=a("./commandLog"),k=g(j),l=function(a){function b(a,c,e){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){a.setDefinedType({id:c,label:e}),this.revert=function(){return new m(a,c,e)},(0,k["default"])("create a new type. id: "+c+", label: "+e)})}return e(b,a),b}(i["default"]),m=function(a){function b(a,c,e){f(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){a.remove(c),this.revert=function(){return new l(a,c,e)},(0,k["default"])("remove a type. id: "+c)})}return e(b,a),b}(i["default"]);c["default"]=l,b.exports=c["default"]},{"./BaseCommand":240,"./commandLog":243,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],243:[function(a,b,c){"use strict";b.exports=function(a,b){b?console.log("[command.invoke]",a,b):console.log("[command.invoke]",a)}},{}],244:[function(a,b,c){"use strict";function d(a,b,c){a[b]&&a[b].add(c.id)}var e=a("babel-runtime/helpers/get")["default"],f=a("babel-runtime/helpers/inherits")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./BaseCommand"),j=h(i),k=a("./commandLog"),l=h(k),m=function(a){function b(a,c,f,h){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){return h=a.annotationData[c].add(h),f&&d(a.selectionModel,c,h),this.revert=function(){return new n(a,c,h.id)},(0,l["default"])("create a new "+c+": ",h),h})}return f(b,a),b}(j["default"]),n=function(a){function b(a,c,d){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){var b=a.annotationData[c].remove(d);b?(this.revert=function(){return new m(a,c,!1,b)},(0,l["default"])("remove a "+c+": ",b)):(this.revert=function(){return{execute:function(){}}},(0,l["default"])("already removed "+c+": ",d))})}return f(b,a),b}(j["default"]),o=function(a){function b(a,c,d,f){g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(){var e=a.annotationData[c].get(d).type,g=a.annotationData[c].changeType(d,f);this.revert=function(){return new b(a,c,d,e)},(0,l["default"])("change type of a "+c+". oldtype:"+e+" "+c+":",g)})}return f(b,a),b}(j["default"]),p=l["default"];c.debugLog=p,c.CreateCommand=m,c.RemoveCommand=n,c.ChangeTypeCommand=o},{"./BaseCommand":240,"./commandLog":243,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],245:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f);c["default"]=function(a,b){var c=function(b){return new e.RemoveCommand(a,"entity",b)},d=function(b){return new e.RemoveCommand(a,"modification",b)},f=function(b){return new e.RemoveCommand(a,"relation",b)},h=c(b),i=a.annotationData.entity.assosicatedRelations(b).map(function(a){return f(a)}),j=a.annotationData.getModificationOf(b).map(function(a){return a.id}).map(function(a){return d(a)}),k=i.concat(j).concat(h);return{execute:function(){(0,g["default"])("entity",this,"remove",b,k)}}},b.exports=c["default"]},{"./commandTemplate":244,"./executeCompositCommand":248,"babel-runtime/helpers/interop-require-default":18}],246:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f);c["default"]=function(a,b,c,d){var f=function(b){return new e.RemoveCommand(a,"relation",b)},h=new e.ChangeTypeCommand(a,"entity",b,c),i=d?a.annotationData.entity.assosicatedRelations(b).map(function(a){return f(a)}).concat(h):[h];return{execute:function(){(0,g["default"])("entity",this,"change",b,i)}}},b.exports=c["default"]},{"./commandTemplate":244,"./executeCompositCommand":248,"babel-runtime/helpers/interop-require-default":18}],247:[function(a,b,c){"use strict";function d(a,b){return b.map(function(b){var c=a.annotationData.entity.get(b).span;return{id:b,span:c}}).reduce(function(a,b){var c=a[b.span]?a[b.span]:[];return c.push(b.id),a[b.span]=c,a},{})}var e=a("babel-runtime/core-js/object/keys")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./spanRemoveCommand"),h=f(g),i=a("./entityAndAssociatesRemoveCommand"),j=f(i);c["default"]=function(a,b){var c=d(a,b);return _.flatten(e(c).map(function(b){var d=a.annotationData.span.get(b),e=c[b],f=_.flatten(d.getTypes().map(function(a){return a.entities})),g=_.reject(f,function(a){return _.contains(e,a)});return{entities:e,spasId:b,noRestEntities:0===g.length}}).map(function(b){return b.noRestEntities?(0,h["default"])(a,b.spasId):b.entities.map(function(b){return(0,j["default"])(a,b)})}))},b.exports=c["default"]},{"./entityAndAssociatesRemoveCommand":245,"./spanRemoveCommand":254,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18}],248:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../invokeCommand"),f=d(e),g=a("./commandLog"),h=d(g),i=function(){var a=function(a,b){(0,h["default"])(a+b.commandType+" a "+b.modelType+": "+b.id)},b=_.partial(a,""),c=_.partial(a,"revert "),d=function(a,b){var d={execute:function(){f["default"].invokeRevert(a),c(b)}};return function(){return d}},e=function(a,b,c,e,f){var g={modelType:a,commandType:c,id:e};return b.revert=new d(f,g),g};return _.compose(b,e)}(),j=function(a,b,c,d,e){f["default"].invoke(e),i(a,b,c,d,e)};b.exports=j},{"../invokeCommand":257,"./commandLog":243,"babel-runtime/helpers/interop-require-default":18}],249:[function(a,b,c){"use strict";function d(a,b){for(var c=String.prototype.indexOf.bind(a,a.substring(b.begin,b.end)),d=b.end-b.begin,e=[],f=0,g=c(f);-1!==g;g=c(f))e.push({begin:g,end:g+d}),f=g+d;return e}function e(a,b,c){var d=a.charAt(c.begin-1),e=a.charAt(c.end);return b(d)&&b(e)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("not"),h=f(g),i=a("../../../Model/isAlreadySpaned"),j=f(i),k=a("../../../Model/AnnotationData/parseAnnotation/validateAnnotation");c["default"]=function(a,b,c){var f=a.span.all(),g=c?_.partial(e,a.sourceDoc,c):_.identity;return d(a.sourceDoc,b).filter(function(a){return a.begin!==b.begin}).filter(g).filter((0,h["default"])(_.partial(j["default"],f))).filter((0,h["default"])(_.partial(k.isBoundaryCrossingWithOtherSpans,f)))},b.exports=c["default"]},{"../../../Model/AnnotationData/parseAnnotation/validateAnnotation":221,"../../../Model/isAlreadySpaned":235,"babel-runtime/helpers/interop-require-default":18,not:160}],250:[function(a,b,c){"use strict";function d(a,b){var c=function(a){return new f.CreateCommand(b,"relation",!1,a)},d={spanCreateCommand:function(c,d){return(0,h["default"])(a,b,c,d)},spanRemoveCommand:function(a){return(0,m["default"])(b,a)},spanMoveCommand:function(c,d){return(0,o["default"])(a,b,c,d)},spanReplicateCommand:function(c,d,e){return(0,j["default"])(a,b,c,d,e)},entityCreateCommand:function(a){return new f.CreateCommand(b,"entity",!0,a)},entityRemoveCommand:function(a){return(0,s["default"])(b,a)},entityChangeTypeCommand:function(a,c,d){return(0,q["default"])(b,a,c,d)},relationCreateCommand:c,relationRemoveCommand:function(a){return(0,u["default"])(b,a)},relationChangeTypeCommand:function(a,c){return new f.ChangeTypeCommand(b,"relation",a,c)},modificationCreateCommand:function(a){return new f.CreateCommand(b,"modification",!1,a)},modificationRemoveCommand:function(a){return new f.RemoveCommand(b,"modification",a)},typeCreateCommand:function(a,b,c){return new y["default"](a,b,c)},typeChangeLabelCommand:function(a,b,c){return new w["default"](a,b,c)}};return d}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("./commandTemplate"),g=a("./spanAndDefaultEntryCreateCommand"),h=e(g),i=a("./spanReplicateCommand"),j=e(i),k=a("./entityAndAssociatesRemoveCommand"),l=(e(k),a("./spanRemoveCommand")),m=e(l),n=a("./spanMoveCommand"),o=e(n),p=a("./entityChangeTypeRemoveRelationCommand"),q=e(p),r=a("./entityRemoveAndSpanRemeveIfNoEntityRestCommand"),s=e(r),t=a("./relationAndAssociatesRemoveCommand"),u=e(t),v=a("./TypeChangeLabelCommand"),w=e(v),x=a("./TypeCreateCommand"),y=e(x);b.exports=c["default"]},{"./TypeChangeLabelCommand":241,"./TypeCreateCommand":242,"./commandTemplate":244,"./entityAndAssociatesRemoveCommand":245,"./entityChangeTypeRemoveRelationCommand":246,"./entityRemoveAndSpanRemeveIfNoEntityRestCommand":247,"./relationAndAssociatesRemoveCommand":251,"./spanAndDefaultEntryCreateCommand":252,"./spanMoveCommand":253,"./spanRemoveCommand":254,"./spanReplicateCommand":255,"babel-runtime/helpers/interop-require-default":18}],251:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f);c["default"]=function(a,b){var c=function(b){return new e.RemoveCommand(a,"relation",b)},d=function(b){return new e.RemoveCommand(a,"modification",b)},f=c(b),h=a.annotationData.getModificationOf(b).map(function(a){return a.id}).map(function(a){return d(a)}),i=h.concat(f);return{execute:function(){(0,g["default"])("relation",this,"remove",b,i)}}},b.exports=c["default"]},{"./commandTemplate":244,"./executeCompositCommand":248,"babel-runtime/helpers/interop-require-default":18}],252:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./executeCompositCommand"),g=d(f),h=a("../../../idFactory"),i=d(h);c["default"]=function(a,b,c,d){var f=function(a){return new e.CreateCommand(b,"span",!0,a)},h=function(a){return new e.CreateCommand(b,"entity",!0,a)},j=i["default"].makeSpanId(a,d),k=f(d),l=h({span:j,type:c}),m=[k,l];return{execute:function(){(0,g["default"])("span",this,"create",j,m)}}},b.exports=c["default"]},{"../../../idFactory":236,"./commandTemplate":244,"./executeCompositCommand":248,"babel-runtime/helpers/interop-require-default":18}],253:[function(a,b,c){"use strict";function d(a,b,c,d){var e=function(a){return new f.CreateCommand(b,"span",!0,a)},g=function(a){return new f.CreateCommand(b,"entity",!0,a)},i=function(a){return new f.CreateCommand(b,"relation",!1,a)},k=h["default"].makeSpanId(a,d),m=b.annotationData,n=[];return m.span.get(k)||(n.push((0,j["default"])(b,c)),n.push(e({begin:d.begin,end:d.end})),m.span.get(c).getTypes().forEach(function(a){a.entities.forEach(function(b){n.push(g({id:b,span:k,type:a.name})),n=n.concat(m.entity.assosicatedRelations(b).map(m.relation.get).map(function(a){return i(a)}))})})),{execute:function(){(0,l["default"])("span",this,"move",c,n)}}}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("./commandTemplate"),g=a("../../../idFactory"),h=e(g),i=a("./spanRemoveCommand"),j=e(i),k=a("./executeCompositCommand"),l=e(k);b.exports=c["default"]},{"../../../idFactory":236,"./commandTemplate":244,"./executeCompositCommand":248,"./spanRemoveCommand":254,"babel-runtime/helpers/interop-require-default":18}],254:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./commandTemplate"),f=a("./entityAndAssociatesRemoveCommand"),g=d(f),h=a("./executeCompositCommand"),i=d(h);c["default"]=function(a,b){var c=new e.RemoveCommand(a,"span",b),d=_.flatten(a.annotationData.span.get(b).getTypes().map(function(b){return b.entities.map(function(b){return(0,g["default"])(a,b)})})),f=d.concat(c);return{execute:function(){(0,i["default"])("span",this,"remove",b,f)}}},b.exports=c["default"]},{"./commandTemplate":244,"./entityAndAssociatesRemoveCommand":245,"./executeCompositCommand":248,"babel-runtime/helpers/interop-require-default":18}],255:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./spanAndDefaultEntryCreateCommand"),f=d(e),g=a("./getReplicationSpans"),h=d(g),i=a("./executeCompositCommand"),j=d(i);c["default"]=function(a,b,c,d,e){var g=function(d){return(0,f["default"])(a,b,c,d)},i=(0,h["default"])(b.annotationData,d,e).map(g);return{execute:function(){(0,j["default"])("span",this,"replicate",d.id,i)}}},b.exports=c["default"]},{"./executeCompositCommand":248,"./getReplicationSpans":249,"./spanAndDefaultEntryCreateCommand":252,"babel-runtime/helpers/interop-require-default":18}],256:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./invokeCommand"),f=d(e),g=a("./Factory"),h=d(g);c["default"]=function(a,b,c){return{invoke:function(a){a&&a.length>0&&(f["default"].invoke(a),c.push(a))},undo:function(){c.hasAnythingToUndo()&&(b.selectionModel.clear(),f["default"].invokeRevert(c.prev()))},redo:function(){c.hasAnythingToRedo()&&(b.selectionModel.clear(),f["default"].invoke(c.next()))},factory:new h["default"](a,b)}},b.exports=c["default"]},{"./Factory":250,"./invokeCommand":257,"babel-runtime/helpers/interop-require-default":18}],257:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/create")["default"],e=function(a){a.forEach(function(a){a.execute()})},f=function(a){return a=d(a),a.reverse(),a.map(function(a){return a.revert()})},g=_.compose(e,f),h={invoke:e,invokeRevert:g};b.exports=h},{"babel-runtime/core-js/object/create":7}],258:[function(a,b,c){"use strict";function d(a,b,c,d){var f=d(),g=c.getConfig();a.showSave(JSON.stringify(e(f,b.toJson(),{config:g})))}var e=a("babel-runtime/core-js/object/assign")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,e,f){var g=function(){return a.showAccess(b.hasAnythingToSave())},h=function(){return d(a,c,e,f)};return{showAccess:g,showSave:h}},b.exports=c["default"]},{"babel-runtime/core-js/object/assign":6}],259:[function(a,b,c){"use strict";function d(a,b,c){return a[b]=c,c}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("capitalize"),g=e(f),h={instanceHide:0,instanceShow:2};c["default"]=function(){var a=_.extend({},h),b=function(b,c){return d(a,b,c)};return _.each(h,function(c,d){a["set"+(0,g["default"])(d)]=function(a){return b(d,a)}}),a},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,capitalize:23}],260:[function(a,b,c){"use strict";function d(a,b,c,d){a?c.setInstanceShow(d):c.setInstanceHide(d),e(a,b,c)}function e(a,b,c){a?b.set(c.instanceShow):b.set(c.instanceHide)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./TypeGapCache"),h=f(g),i=a("../EditMode/event"),j=f(i);c["default"]=function(a,b){var c=!0,f=new h["default"];return b.on(j["default"].SHOW,function(b){c=!0,e(c,a,f)}).on(j["default"].HIDE,function(b){c=!1,e(c,a,f)}),{showInstance:function(){return c},changeTypeGap:function(b){return d(c,a,f,b)},getTypeGap:function(){return a()},notifyNewInstance:function(){c||toastr.success("an instance is created behind.")}}},b.exports=c["default"]},{"../EditMode/event":267,"./TypeGapCache":259,"babel-runtime/helpers/interop-require-default":18}],261:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("emitter-fsm"),f=d(e),g=a("./state"),h=d(g);c["default"]=function(){var a=new f["default"]({states:[h["default"].INIT,h["default"].TERM,h["default"].INSTANCE,h["default"].RELATION,h["default"].VIEW_TERM,h["default"].VIEW_INSTANCE]});return a.config(h["default"].INIT,{to:{exclude:[h["default"].RELATION]}}),a.config(h["default"].TERM,{from:{exclude:[h["default"].VIEW_INSTANCE]},to:{exclude:[h["default"].INIT,h["default"].VIEW_INSTANCE]}}),a.config(h["default"].INSTANCE,{from:{exclude:[h["default"].VIEW_TERM]},to:{exclude:[h["default"].INIT,h["default"].VIEW_TERM]}}),a.config(h["default"].RELATION,{from:{exclude:[h["default"].INIT]},to:{exclude:[h["default"].INIT,h["default"].VIEW_TERM]}}),a.config(h["default"].VIEW_TERM,{from:{exclude:[h["default"].INSTANCE,h["default"].RELATION]},to:{exclude:[h["default"].INIT,h["default"].INSTANCE]}}),a.config(h["default"].VIEW_INSTANCE,{from:{exclude:[h["default"].TERM]},to:{exclude:[h["default"].INIT,h["default"].TERM]}}),a},b.exports=c["default"]},{"./state":271,"babel-runtime/helpers/interop-require-default":18,"emitter-fsm":108}],262:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("events"),f=a("./setEditableStyle"),g=d(f),h=a("./ViewMode"),i=d(h),j=a("./resetView"),k=(d(j),a("./event")),l=d(k),m="term",n="instance",o="relation";c["default"]=function(a,b,c,d){var f=new i["default"](a,b,d),h=new e.EventEmitter,j={toTerm:function(){h.emit(l["default"].HIDE),h.emit(l["default"].CHANGE,!0,m),c.editEntity(),f.setTerm(),(0,g["default"])(a,d,!0)},toInstance:function(){h.emit(l["default"].SHOW),h.emit(l["default"].CHANGE,!0,n),c.editEntity(),f.setInstance(),(0,g["default"])(a,d,!0)},toRelation:function(){h.emit(l["default"].SHOW),h.emit(l["default"].CHANGE,!0,o),c.editRelation(),f.setRelation(),(0,g["default"])(a,d,!0)},toViewTerm:function(){h.emit(l["default"].HIDE),h.emit(l["default"].CHANGE,!1,m),c.noEdit(),f.setTerm(),(0,g["default"])(a,d,!1)},toViewInstance:function(){h.emit(l["default"].SHOW),h.emit(l["default"].CHANGE,!1,n),c.noEdit(),f.setInstance(),(0,g["default"])(a,d,!1)}};return _.extend(h,j)},b.exports=c["default"]},{"./ViewMode":264,"./event":267,"./resetView":269,"./setEditableStyle":270,"babel-runtime/helpers/interop-require-default":18,events:110}],263:[function(a,b,c){"use strict";function d(a){switch(a.currentState){case l["default"].TERM:a.setState(l["default"].VIEW_TERM);break;case l["default"].INSTANCE:case l["default"].RELATION:a.setState(l["default"].VIEW_INSTANCE)}}function e(a,b){switch(a.currentState){case l["default"].RELATION:i(a,b);break;case l["default"].VIEW_INSTANCE:a.setState(l["default"].INSTANCE);break;case l["default"].VIEW_TERM:a.setState(l["default"].TERM)}}function f(a){switch(a.currentState){case l["default"].INSTANCE:a.setState(l["default"].TERM);break;case l["default"].VIEW_INSTANCE:a.setState(l["default"].VIEW_TERM);break;default:throw new Error("Invalid state: "+a.currentState)}}function g(a){switch(a.currentState){case l["default"].TERM:a.setState(l["default"].INSTANCE);break;case l["default"].VIEW_TERM:a.setState(l["default"].VIEW_INSTANCE);break;default:throw new Error("Invalid state: "+a.currentState)}}function h(a,b){switch(a.currentState){case l["default"].INSTANCE:a.setState(l["default"].RELATION);break;case l["default"].RELATION:i(a,b)}}function i(a,b){(0,n["default"])(b)?a.setState(l["default"].TERM):a.setState(l["default"].INSTANCE)}var j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("./state"),l=j(k),m=a("../isSimple"),n=j(m);c["default"]=function(a,b){return{toTerm:function(){return a.setState(l["default"].TERM)},toInstance:function(){return a.setState(l["default"].INSTANCE)},toViewTerm:function(){return a.setState(l["default"].VIEW_TERM)},toViewInstance:function(){return a.setState(l["default"].VIEW_INSTANCE)},pushView:function(){return d(a)},pushTerm:function(){return e(a,b)},pushRelation:function(){return a.setState(l["default"].RELATION)},pushSimple:function(){return f(a)},upSimple:function(){return g(a)},toggleInstaceRelation:function(){return h(a,b)}}},b.exports=c["default"]},{"../isSimple":314,"./state":271,"babel-runtime/helpers/interop-require-default":18}],264:[function(a,b,c){"use strict";function d(a,b){a.removeClass("textae-editor_term-mode").removeClass("textae-editor_instance-mode").removeClass("textae-editor_relation-mode").addClass("textae-editor_"+b+"-mode")}function e(a,b,c){a.removeListener("entity.select",b).removeListener("entity.deselect",b).removeListener("entity.change",b).removeListener("entity.change",c.updateByEntity)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../View/Selector"),h=f(g);c["default"]=function(a,b,c){var f=new h["default"](a,b),g=_.compose(c.updateByEntity,f.entityLabel.update),i={setTerm:function(){d(a,"term"),e(b.selectionModel,g,c),b.selectionModel.on("entity.select",g).on("entity.deselect",g).on("entity.change",c.updateByEntity)},setInstance:function(){d(a,"instance"),e(b.selectionModel,g,c),b.selectionModel.on("entity.select",g).on("entity.deselect",g).on("entity.change",c.updateByEntity)},setRelation:function(){d(a,"relation"),e(b.selectionModel,g,c)}};return i},b.exports=c["default"]},{"../../View/Selector":381,"babel-runtime/helpers/interop-require-default":18}],265:[function(a,b,c){"use strict";function d(a){return"enter:"+a}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./StateMachine"),g=e(f),h=a("./state"),i=e(h);c["default"]=function(a){var b=new g["default"];return b.on("transition",function(a){}).on(d(i["default"].TERM),a.toTerm).on(d(i["default"].INSTANCE),a.toInstance).on(d(i["default"].RELATION),a.toRelation).on(d(i["default"].VIEW_TERM),a.toViewTerm).on(d(i["default"].VIEW_INSTANCE),a.toViewInstance),b},b.exports=c["default"]},{"./StateMachine":261,"./state":271,"babel-runtime/helpers/interop-require-default":18}],266:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){a.enabled("view",!0),a.enabled("term",!0),a.enabled("relation",!0),a.enabled("simple",!0),a.enabled("setting",!0)},b.exports=c["default"]},{}],267:[function(a,b,c){b.exports={SHOW:"showInstance",HIDE:"hideInstance",CHANGE:"change"}},{}],268:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/assign")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("events"),g=a("./Transition"),h=e(g),i=a("./bindTransition"),j=e(i),k=a("./resetView"),l=e(k),m=a("./event"),n=e(m),o=a("./Trigger"),p=e(o),q=a("./enableButtonHasAnnotation"),r=e(q);c["default"]=function(a,b,c,e){var g=new f.EventEmitter,i=new h["default"](a,b,c,e),k=(0,j["default"])(i),m=new p["default"](k,b.annotationData);return k.once("transition",function(){return(0,r["default"])(e)}),i.on(n["default"].SHOW,function(){return g.emit(n["default"].SHOW)}).on(n["default"].HIDE,function(){return g.emit(n["default"].HIDE)}).on(n["default"].CHANGE,function(){return(0,l["default"])(c,b.selectionModel)}).on(n["default"].CHANGE,function(a,b){return g.emit(n["default"].CHANGE,a,b)}),d(g,m),g},b.exports=c["default"]},{"./Transition":262,"./Trigger":263,"./bindTransition":265,"./enableButtonHasAnnotation":266,"./event":267,"./resetView":269,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18,events:110}],269:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){a.hideDialogs(),b.clear()},b.exports=c["default"]},{}],270:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){c?a.addClass("textae-editor_editable"):a.removeClass("textae-editor_editable")},b.exports=c["default"]},{}],271:[function(a,b,c){b.exports={INIT:"Init",TERM:"Term Centric",INSTANCE:"Instance / Relation",RELATION:"Relation Edit",VIEW_TERM:"View Term",VIEW_INSTANCE:"View Instance"}},{}],272:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/create-class")["default"],e=a("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(){e(this,a),this.typeContainer=null}return d(a,[{key:"changeLabelOfId",value:function(a,b){var c=this.typeContainer.getDefinedType(a);return c.id?c.id&&c.label!==b?this.command.factory.typeChangeLabelCommand(this.typeContainer,a,b):void 0:this.command.factory.typeCreateCommand(this.typeContainer,a,b)}},{key:"changeTypeOfSelectedElement",value:function(){}},{key:"getSelectedIdEditable",value:function(){return this.selectionModel?this.selectionModel.all():[]}},{key:"getSelectedType",value:function(){var a=this.selectionModel.single();return a?this.annotationData.get(a).type:""}},{key:"jsPlumbConnectionClicked",value:function(){}},{key:"getEditTarget",value:function(a){var b=this;return this.selectionModel.all().filter(function(c){return b.annotationData.get(c).type!==a})}}]),a}();c["default"]=f,b.exports=c["default"]},{"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15}],273:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("../DefaultHandler"),j=h(i),k=function(a){function b(a,c,e,f){g(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.typeContainer=a.entity,this.command=c,this.annotationData=e.entity,this.selectionModel=f.entity}return e(b,a),f(b,[{key:"changeTypeOfSelectedElement",value:function(a){var b=this;return this.getEditTarget(a).map(function(c){return b.command.factory.entityChangeTypeCommand(c,a,b.typeContainer.isBlock(a))})}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"../DefaultHandler":272,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],274:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c,d){var e=function(a){return _.flatten(b.span.get(a).getTypes().filter(function(a){return d.entity.isBlock(a.name)}).map(function(a){return a.entities}))},f=function(b,d){c.span[b](d),a.find("#"+d).hasClass("textae-editor__span--block")&&e(d).forEach(c.entity[b])},g=_.partial(f,"add"),h=_.partial(f,"toggle");return function(a){var d=c.span.single(),e=a.target,f=e.id;a.shiftKey&&d?(c.clear(),b.span.range(d,f).forEach(function(a){g(a)})):a.ctrlKey||a.metaKey?h(f):(c.clear(),g(f))}},b.exports=c["default"]},{}],275:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getSelectionSnapShot"),f=d(e);c["default"]=function(a,b,c){var d=window.getSelection();d.isCollapsed?a():b.onText({spanConfig:c,selection:(0,f["default"])()})},b.exports=c["default"]},{"./getSelectionSnapShot":278,"babel-runtime/helpers/interop-require-default":18}],276:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../dismissBrowserSelection"),f=d(e);c["default"]=function(a,b){return(0,f["default"])(),b.ctrlKey||b.metaKey?a.entity.toggle(b.target.title):(a.clear(),a.entity.add(b.target.title)),!1},b.exports=c["default"]},{"../../dismissBrowserSelection":295,"babel-runtime/helpers/interop-require-default":18}],277:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./selectEntities"),f=d(e);c["default"]=function(a,b){var c=b.target.previousElementSibling,d=b.target.children;return(0,f["default"])(a,b.ctrlKey||b.metaKey,c,d)},b.exports=c["default"]},{"./selectEntities":280,"babel-runtime/helpers/interop-require-default":18}],278:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../dismissBrowserSelection"),f=d(e);c["default"]=function(){var a=window.getSelection(),b={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset,range:a.getRangeAt(0)};return(0,f["default"])(),b},b.exports=c["default"]},{"../../dismissBrowserSelection":295,"babel-runtime/helpers/interop-require-default":18}],279:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../SelectEnd"),f=d(e),g=a("./spanClicked"),h=d(g),i=a("./SelectSpan"),j=d(i),k=a("./bodyClicked"),l=d(k),m=a("./typeLabelClicked"),n=d(m),o=a("./entityClicked"),p=d(o),q=a("./entityPaneClicked"),r=d(q),s=a("./EditEntityHandler"),t=d(s);c["default"]=function(a,b,c,d,e,g,i){var k=new f["default"](a,b,c,d,e),m=new j["default"](a,b.annotationData,b.selectionModel,e),o=b.selectionModel,q=function(){a.on("mouseup",".textae-editor__body",function(){return(0,l["default"])(i,k,g)}).on("mouseup",".textae-editor__span",function(a){return(0,h["default"])(g,k,m,a)}).on("mouseup",".textae-editor__type-label",function(a){return(0,n["default"])(o,a)}).on("mouseup",".textae-editor__entity-pane",function(a){return(0,r["default"])(o,a)}).on("mouseup",".textae-editor__entity",function(a){return(0,p["default"])(o,a)})};o.entity.all;return{init:q,handlers:new t["default"](e,c,b.annotationData,o)}},b.exports=c["default"]},{"../../SelectEnd":288,"./EditEntityHandler":273,"./SelectSpan":274,"./bodyClicked":275,"./entityClicked":276,"./entityPaneClicked":277,"./spanClicked":281,"./typeLabelClicked":282,"babel-runtime/helpers/interop-require-default":18}],280:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../dismissBrowserSelection"),f=d(e);c["default"]=function(a,b,c,d){function e(a,b){Array.prototype.forEach.call(b,function(b){return a.entity.add(b.title)})}function g(a,b){Array.prototype.forEach.call(b,function(b){return a.entity.remove(b.title)})}return(0,f["default"])(),b?c.classList.contains("ui-selected")?g(a,d):e(a,d):(a.clear(),e(a,d)),!1},b.exports=c["default"]},{"../../dismissBrowserSelection":295,"babel-runtime/helpers/interop-require-default":18}],281:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getSelectionSnapShot"),f=d(e);c["default"]=function(a,b,c,d){var e=window.getSelection();return e.isCollapsed?(c(d),!1):(b.onSpan({spanConfig:a,selection:(0,f["default"])()
}),void d.stopPropagation())},b.exports=c["default"]},{"./getSelectionSnapShot":278,"babel-runtime/helpers/interop-require-default":18}],282:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../dismissBrowserSelection"),f=(d(e),a("./selectEntities")),g=d(f);c["default"]=function(a,b){var c=b.target,d=b.target.nextElementSibling.children;return(0,g["default"])(a,b.ctrlKey||b.metaKey,c,d)},b.exports=c["default"]},{"../../dismissBrowserSelection":295,"./selectEntities":280,"babel-runtime/helpers/interop-require-default":18}],283:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/get")["default"],e=a("babel-runtime/helpers/inherits")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("../DefaultHandler"),j=h(i),k=function(a){function b(a,c,e,f){g(this,b),d(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.typeContainer=a.relation,this.command=c,this.annotationData=e.relation,this.selectionModel=f.relation,this.clearAllSelection=f.clear}return e(b,a),f(b,[{key:"changeTypeOfSelectedElement",value:function(a){var b=this;return this.getEditTarget(a).map(function(c){return b.command.factory.relationChangeTypeCommand(c,a)})}},{key:"jsPlumbConnectionClicked",value:function(a,b){var c=a.getParameter("id");b.ctrlKey||b.metaKey?this.selectionModel.toggle(c):this.selectionModel.single()!==c&&(this.clearAllSelection(),this.selectionModel.add(c))}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"../DefaultHandler":272,"babel-runtime/helpers/class-call-check":14,"babel-runtime/helpers/create-class":15,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],284:[function(a,b,c){"use strict";function d(a,b,c,d){return a.entity.some()?e(a,b,c,d):(a.clear(),a.entity.add($(d.target).attr("title"))),!1}function e(a,b,c,d){var e=a.entity.all()[0],f=$(d.target).attr("title");e===f?a.entity.remove(e):(a.entity.add(f),_.defer(function(){if(b.invoke([b.factory.relationCreateCommand({subj:e,obj:f,type:c.relation.getDefaultType()})]),d.ctrlKey||d.metaKey)a.entity.remove(f);else{if(d.shiftKey)return(0,h["default"])(),a.entity.remove(e),a.entity.add(f),!1;a.entity.remove(e),a.entity.remove(f)}}))}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var g=a("../../dismissBrowserSelection"),h=f(g);b.exports=c["default"]},{"../../dismissBrowserSelection":295,"babel-runtime/helpers/interop-require-default":18}],285:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./entityClickedAtRelationMode"),f=d(e),g=a("./EditRelationHandler"),h=d(g);c["default"]=function(a,b,c,d,e,g){var i=function(){a.on("mouseup",".textae-editor__entity",function(a){return(0,f["default"])(b,d,e,a)}).on("mouseup",".textae-editor__relation, .textae-editor__relation__label",function(){return!1}).on("mouseup",".textae-editor__body",g)};return{init:i,handlers:new h["default"](e,d,c,b)}},b.exports=c["default"]},{"./EditRelationHandler":283,"./entityClickedAtRelationMode":284,"babel-runtime/helpers/interop-require-default":18}],286:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./EditRelation"),f=d(e),g=a("./EditEntity"),h=d(g),i=a("./unbindAllEventhandler"),j=d(i),k=a("./DefaultHandler"),l=d(k);c["default"]=function(a,b,c,d,e,g,i){var k=new l["default"],m=new f["default"](a,b.selectionModel,b.annotationData,d,g,i),n=new h["default"](a,b,d,e,g,c,i);return{getHandler:function(){return k},start:{noEdit:function(){(0,j["default"])(a),k=new l["default"]},editEntity:function(){(0,j["default"])(a),n.init(),k=n.handlers},editRelation:function(){(0,j["default"])(a),m.init(),k=m.handlers}}}},b.exports=c["default"]},{"./DefaultHandler":272,"./EditEntity":279,"./EditRelation":285,"./unbindAllEventhandler":287,"babel-runtime/helpers/interop-require-default":18}],287:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.off("mouseup",".textae-editor__body").off("mouseup",".textae-editor__span").off("mouseup",".textae-editor__span_block").off("mouseup",".textae-editor__type-label").off("mouseup",".textae-editor__entity-pane").off("mouseup",".textae-editor__entity")},b.exports=c["default"]},{}],288:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./SelectionParser"),f=d(e),g=a("./SelectionValidater"),h=d(g),i=a("./SpanEditor"),j=d(i),k=function(a,b,c){var d=a.validateOnText(c.spanConfig,c.selection);d&&_.compose(b.expand,b.create)(c)},l=function(a,b,c){var d=a.validateOnSpan(c.spanConfig,c.selection);d&&_.compose(b.shrink,b.expand,b.create)(c)};b.exports=function(a,b,c,d,e){var g=new f["default"](a,b),i=new h["default"](g),m=null,n=null,o=function(){var f=d["boundary-detection"].value(),g=d["replicate-auto"].value(),h=new j["default"](a,b,c,e,f,g);m=_.partial(k,i,h),n=_.partial(l,i,h)};return o(),d["boundary-detection"].on("change",o),d["replicate-auto"].on("change",o),{onText:function(a){m&&m(a)},onSpan:function(a){n&&n(a)}}}},{"./SelectionParser":289,"./SelectionValidater":290,"./SpanEditor":291,"babel-runtime/helpers/interop-require-default":18}],289:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./selectPosition"),f=d(e);b.exports=function(a,b){var c=function(a,c){if(!c)return!1;var d=f["default"].toPositions(b.annotationData,c),e=b.annotationData.sourceDoc.substring(d.anchorPosition,d.focusPosition),g=a.removeBlankChractors(e);return g.length>0},d=function(a){return a.anchorNode.parentElement.id===a.focusNode.parentElement.id},e=function(a){return $(a.anchorNode.parentNode)},g=function(a){return $(a.focusNode.parentNode)},h=function(a){return a.hasClass("textae-editor__span")},i=function(a){return a.hasClass("textae-editor__body__text-box__paragraph")},j=function(a){return h(a)||i(a)},k=_.compose(h,e),l=_.compose(h,g),m=_.compose(i,g),n=_.compose(j,e),o=function(){var a=function(a){for(var b=!0;b;){var c=a;if(b=!1,i(c))return c;if(!h(c))return null;a=c.parent(),b=!0}},b=function(b,c){var d=$(b[c+"Node"].parentNode),e=a(d);return e&&e.attr("id")};return function(a){var c=b(a,"anchor"),d=b(a,"focus");return c===d}}(),p=function(a){return a.anchorNode.parentNode.parentNode===a.focusNode.parentNode},q=function(a){return a.anchorNode.parentNode===a.focusNode.parentNode.parentNode},r=function(a){var c=b.selectionModel.span.single();if(c){var d=b.annotationData.span.get(c);return d.begin<a&&a<d.end}return!1},s=function(a){return r(f["default"].getAnchorPosition(b.annotationData,a))},t=function(a){return a.focusNode.parentNode.id===b.selectionModel.span.single()},u=function(a){return r(f["default"].getFocusPosition(b.annotationData,a))},v=function(a){var c=e(a),d=f["default"].getFocusPosition(b.annotationData,a);if(h(c)&&c.parent()&&h(c.parent())){var g=b.annotationData.span.get(c.parent().attr("id"));if(d<g.begin||g.end<d)return!0}},w=function(a){var c=g(a),d=f["default"].getAnchorPosition(b.annotationData,a);if(h(c)&&c.parent()&&h(c.parent())){var e=b.annotationData.span.get(c.parent().attr("id"));if(d<e.begin||e.end<d)return!0}};return{hasCharacters:c,isInOneParent:d,isAnchrNodeInSpan:k,isAnchrNodeInSpanOrParagraph:n,isFocusNodeInSpan:l,isFocusNodeInParagraph:m,isInSameParagraph:o,isAnchorOneDownUnderForcus:p,isForcusOneDownUnderAnchor:q,isAnchorInSelectedSpan:s,isFocusOnSelectedSpan:t,isFocusInSelectedSpan:u,isLongerThanParentSpan:v,isShorterThanChildSpan:w}}},{"./selectPosition":297,"babel-runtime/helpers/interop-require-default":18}],290:[function(a,b,c){"use strict";var d=a("./deferAlert");b.exports=function(a){var b=function(b){return a.isInSameParagraph(b)?!0:(d("It is ambiguous for which span you want to adjust the boundary. Select the span, and try again."),!1)},c=function(c,d){return b(d)&&a.isAnchrNodeInSpanOrParagraph(d)&&a.hasCharacters(c,d)},e=function(b,d){return a.isFocusNodeInParagraph(d)&&c(b,d)},f=function(b,d){return a.isFocusNodeInSpan(d)&&c(b,d)};return{validateOnText:e,validateOnSpan:f}}},{"./deferAlert":294}],291:[function(a,b,c){"use strict";function d(a,b,c){return c&&b(c.selection)?a(c):c}function e(a,b,c,d){return c!==n["default"].makeSpanId(a,d)?[b.factory.spanMoveCommand(c,d)]:void 0}function f(a,b){return[a.factory.spanRemoveCommand(b)]}function g(a,b,c,d,e,f,g){var h=100,i=d.create(g.selection,g.spanConfig);if(!(0,o.isBoundaryCrossingWithOtherSpans)(a.annotationData.span.all(),i)&&!(0,q["default"])(a.annotationData.span.all(),i)){var j=[b.factory.spanCreateCommand(c.entity.getDefaultType(),{begin:i.begin,end:i.end})];f&&i.end-i.begin<=h&&j.push(b.factory.spanReplicateCommand(c.entity.getDefaultType(),{begin:i.begin,end:i.end},e?g.spanConfig.isDelimiter:null)),b.invoke(j)}}function h(a,b,c,d,f,g){var h=d.expand(f,g.selection,g.spanConfig);return(0,o.isBoundaryCrossingWithOtherSpans)(b.annotationData.span.all(),h)?void(0,s["default"])("A span cannot be expanded to make a boundary crossing."):void c.invoke(e(a,c,f,h))}function i(a,b,c,d){if(b.isAnchorInSelectedSpan(d.selection))c(a.selectionModel.span.single(),d);else{if(!b.isAnchorOneDownUnderForcus(d.selection))return d;c(d.selection.anchorNode.parentNode.id,d)}}function j(a,b,c,d,g,h){var i=d.shrink(g,h.selection,h.spanConfig);if((0,o.isBoundaryCrossingWithOtherSpans)(b.annotationData.span.all(),i))return void(0,s["default"])("A span cannot be shrinked to make a boundary crossing.");var j=n["default"].makeSpanId(a,i),k=b.annotationData.span.get(j);c.invoke(i.begin<i.end&&!k?e(a,c,g,i):f(c,g))}function k(a,b,c,d){b.isFocusInSelectedSpan(d.selection)?c(a.selectionModel.span.single(),d):b.isForcusOneDownUnderAnchor(d.selection)&&c(d.selection.focusNode.parentNode.id,d)}var l=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var m=a("../../../idFactory"),n=l(m),o=a("../../../Model/AnnotationData/parseAnnotation/validateAnnotation"),p=a("../../../Model/isAlreadySpaned"),q=l(p),r=a("./deferAlert"),s=l(r),t=a("../spanAdjuster/delimiterDetectAdjuster"),u=l(t),v=a("../spanAdjuster/blankSkipAdjuster"),w=l(v),x=a("./SpanManipulater"),y=l(x),z=a("./SelectionParser"),A=l(z);c["default"]=function(a,b,c,e,f,l){var m=f?u["default"]:w["default"],n=new y["default"](b,m),o=new A["default"](a,b),p=_.partial(g,b,c,e,n,f,l),q=_.partial(h,a,b,c,n),r=_.partial(i,b,o,q),s=_.partial(j,a,b,c,n),t=_.partial(k,b,o,s);return{create:_.partial(d,p,o.isInOneParent),expand:_.partial(d,r,o.isAnchrNodeInSpan),shrink:_.partial(d,t,o.isFocusNodeInSpan)}},b.exports=c["default"]},{"../../../Model/AnnotationData/parseAnnotation/validateAnnotation":221,"../../../Model/isAlreadySpaned":235,"../../../idFactory":236,"../spanAdjuster/blankSkipAdjuster":320,"../spanAdjuster/delimiterDetectAdjuster":321,"./SelectionParser":289,"./SpanManipulater":292,"./deferAlert":294,"babel-runtime/helpers/interop-require-default":18}],292:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./selectPosition"),f=d(e);b.exports=function(a,b){var c=function(){var c=function(c,d){var e=f["default"].toPositions(a.annotationData,c);return{begin:b.backFromBegin(a.annotationData.sourceDoc,e.anchorPosition,d),end:b.forwardFromEnd(a.annotationData.sourceDoc,e.focusPosition-1,d)+1}};return function(b,d){return a.selectionModel.clear(),c(b,d)}}(),d=function(){var c=function(c,d,e,f,g){var h=a.annotationData.span.get(c);return d.compareBoundaryPoints(Range.START_TO_START,e)<0?{begin:b.backFromBegin(a.annotationData.sourceDoc,f,g),end:h.end}:{begin:h.begin,end:b.forwardFromEnd(a.annotationData.sourceDoc,f-1,g)+1}};return function(b,d,e){a.selectionModel.clear();var g=document.createRange();g.selectNode(d.anchorNode);var h=f["default"].getFocusPosition(a.annotationData,d);return c(b,d.range,g,h,e)}}(),e=function(){var c=function(c,d,e,f,g){var h=a.annotationData.span.get(c);return d.compareBoundaryPoints(Range.START_TO_START,e)>0?h.begin===f?{begin:h.begin,end:h.begin}:{begin:h.begin,end:b.backFromEnd(a.annotationData.sourceDoc,f-1,g)+1}:h.end===f?{begin:h.end,end:h.end}:{begin:b.forwardFromBegin(a.annotationData.sourceDoc,f,g),end:h.end}};return function(b,d,e){a.selectionModel.clear();var g=document.createRange();g.selectNode(d.focusNode);var h=f["default"].getFocusPosition(a.annotationData,d);return c(b,d.range,g,h,e)}}();return{create:c,expand:d,shrink:e}}},{"./selectPosition":297,"babel-runtime/helpers/interop-require-default":18}],293:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../component/editIdDialog"),f=d(e);c["default"]=function(a,b,c){if(b().getSelectedIdEditable().length>0){var d=b().getSelectedType(),e=function(a,c){var d=[];if(c){var e=b().changeLabelOfId(a,c);e&&d.push(e)}a&&(d=d.concat(b().changeTypeOfSelectedElement(a)),b().command.invoke(d))};(0,f["default"])(a,d,b().typeContainer,e,c)}},b.exports=c["default"]},{"../../../../component/editIdDialog":187,"babel-runtime/helpers/interop-require-default":18}],294:[function(a,b,c){"use strict";b.exports=function(a){_.defer(_.partial(alert,a))}},{}],295:[function(a,b,c){"use strict";b.exports=function(){var a=window.getSelection();a.collapse(document.body,0)}},{}],296:[function(a,b,c){"use strict";function d(a,b){a.hide(),b.clear(),(0,j["default"])()}function e(a,b,c){a.getHandler().jsPlumbConnectionClicked&&!c.processedByTextae&&a.getHandler().jsPlumbConnectionClicked(b,c),c.processedByTextae=!0}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../../../component/Pallet"),h=f(g),i=a("./dismissBrowserSelection"),j=f(i),k=a("./ElementEditor"),l=f(k),m=a("./changeLabelHandler"),n=f(m);c["default"]=function(a,b,c,f,g,i,j){var k=new l["default"](a,b,c,f,g,i,function(){return d(m,b.selectionModel)}),m=new h["default"](function(a){var b=k.getHandler().changeTypeOfSelectedElement(a);f.invoke(b)},function(a){return k.getHandler().typeContainer.setDefaultType(a)}),o={editRelation:k.start.editRelation,editEntity:k.start.editEntity,noEdit:k.start.noEdit,showPallet:function(a){return m.show(k.getHandler().typeContainer,a.point)},getTypeOfSelected:function(){return k.getHandler().getSelectedType()},changeLabel:function(){return(0,n["default"])(a,k.getHandler,j)},changeTypeOfSelectedElement:function(a){return k.getHandler().changeTypeOfSelectedElement(a)},hideDialogs:m.hide,cancelSelect:function(){return d(m,b.selectionModel)},jsPlumbConnectionClicked:function(a,b){return e(k,a,b)},getSelectedIdEditable:function(){return k.getHandler().getSelectedIdEditable()}};return o},b.exports=c["default"]},{"../../../../component/Pallet":169,"./ElementEditor":286,"./changeLabelHandler":293,"./dismissBrowserSelection":295,"babel-runtime/helpers/interop-require-default":18}],297:[function(a,b,c){"use strict";var d=function(a,b,c){var d,e=$(c).parent(),f=e.attr("id");if(e.hasClass("textae-editor__body__text-box__paragraph"))d=a.get(f).begin;else{if(!e.hasClass("textae-editor__span"))throw new Error("Can not get position of a node : "+c+" "+c.data);d=b.get(f).begin}for(var g=c.parentElement.childNodes,h=0;g[h]!==c;h++)d+="#text"===g[h].nodeName?g[h].nodeValue.length:$("#"+g[h].id).text().length;return d},e=function(a,b){var c=d(a.paragraph,a.span,b.focusNode);return c+=b.focusOffset},f=function(a,b){var c=d(a.paragraph,a.span,b.anchorNode);return c+b.anchorOffset},g=function(a,b){var c=f(a,b),d=e(a,b);if(c>d){var g=c;c=d,d=g}return{anchorPosition:c,focusPosition:d}};b.exports={toPositions:g,getAnchorPosition:f,getFocusPosition:e}},{}],298:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./setButtonState"),f=d(e);c["default"]=function(a,b,c){var d=!1,e=!1;a(function(a){d=a,c.buttonStateHelper.enabled("write",a&&e)}),b.on("change",function(a,b){return(0,f["default"])(c,a,b)}).on("change",function(a,b){e=a,a?c.buttonStateHelper.enabled("write",d):c.buttonStateHelper.enabled("write",!1)})},b.exports=c["default"]},{"./setButtonState":315,"babel-runtime/helpers/interop-require-default":18}],299:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=function(){d.clipBoard=_.uniq(function(){return _.flatten(c.span.all().map(function(a){return b.span.get(a).getEntities()}))}().concat(c.entity.all())).map(function(a){return b.entity.get(a).type})},f=function(){var b=_.flatten(c.span.all().map(function(b){return d.clipBoard.map(function(c){return a.factory.entityCreateCommand({span:b,type:c})})}));a.invoke(b)};return{copyEntities:e,pasteEntities:f}}},{}],300:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("events"),f=a("./replicate"),g=d(f),h=a("./createEntityToSelectedSpan"),i=d(h),j=function(a,b,c,d,f,h){var j=new e.EventEmitter,k=function(){(0,g["default"])(a,b,d,f,c.span.single(),h)},l=function(){(0,i["default"])(a,c.span.all(),h),j.emit("createEntity")};return _.extend(j,{replicate:k,createEntity:l})};b.exports=j},{"./createEntityToSelectedSpan":308,"./replicate":311,"babel-runtime/helpers/interop-require-default":18,events:110}],301:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{toViewMode:a.pushView,toTermMode:a.pushTerm,toRelationMode:a.pushRelation}},b.exports=c["default"]},{}],302:[function(a,b,c){"use strict";var d=a("./toggleModification");b.exports=function(a,b,c,e){return{negation:function(){d(a,b,c,"Negation",e)},speculation:function(){d(a,b,c,"Speculation",e)}}}},{"./toggleModification":312}],303:[function(a,b,c){"use strict";function d(a,b,c){var d=h(a,b,c);d()}function e(a,b,c){var d=i(a,b,c);d()}function f(a,b){var c=b.span.single();if(c)return void m(b,c);var d=l(a,A);return 1===d.length?void n(b,d[0]):void 0}function g(a,b){var c=l(a,A);if(1===c.length)return void o(b,c[0]);var d=l(a,C);return 1===d.length?void p(b,d[0]):void 0}function h(a,b,c){var d=function(b){return(0,w.getLeftElement)(a,b[0])};return j(a,b,c,d)}function i(a,b,c){var d=function(b){return(0,w.getRightElement)(a,b[b.length-1])};return j(a,b,c,d)}function j(a,b,c,d){var e=function(e,f,g){return k(a,e,f,b,c,g,d)},f=e(y,r.selectSpan,function(){return e(A,t["default"],function(){return e(C,v["default"])})});return f}function k(a,b,c,d,e,f,g){var h=l(a,b);if(!h.length)return f?f():function(){};var i=function(){var a=g(h);return{v:function(){return c(d,a,e)}}}();return"object"==typeof i?i.v:void 0}function l(a,b){return a.querySelectorAll("."+b+".ui-selected")}function m(a,b){var c=document.querySelector("#G"+b);if(c){var d=c.querySelector("."+B),e=d.querySelector("."+A);(0,t["default"])(a,e)}}function n(a,b){var c=b.nextElementSibling;(0,v["default"])(a,c.children[0])}function o(a,b){console.assert(b,"A label MUST exists.");var c=b.closest("."+z).id.substring(1);(0,r.selectSingleSpanById)(a,c)}function p(a,b){console.assert(b,"An entity MUST exists."),(0,t["default"])(a,b.parentNode.previousElementSibling)}var q=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var r=a("./selectSpan"),s=a("./selectEntityLabel"),t=q(s),u=a("./selectEntity"),v=q(u),w=a("../../../getNextElement"),x=a("../../../getEntityDom"),y=(q(x),"textae-editor__span"),z="textae-editor__grid",A="textae-editor__type-label",B="textae-editor__type",C="textae-editor__entity";c["default"]=function(a,b){var c=a[0];return{selectLeft:function(a){return d(c,b,a.shiftKey)},selectRight:function(a){return e(c,b,a.shiftKey)},selectUp:function(){return f(c,b)},selectDown:function(){return g(c,b)},selectLeftFunc:function(){return h(c,b)},selectRightFunc:function(){return i(c,b)}}},b.exports=c["default"]},{"../../../getEntityDom":391,"../../../getNextElement":392,"./selectEntity":304,"./selectEntityLabel":305,"./selectSpan":306,"babel-runtime/helpers/interop-require-default":18}],304:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){console.assert(a,"selectionModel MUST exists."),b&&(c||a.clear(),a.entity.add(b.title))},b.exports=c["default"]},{}],305:[function(a,b,c){"use strict";function d(a,b,c){if(console.assert(a,"selectionModel MUST exists"),b){var d=b.nextElementSibling,f=d.children;c||a.clear(),a.entity.add(e(f).map(function(a){return a.title}))}}var e=a("babel-runtime/core-js/array/from")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var g=a("./selectEntity");f(g);b.exports=c["default"]},{"./selectEntity":304,"babel-runtime/core-js/array/from":2,"babel-runtime/helpers/interop-require-default":18}],306:[function(a,b,c){"use strict";function d(a,b,c){console.assert(a,"selectionModel MUST not undefined."),b&&(c?a.span.add(b.id):e(a,b.id))}function e(a,b){console.assert(a,"selectionModel MUST not undefined."),b&&(a.clear(),a.span.add(b))}Object.defineProperty(c,"__esModule",{value:!0}),c.selectSpan=d,c.selectSingleSpanById=e},{}],307:[function(a,b,c){"use strict";function d(a,b){a.simple.value()?b.upSimple():b.pushSimple()}function e(a){a["boundary-detection"].toggle()}function f(a){a.toggleInstaceRelation()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return{toggleSimpleMode:function(){return d(a,b)},toggleDetectBoundaryMode:function(){return e(a)},toggleInstaceRelation:function(){return f(b)}}},b.exports=c["default"]},{}],308:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=b.map(function(b){return a.factory.entityCreateCommand({span:b,type:c.getDefaultType()})});a.invoke(d)}},{}],309:[function(a,b,c){"use strict";function d(a,b,c,d){return[].concat(g(d,a),f(c,a),e(b,a))}function e(a,b){return a.map(b.factory.spanRemoveCommand)}function f(a,b){return b.factory.entityRemoveCommand(a)}function g(a,b){return a.map(b.factory.relationRemoveCommand)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=b.span.all(),e=b.entity.all(),f=b.relation.all();return d(a,c,e,f)},b.exports=c["default"]},{}],310:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./RemoveCommandsFromSelection"),f=d(e);c["default"]=function(a,b,c){var d=c.selectRightFunc(),e=new f["default"](a,b);a.invoke(e),d()},b.exports=c["default"]},{"./RemoveCommandsFromSelection":309,"babel-runtime/helpers/interop-require-default":18}],311:[function(a,b,c){"use strict";var d=function(a,b){return a["boundary-detection"].value()?b.isDelimiter:null},e=function(a,b,c,e,f,g){var h=d(c,e);f?a.invoke([a.factory.spanReplicateCommand(g.getDefaultType(),b.span.get(f),h)]):alert("You can replicate span annotation when there is only span selected.")};b.exports=e},{}],312:[function(a,b,c){"use strict";var d=function(a,b){return a.pred===b},e=function(a,b,c){return a.getModificationOf(b).filter(function(a){return d(a,c)})},f=function(a,b,c,d){return d.getSelectedIdEditable().map(function(d){var f=e(b,d,c)[0];return a.factory.modificationRemoveCommand(f.id)})},g=function(a,b,c,d){return _.reject(d.getSelectedIdEditable(),function(a){return e(b,a,c).length>0}).map(function(b){return a.factory.modificationCreateCommand({obj:b,pred:c})})},h=function(a,b,c,d,e){return e?f(a,b,c,d):g(a,b,c,d)},i=function(a,b,c,d,e){var f=c[d.toLowerCase()].value(),g=h(a,b,d,e,f);a.invoke(g)};b.exports=i},{}],313:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/assign")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../../component/SettingDialog"),g=e(f),h=a("./TypeEditor"),i=e(h),j=a("./EditMode"),k=e(j),l=a("./DisplayInstance"),m=e(l),n=a("./setDefaultEditability"),o=e(n),p=a("./handlers/ClipBoardHandler"),q=e(p),r=a("./handlers/DefaultEntityHandler"),s=e(r),t=a("./handlers/removeSelectedElements"),u=e(t),v=a("./handlers/ModificationHandler"),w=e(v),x=a("./handlers/SelectHandler"),y=e(x),z=a("./handlers/ToggleButtonHandler"),A=e(z),B=a("./handlers/ModeButtonHandlers"),C=e(B),D=a("./enableSaveButtorAtEditable"),E=e(D);c["default"]=function(a,b,c,e,f,h,j,l,n,p,r){var t=new i["default"](a,b,f,e,j.modeAccordingToButton,n,r),v=new k["default"](a,b,t,j.buttonStateHelper),x=new m["default"](l,v),z=new s["default"](e,b.annotationData,b.selectionModel,j.modeAccordingToButton,f,n.entity),B=new q["default"](e,b.annotationData,b.selectionModel,h),D=new w["default"](e,b.annotationData,j.modeAccordingToButton,t),F=new A["default"](j.modeAccordingToButton,v),G=new C["default"](v),H=new y["default"](a,b.selectionModel),I=new g["default"](a,x),J=function(){t.hideDialogs(),a.eventEmitter.emit("textae.editor.select"),j.buttonStateHelper.propagate()},K={editorSelected:J,copyEntities:B.copyEntities,removeSelectedElements:function(){return(0,u["default"])(e,b.selectionModel,H)},createEntity:z.createEntity,showPallet:t.showPallet,replicate:z.replicate,pasteEntities:B.pasteEntities,changeLabel:t.changeLabel,cancelSelect:t.cancelSelect,negation:D.negation,speculation:D.speculation,showSettingDialog:I};return d(K,H),d(K,F),d(K,G),(0,E["default"])(p,v,j),{init:function(c){a.on("textae.editor.jsPlumbConnection.add",function(a,b){b.bindClickAction(t.jsPlumbConnectionClicked)}),z.on("createEntity",x.notifyNewInstance),(0,o["default"])(b.annotationData,v,p,c)},event:K}},b.exports=c["default"]},{"../../../component/SettingDialog":173,"./DisplayInstance":260,"./EditMode":268,"./TypeEditor":296,"./enableSaveButtorAtEditable":298,"./handlers/ClipBoardHandler":299,"./handlers/DefaultEntityHandler":300,"./handlers/ModeButtonHandlers":301,"./handlers/ModificationHandler":302,"./handlers/SelectHandler":303,"./handlers/ToggleButtonHandler":307,"./handlers/removeSelectedElements":310,"./setDefaultEditability":317,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],314:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return!a.relation.some()&&0===a.span.multiEntities().length},b.exports=c["default"]},{}],315:[function(a,b,c){"use strict";function d(a,b,c){a.modeAccordingToButton.view.value(e(b)),a.modeAccordingToButton.term.value(f(b,c)),a.modeAccordingToButton.relation.value(g(c)),a.modeAccordingToButton.simple.value(h(c)),a.buttonStateHelper.enabled("simple",!g(c)),a.buttonStateHelper.enabled("replicate-auto",i(b,c)),a.buttonStateHelper.enabled("boundary-detection",i(b,c)),a.buttonStateHelper.enabled("line-height",b)}function e(a){return!a}function f(a,b){return a&&("term"===b||"instance"===b)}function g(a){return"relation"===a}function h(a){return"term"===a}function i(a,b){return a&&"relation"!==b}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],316:[function(a,b,c){"use strict";function d(a,b){(0,h["default"])(b)?a.toTerm():a.toInstance()}function e(a,b){(0,h["default"])(b)?a.toViewTerm():a.toViewInstance()}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.forEditable=d,c.forView=e;var g=a("../isSimple"),h=f(g)},{"../isSimple":314,"babel-runtime/helpers/interop-require-default":18}],317:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./changeView"),g=d(f),h=a("./showLoadNoticeForEditableMode"),i=e(h),j=a("./updateWritable"),k=e(j);c["default"]=function(a,b,c,d){a.on("all.change",function(a,b,d){return(0,k["default"])(b,d,c)});var e="edit"===d;if(e){var f=function(a,b,c){return(0,i["default"])(b)};a.on("all.change",f).on("all.change",function(a){return g.forEditable(b,a)})}else a.on("all.change",function(a){return g.forView(b,a)})},b.exports=c["default"]},{"./changeView":316,"./showLoadNoticeForEditableMode":318,"./updateWritable":319,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],318:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){a&&toastr.success("track annotations have been merged to root annotations.")},b.exports=c["default"]},{}],319:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("../../../Model/AnnotationData/parseAnnotation/validateAnnotation");c["default"]=function(a,b,c){c.forceModified(!1),a&&c.forceModified(!0),(0,d.hasError)(b)&&c.forceModified(!0)},b.exports=c["default"]},{"../../../Model/AnnotationData/parseAnnotation/validateAnnotation":221}],320:[function(a,b,c){"use strict";var d=a("./skipBlank");b.exports={backFromBegin:function(a,b,c){return d.forward(a,b,c.isBlankCharacter)},forwardFromEnd:function(a,b,c){return d.back(a,b,c.isBlankCharacter)},forwardFromBegin:function(a,b,c){return d.forward(a,b,c.isBlankCharacter)},backFromEnd:function(a,b,c){return d.back(a,b,c.isBlankCharacter)}}},{"./skipBlank":322}],321:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./skipCharacters"),f=d(e),g=a("./skipBlank"),h=d(g),i=function(a,b){return[a.charAt(b),a.charAt(b-1)]},j=function(a,b){return[a.charAt(b),a.charAt(b+1)]},k=function(a,b,c){return(0,f["default"])(i,-1,a,b,function(a){return a[1]&&!c(a[0])&&!c(a[1])})},l=function(a,b,c){return(0,f["default"])(j,1,a,b,function(a){return a[1]&&!c(a[0])&&!c(a[1])})},m=function(a,b,c){return""!==c[0]&&!a(c[1])&&!b(c[1])||b(c[0])},n=function(a,b,c){return(0,f["default"])(i,1,a,b,c)},o=function(a,b,c){return(0,f["default"])(j,-1,a,b,c)},p=function(a,b,c){var d=h["default"].forward(a,b,c.isBlankCharacter),e=k(a,d,c.isDelimiter);return e},q=function(a,b,c){var d=h["default"].back(a,b,c.isBlankCharacter),e=l(a,d,c.isDelimiter);return e},r=function(a,b,c){var d=_.partial(m,c.isBlankCharacter,c.isDelimiter);return n(a,b,d)},s=function(a,b,c){var d=_.partial(m,c.isBlankCharacter,c.isDelimiter);return o(a,b,d)};b.exports={backFromBegin:p,forwardFromEnd:q,forwardFromBegin:r,backFromEnd:s}},{"./skipBlank":322,"./skipCharacters":323,"babel-runtime/helpers/interop-require-default":18}],322:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./skipCharacters"),f=d(e),g=function(a,b){return a.charAt(b)},h=function(a,b,c){return(0,f["default"])(g,1,a,b,c)},i=function(a,b,c){return(0,f["default"])(g,-1,a,b,c)};b.exports={forward:h,back:i}},{"./skipCharacters":323,"babel-runtime/helpers/interop-require-default":18}],323:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){for(;e(a(c,d));)d+=b;return d}},{}],324:[function(a,b,c){"use strict";var d={"delimiter characters":[" ",".","!","?",",",":",";","-","/","&","(",")","{","}","[","]","+","*","\\",'"',"'","\n","–"],"non-edge characters":[" ","\n"]};b.exports=function(){var a=[],b=[],c=function(c){var e=_.extend({},d,c);return a=e["delimiter characters"],b=e["non-edge characters"],c},e=_.partial(c,d),f=function(b){return a.indexOf("ANY")>=0?1:a.indexOf(b)>=0},g=function(a){return b.indexOf(a)>=0},h=function(a){return b.forEach(function(b){a=a.replace(b,"")}),a};return{reset:e,set:c,isDelimiter:f,isBlankCharacter:g,removeBlankChractors:h}}},{}],325:[function(a,b,c){"use strict";function d(a,b){if(a){var c=function(){var c=a().concat(h(b.keys())).reduce(function(a,b){
return a[b]=a[b]?a[b]+1:1,a},{}),d=i(c);return d.sort(function(a,b){var d=c[b]-c[a];return 0!==d?d:a>b?1:a>b?-1:0}),{v:d}}();if("object"==typeof c)return c.v}return[]}var e=a("babel-runtime/core-js/map")["default"],f=a("babel-runtime/core-js/object/assign")["default"],g=a("babel-runtime/core-js/get-iterator")["default"],h=a("babel-runtime/core-js/array/from")["default"],i=a("babel-runtime/core-js/object/keys")["default"],j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var k=a("events"),l=a("./defaultType"),m=j(l),n=a("../../uri"),o=j(n);c["default"]=function(a,b){var c=new e,h=m["default"],i=new k.EventEmitter,j={setDefinedType:function(a){c.set(a.id,a),i.emit("type.change",a.id)},setDefinedTypes:function(a){return c=new e(a.reduce(function(a,b){return a.push([b.id,b]),a},[]))},getDefinedType:function(a){return f({},c.get(a))},getDefinedTypes:function(){var a=[],b=!0,d=!1,e=void 0;try{for(var f,h=g(c.keys());!(b=(f=h.next()).done);b=!0){var i=f.value;a.push(c.get(i))}}catch(j){d=!0,e=j}finally{try{!b&&h["return"]&&h["return"]()}finally{if(d)throw e}}return a},setDefaultType:function(a){console.assert(a,"id is necessary!"),h=a},getDefaultType:function(){return h||d()[0]},getColor:function(a){return c.get(a)&&c.get(a).color||b},getLabel:function(a){return c.get(a)&&c.get(a).label||void 0},getUri:function(a){return o["default"].getUrlMatches(a)?a:void 0},getSortedIds:function(){return d(a,c)},remove:function(a){c["delete"](a),i.emit("type.change",a)}};return f(i,j)},b.exports=c["default"]},{"../../uri":396,"./defaultType":326,"babel-runtime/core-js/array/from":2,"babel-runtime/core-js/get-iterator":3,"babel-runtime/core-js/map":5,"babel-runtime/core-js/object/assign":6,"babel-runtime/core-js/object/keys":10,"babel-runtime/helpers/interop-require-default":18,events:110}],326:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]="something",b.exports=c["default"]},{}],327:[function(a,b,c){"use strict";function d(a,b){if(void 0!==b){a.setDefinedTypes(b);var c=b.filter(function(a){return a["default"]===!0}).map(function(a){return a.id}).shift();a.setDefaultType(c||h["default"])}}var e=a("babel-runtime/core-js/object/assign")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./defaultType"),h=f(g),i=a("./Container"),j=f(i);c["default"]=function(a){var b=e(new j["default"](a.annotationData.entity.types,"#77DDDD"),{isBlock:function(a){var c=b.getDefinedType(a);return c&&c.type&&"block"===c.type}}),c=new j["default"](a.annotationData.relation.types,"#555555");return{entity:b,setDefinedEntityTypes:function(a){return d(b,a)},relation:c,setDefinedRelationTypes:function(a){return d(c,a)},getConfig:function(){return{"entity types":b.getDefinedTypes(),"relation types":c.getDefinedTypes()}}}},b.exports=c["default"]},{"./Container":325,"./defaultType":326,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18}],328:[function(a,b,c){"use strict";function d(a){return e.all(a.filter(function(a){return a.render}).map(function(a){return a.render()}))}var e=a("babel-runtime/core-js/promise")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./GridLayout"),h=f(g),i=a("events");c["default"]=function(a,b,c,e){var f=new i.EventEmitter,g=new h["default"](a,b,c),j=function(c){f.emit("render.start",a),_.defer(function(){return g.arrangePosition(c).then(function(){return d(b.relation.all())}).then(e).then(function(){return f.emit("render.end",a)})["catch"](function(a){return console.error(a,a.stack)})})};return _.extend(f,{update:j})},b.exports=c["default"]},{"./GridLayout":338,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18,events:110}],329:[function(a,b,c){"use strict";function d(a,b){var c=new j["default"];return e(a,c),function(a){return f(c,b,a)}}function e(a,b){a.push(b)}function f(a,b,c){return a.has(c)||a.set(c,b(c)),a.get(c)}function g(a){a.forEach(function(a){return a.clear()})}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./LesserMap"),j=h(i);c["default"]=function(){var a=[],b=function(b){return d(a,b)};return b.clearAllCache=function(){return g(a)},b},b.exports=c["default"]},{"./LesserMap":331,"babel-runtime/helpers/interop-require-default":18}],330:[function(a,b,c){"use strict";function d(a,b,c){var d=a.get(c).span;return b.get(d)}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./LesserMap"),g=e(f);c["default"]=function(a){var b=new g["default"];return _.extend(b,{isGridPrepared:function(c){return d(a,b,c)}})},b.exports=c["default"]},{"./LesserMap":331,"babel-runtime/helpers/interop-require-default":18}],331:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=["set","get","has","keys","delete","clear"];c["default"]=function(){var a=new d,b=e.reduce(function(b,c){return b[c]=d.prototype[c].bind(a),b},{});return b},b.exports=c["default"]},{"babel-runtime/core-js/map":5}],332:[function(a,b,c){"use strict";function d(a,b){var c=a[0].querySelector("#"+b);if(!c)throw new Error("span is not renderd : "+b);var d=c.getBoundingClientRect(),e=c.offsetParent.offsetParent.getBoundingClientRect();return{top:d.top-e.top,left:d.left-e.left,width:c.offsetWidth,height:c.offsetHeight,center:c.offsetLeft+c.offsetWidth/2}}function e(a,b,c,d){var e=(0,j["default"])(a[0],d);if(!e)throw new Error("entity is not rendered : "+d);var f=b.get(d).span,g=c.get(f);return{top:g.top+e.offsetTop,center:g.left+e.offsetLeft+e.offsetWidth/2}}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./CachedGetterFactory"),h=f(g),i=a("../../getEntityDom"),j=f(i),k=new h["default"];c["default"]=function(a,b,c){var f=k(function(b){return d(a,b)}),g=k(function(d){return e(a,b,c,d)});return{reset:k.clearAllCache,getSpan:f,getEntity:g}},b.exports=c["default"]},{"../../getEntityDom":391,"./CachedGetterFactory":329,"babel-runtime/helpers/interop-require-default":18}],333:[function(a,b,c){"use strict";function d(a,b){var c=new i["default"](b),d=new k["default"](a,b,c),g=new e(c),h=new f;return _.extend(d,g,h)}function e(a){return{gridPositionCache:a,getGrid:a.get,setGrid:a.set}}function f(){var a=new m["default"],b={connectCache:a,toConnect:function(b){return a.get(b)}};return b}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./GridPosition"),i=g(h),j=a("./SpanAndEntityPosition"),k=g(j),l=a("./LesserMap"),m=g(l);c["default"]=function(a,b){return a.postionCache=a.postionCache||d(a,b),a.postionCache},b.exports=c["default"]},{"./GridPosition":330,"./LesserMap":331,"./SpanAndEntityPosition":332,"babel-runtime/helpers/interop-require-default":18}],334:[function(a,b,c){"use strict";function d(a,b){return a&&a.top===b.top&&a.left===b.left?null:b}function e(a,b){var c=(0,k["default"])(a.id);c&&(c.style.top=b.top+"px",c.style.left=b.left+"px")}function f(a,b,c){a.setGrid(b.id,c)}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./getGridPosition"),i=g(h),j=a("./getGridOfSpan"),k=g(j),l=a("./showInvisibleGrid"),m=g(l);c["default"]=function(a,b,c,g,h){if(g.span.get(h.id)){var j=(0,i["default"])(a.getSpan,b,c,h);null!==d(a.getGrid(h.id),j)&&(e(h,j),f(a,h,j),(0,m["default"])(h))}},b.exports=c["default"]},{"./getGridOfSpan":336,"./getGridPosition":337,"./showInvisibleGrid":339,"babel-runtime/helpers/interop-require-default":18}],335:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("bluebird"),f=d(e),g=a("./arrangeGridPosition"),h=d(g);c["default"]=function(a,b,c,d,e){return new f["default"](function(f,g){requestAnimationFrame(function(){try{(0,h["default"])(a,b,c,d,e),f()}catch(i){console.error(i,i.stack),g()}})})},b.exports=c["default"]},{"./arrangeGridPosition":334,"babel-runtime/helpers/interop-require-default":18,bluebird:22}],336:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return document.querySelector("#G"+a)},b.exports=c["default"]},{}],337:[function(a,b,c){"use strict";function d(a,b){var c=a(b.id);return{top:c.top-$((0,j["default"])(b.id)).outerHeight(),left:c.left}}function e(a,b,c,d){var e=a(d.id),f=(0,h["default"])(d,b,c);return{top:e.top-f,left:e.left}}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../getHeightIncludeDescendantGrids"),h=f(g),i=a("./getGridOfSpan"),j=f(i);c["default"]=function(a,b,c,f){return 0===f.children.length?d(a,f):e(a,b,c,f)},b.exports=c["default"]},{"../getHeightIncludeDescendantGrids":384,"./getGridOfSpan":336,"babel-runtime/helpers/interop-require-default":18}],338:[function(a,b,c){"use strict";function d(a,b,c,d){return d.span.all().filter(function(a){return a.getTypes().length>0}).map(function(b){return a.getSpan(b.id),b}).map(function(e){return(0,j["default"])(a,b,c,d,e)})}var e=a("babel-runtime/core-js/promise")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../DomPositionCache"),h=f(g),i=a("./arrangeGridPositionPromise"),j=f(i);c["default"]=function(a,b,c){var f=new h["default"](a,b.entity),g=function(a){return f.reset(),e.all(d(f,c,a,b))};return{arrangePosition:g}},b.exports=c["default"]},{"../DomPositionCache":333,"./arrangeGridPositionPromise":335,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/interop-require-default":18}],339:[function(a,b,c){"use strict";function d(a){var b=(0,i["default"])(a.id);e(b)&&f(b)}function e(a){return a&&a.classList.contains("hidden")?a:void 0}function f(a){a.classList.remove("hidden")}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var h=a("./getGridOfSpan"),i=g(h);b.exports=c["default"]},{"./getGridOfSpan":336,"babel-runtime/helpers/interop-require-default":18}],340:[function(a,b,c){"use strict";function d(a,b,c,d){a.assosicatedRelations(d).map(b.toConnect).filter(function(a){return a.pointup&&a.pointdown}).forEach(c)}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./DomPositionCache"),g=e(f);c["default"]=function(a,b){var c=new g["default"](a,b);return{on:_.partial(d,b,c,function(a){return a.pointup()}),off:_.partial(d,b,c,function(a){return a.pointdown()})}},b.exports=c["default"]},{"./DomPositionCache":333,"babel-runtime/helpers/interop-require-default":18}],341:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=a.offsetWidth,c=Array.prototype.map.call(a.children,function(a){return a.offsetWidth}).reduce(function(a,b){return a+b},0);c>b?a.style.left=(b-c)/2+"px":a.style.left=null},b.exports=c["default"]},{}],342:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../Selector"),f=d(e),g=a("./createEntityUnlessBlock"),h=d(g),i=a("./removeEntityElement"),j=d(i),k=a("./removeNoEntityPaneElement"),l=d(k);c["default"]=function(a,b,c,d,e,g){var i=new f["default"](a,b),k=(0,j["default"])(a,g.id);(0,h["default"])(a,b.annotationData.namespace,c,d,e,g),(0,l["default"])(k),b.selectionModel.entity.has(g.id)&&(i.entity.select(g.id),i.entityLabel.update(g.id))},b.exports=c["default"]},{"../../Selector":381,"./createEntityUnlessBlock":345,"./removeEntityElement":349,"./removeNoEntityPaneElement":350,"babel-runtime/helpers/interop-require-default":18}],343:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../idFactory"),f=d(e),g=a("./getTypeElement"),h=d(g),i=a("./arrangePositionOfPane"),j=d(i),k=a("./createEntityElement"),l=d(k);c["default"]=function(a,b,c,d,e,g){g.type=String(g.type);var i=(0,h["default"])(b,c,d,g.span,g.type).find(".textae-editor__entity-pane"),k=f["default"].makeEntityDomId(a,g.id);0===i.find("#"+k).length&&(i.append((0,l["default"])(a,c,e,g)),(0,j["default"])(i[0]))},b.exports=c["default"]},{"../../../../idFactory":236,"./arrangePositionOfPane":341,"./createEntityElement":344,"./getTypeElement":347,"babel-runtime/helpers/interop-require-default":18}],344:[function(a,b,c){"use strict";function d(a,b,c,d){var e=document.createElement("div");return e.setAttribute("id",g["default"].makeEntityDomId(a,d.id)),e.setAttribute("title",d.id),e.setAttribute("type",d.type),e.classList.add("textae-editor__entity"),e.style.borderColor=b.getColor(d.type),c.getClasses(d.id).forEach(function(a){e.classList.add(a)}),e}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("../../../../idFactory"),g=e(f);b.exports=c["default"]},{"../../../../idFactory":236,"babel-runtime/helpers/interop-require-default":18}],345:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./create"),f=d(e);c["default"]=function(a,b,c,d,e,g){c.isBlock(g.type)||(0,f["default"])(a,b,c,d,e,g)},b.exports=c["default"]},{"./create":343,"babel-runtime/helpers/interop-require-default":18}],346:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../../uri"),f=d(e);c["default"]=function(a){if(f["default"].isUri(a)){var b=f["default"].getUrlMatches(a);if(b)return b[9]?b[9].slice(1):b[6]?b[6]+(b[7]||""):b[5]&&b[5].length>1?b[5].split("/").filter(function(a){return""!==a}).pop():b[3]}return a},b.exports=c["default"]},{"../../../../uri":396,"babel-runtime/helpers/interop-require-default":18}],347:[function(a,b,c){"use strict";function d(a,b,c,d){var e=h["default"].makeTypeId(c,d),f=$("<div>").attr("id","P-"+e).addClass("textae-editor__entity-pane"),g=$("<div>").addClass("textae-editor__type-label").css({"background-color":b.getColor(d)});return g[0].setAttribute("tabindex",0),(0,l["default"])(g[0],a,b,d),$("<div>").attr("id",e).addClass("textae-editor__type").append(g).append(f)}function e(a,b){var c=document.querySelector("#G"+b);return c||a.render(b)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("../../../../idFactory"),h=f(g),i=a("../getTypeDom"),j=f(i),k=a("./setLabelToTypeLabel"),l=f(k);c["default"]=function(a,b,c,f,g){var h=(0,j["default"])(f,g);return 0===h.length&&(h=d(a,b,f,g),e(c,f).appendChild(h[0])),h},b.exports=c["default"]},{"../../../../idFactory":236,"../getTypeDom":376,"./setLabelToTypeLabel":351,"babel-runtime/helpers/interop-require-default":18}],348:[function(a,b,c){"use strict";function d(a,b,c,d){if(f(b.annotationData,d.span))c.remove(d.span);else{var e=(0,u["default"])(a,d.id);(0,w["default"])(e)}return d}function e(a,b,c){var d=(0,n["default"])(a[0],c.id);b.update(d,c.id)}function f(a,b){return 0===a.span.get(b).getTypes().length}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("../ModificationRenderer"),i=g(h),j=a("./getDisplayName"),k=(g(j),a("../../../../uri")),l=(g(k),a("../../../../idFactory")),m=(g(l),a("../../../getEntityDom")),n=g(m),o=a("../../Selector"),p=(g(o),a("./createEntityUnlessBlock")),q=g(p),r=a("./changeTypeOfExists"),s=g(r),t=a("./removeEntityElement"),u=g(t),v=a("./removeNoEntityPaneElement"),w=g(v),x=a("./updateLabel"),y=g(x);c["default"]=function(a,b,c,f,g){var h=new i["default"](b.annotationData);return{render:function(d){(0,q["default"])(a,b.annotationData.namespace,c,f,h,d),g(d)},change:function(d){(0,s["default"])(a,b,c,f,h,d),g(d)},changeModification:function(b){return e(a,h,b)},remove:function(c){return d(a,b,f,c)},updateLabel:function(a){return(0,y["default"])(b.annotationData,c,a)}}},b.exports=c["default"]},{"../../../../idFactory":236,"../../../../uri":396,"../../../getEntityDom":391,"../../Selector":381,"../ModificationRenderer":355,"./changeTypeOfExists":342,"./createEntityUnlessBlock":345,"./getDisplayName":346,"./removeEntityElement":349,"./removeNoEntityPaneElement":350,"./updateLabel":352,"babel-runtime/helpers/interop-require-default":18}],349:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../getEntityDom"),f=d(e);c["default"]=function(a,b){var c=(0,f["default"])(a[0],b);if(c){var d=c.parentNode;return c.remove(),d}return null},b.exports=c["default"]},{"../../../getEntityDom":391,"babel-runtime/helpers/interop-require-default":18}],350:[function(a,b,c){"use strict";function d(a){if(a)if(a.children.length)(0,g["default"])(a);else{var b=a.parentNode,c=b.parentNode;b.remove(),c.children.length||c.remove()}}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=a("./arrangePositionOfPane"),g=e(f);b.exports=c["default"]},{"./arrangePositionOfPane":341,"babel-runtime/helpers/interop-require-default":18}],351:[function(a,b,c){"use strict";function d(a,b,c,d){var g=e(b,c,d),h=f(b,c,d);h?a.innerHTML='<a target="_blank"/ href="'+h+'">'+g+"</a>":a.innerHTML=g}function e(a,b,c){var d=g(a,c);return b.getLabel(c)?b.getLabel(c):j["default"].isUri(c)?(0,l["default"])(c):d?c.replace(d.prefix+":",""):c}function f(a,b,c){if(j["default"].isUri(c))return c;if(b.getUri(c))return b.getUri(c);if(a.some()){var d=g(a,c);if(d)return d.uri+c.replace(d.prefix+":","");var e=a.all().filter(function(a){return"_base"===a.prefix});if(1===e.length)return e[0].uri+c}return null}function g(a,b){var c=a.all(),d=c.filter(function(a){return"_base"!==a.prefix}).filter(function(a){return 0===b.indexOf(a.prefix+":")});return 1===d.length?d[0]:null}var h=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var i=a("../../../../uri"),j=h(i),k=a("./getDisplayName"),l=h(k);b.exports=c["default"]},{"../../../../uri":396,"./getDisplayName":346,"babel-runtime/helpers/interop-require-default":18}],352:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../getTypeDom"),f=d(e),g=a("./setLabelToTypeLabel"),h=d(g);c["default"]=function(a,b,c){a.entity.all().filter(function(a){return a.type===c}).map(function(a){return(0,f["default"])(a.span,c)}).map(function(a){return a.find(".textae-editor__type-label")}).forEach(function(d){return(0,h["default"])(d[0],a.namespace,b,c)})},b.exports=c["default"]},{"../getTypeDom":376,"./setLabelToTypeLabel":351,"babel-runtime/helpers/interop-require-default":18}],353:[function(a,b,c){"use strict";function d(a,b,c,d){var e=b.getSpan(d),f=document.createElement("div");f.setAttribute("id","G"+d),f.classList.add("textae-editor__grid"),f.classList.add("hidden"),f.style.width=e.width+"px";var g=(0,h.getRightElement)(a,document.querySelector("#"+d));return g?c.insertBefore(f,document.querySelector("#G"+g.id)):c.appendChild(f),f}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./getAnnotationBox"),g=e(f),h=a("../../getNextElement");c["default"]=function(a,b){var c=(0,g["default"])(a);return{render:function(e){return d(a[0],b,c[0],e)},remove:function(a){var c=document.querySelector("#G"+a);c&&c.parentNode.removeChild(c),b.gridPositionCache["delete"](a)}}},b.exports=c["default"]},{"../../getNextElement":392,"./getAnnotationBox":373,"babel-runtime/helpers/interop-require-default":18}],354:[function(a,b,c){"use strict";function d(a){return a.id}function e(a,b,c,d){b.on(c,function(b){d(b),a.emit(c)})}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./renderParagraph"),h=f(g),i=a("./getAnnotationBox"),j=(f(i),a("./RenderAll")),k=f(j),l=a("./renderModification"),m=f(l),n=a("events"),o=a("../TypeStyle"),p=f(o),q=a("./SpanRenderer"),r=f(q),s=a("./GridRenderer"),t=f(s),u=a("./EntityRenderer"),v=f(u),w=a("./getTypeDom"),x=f(w);c["default"]=function(a,b,c,f,g,i,j){var l=new n.EventEmitter,o=new t["default"](g,a),q=function(a){return(0,x["default"])(a.span,a.type).css(new p["default"](f()))},s=new v["default"](g,i,j.entity,o,q),u=new r["default"](i.annotationData,j.entity.isBlock,s.render);return function(f,g,i){var n=new k["default"](f,a,u,b),p=function(a){var b=g.span.get(a.span);return u.change(b)},q=function(a){(0,m["default"])(g,"relation",a,b,c),(0,m["default"])(g,"entity",a,s,c)},r=[["all.change",function(a){n(a),i.clear()}],["paragraph.change",function(a){return(0,h["default"])(f,a)}],["span.add",u.render],["span.remove",function(a){u.remove(a),o.remove(a.id),i.span.remove(d(a))}],["entity.add",function(a){p(a),s.render(a)}],["entity.change",function(a){s.change(a),p(a)}],["entity.remove",function(a){s.remove(a),p(a),i.entity.remove(d(a))}],["relation.add",function(a){b.render(a),l.emit("relation.add",a)}],["relation.change",b.change],["relation.remove",function(a){b.remove(a),i.relation.remove(d(a))}],["modification.add",q],["modification.remove",q]];return r.forEach(function(a){return e(l,g,a[0],a[1])}),j.entity.on("type.change",function(a){return s.updateLabel(a)}),l}},b.exports=c["default"]},{"../TypeStyle":383,"./EntityRenderer":348,"./GridRenderer":353,"./RenderAll":361,"./SpanRenderer":369,"./getAnnotationBox":373,"./getTypeDom":376,"./renderModification":378,"./renderParagraph":379,"babel-runtime/helpers/interop-require-default":18,events:110}],355:[function(a,b,c){"use strict";function d(a,b){return a.getModificationOf(b).map(function(a){return"textae-editor__"+a.pred.toLowerCase()})}function e(a,b,c){b.classList.remove("textae-editor__negation"),b.classList.remove("textae-editor__speculation"),d(a,c).forEach(function(a){return b.classList.add(a)})}Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a){return{getClasses:function(b){return d(a,b)},update:function(b,c){return e(a,b,c)}}},b.exports=c["default"]},{}],356:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../DomPositionCache"),f=d(e);c["default"]=function(a,b,c){var d=new f["default"](a,b.entity),e=d.toConnect(c);if(!e)throw new Error("no connect for id: "+c);return e},b.exports=c["default"]},{"../../DomPositionCache":333,"babel-runtime/helpers/interop-require-default":18}],357:[function(a,b,c){"use strict";function d(a,b,c){c.map(function(c){return new j["default"](a,b,c)}).filter(function(a){return a instanceof jsPlumb.Connection}).forEach(function(a){return a.select()})}function e(a,b,c){c.map(function(c){return{connect:new j["default"](a,b,c.id),curviness:(0,l["default"])(a,b,c)}}).filter(function(a){return a.connect.setConnector&&a.connect.connector.getCurviness()!==a.curviness}).forEach(function(a){a.connect.setConnector(["Bezier",{curviness:a.curviness}]),n["default"].resetArrows(a.connect)})}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("bluebird"),h=f(g),i=a("./Connect"),j=f(i),k=a("./determineCurviness"),l=f(k),m=a("./jsPlumbArrowOverlayUtil"),n=f(m);c["default"]=function(a,b,c){return new h["default"](function(f,g){_.defer(function(){try{var h=b.annotationData.relation.all().filter(function(a){return!a.removed});e(a,b.annotationData,h),c.repaintEverything(),d(a,b.annotationData,b.selectionModel.relation.all()),f()}catch(i){g(i)}})})},b.exports=c["default"]},{"./Connect":356,"./determineCurviness":358,"./jsPlumbArrowOverlayUtil":360,"babel-runtime/helpers/interop-require-default":18,bluebird:22}],358:[function(a,b,c){"use strict";function d(a){return{sourceId:a.subj,targetId:a.obj}}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../DomPositionCache"),g=e(f),h={xrate:.6,yrate:.05,offset:20};c["default"]=function(a,b,c){var e=new g["default"](a,b.entity),f=d(c),i=e.getEntity(f.sourceId),j=e.getEntity(f.targetId),k=i.center,l=j.center,m=i.top,n=j.top,o=Math.abs(k-l),p=Math.abs(m-n),q=o*h.xrate+p*h.yrate+h.offset;return q/=2.4},b.exports=c["default"]},{"../../DomPositionCache":333,"babel-runtime/helpers/interop-require-default":18}],359:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("bluebird"),f=d(e),g=a("../ModificationRenderer"),h=d(g),i=a("../getAnnotationBox"),j=d(i),k=a("../../DomPositionCache"),l=d(k),m=a("./Connect"),n=d(m),o=a("./arrangePositionAll"),p=d(o),q=a("./determineCurviness"),r=d(q),s=a("./jsPlumbArrowOverlayUtil"),t=d(s),u=a("../../../getEntityDom"),v=d(u),w=3,x={cssClass:"textae-editor__relation__label",id:"label"},y=function(a){var b=jsPlumb.getInstance({ConnectionsDetachable:!1,Endpoint:["Dot",{radius:1}]});return b.setRenderMode(b.SVG),b.Defaults.Container=a,b},z=function(a){var b=a.getOverlay(x.id);if(!b)throw new Error("no label overlay");return b};b.exports=function(a,b,c){var d,e=new h["default"](b.annotationData),g=new l["default"](a,b.annotationData.entity),i=function(){var a=function(a,b){var c=a.slice(1),d=parseInt(c.substr(0,2),16),e=parseInt(c.substr(2,2),16),f=parseInt(c.substr(4,2),16);return"rgba("+d+", "+e+", "+f+", 1)"};return function(d){var e=b.annotationData.relation.get(d).type,f=c.relation.getColor(e);return{lineWidth:1,strokeStyle:a(f,1)}}}(),k=function(c){var d=c.relationId,e=new l["default"](a,b.annotationData.entity);return e.connectCache.set(d,c),c},m=function(c){if(b.annotationData.relation.get(c)){var d=new l["default"](a,b.annotationData.entity),e=b.annotationData.relation.get(c);return d.gridPositionCache.isGridPrepared(e.subj)&&d.gridPositionCache.isGridPrepared(e.obj)}},o=function(a){return m(a.relationId)?a:void 0},q=function(){var c=function(a){return delete a.render,a},f=function(c){return d.connect({source:$((0,v["default"])(a[0],c.subj)),target:$((0,v["default"])(a[0],c.obj)),anchors:["TopCenter","TopCenter"],connector:["Bezier",{curviness:(0,r["default"])(a,b.annotationData,c)}],paintStyle:new i(c.id),parameters:{id:c.id},cssClass:"textae-editor__relation",overlays:[["Arrow",t["default"].NORMAL_ARROW],["Label",_.extend({},x,{label:"["+c.id+"] "+c.type,cssClass:x.cssClass+" "+e.getClasses(c.id).join(" ")})]]})},g=function(a){return _.extend(f(a),{relationId:a.id})},h=function(){var a=function(){var a=function(a){return new z(a).addClass("hover"),a},b=function(a){return new z(a).removeClass("hover"),a},c=function(a){return new z(a).addClass("ui-selected"),a},d=function(a){return new z(a).removeClass("ui-selected"),a},e=function(a){return a.addClass("hover"),a},f=function(a){return a.removeClass("hover"),a},g=function(a){return a.addClass("ui-selected"),a},h=function(a){return a.removeClass("ui-selected"),a},j=function(a,b){return a.connector.canvas.classList.contains(b)},k=function(a,b,c){return function(){b(a)||c(a)}},l=function(a,b){return b.setPaintStyle(_.extend(a(),{lineWidth:w})),b},m=function(a,b){return b.setPaintStyle(a()),b};return function(n,o){var p=_.partial(i,n),q=_.partial(l,p),r=_.partial(m,p),s=_.partial(k,o,function(a){return j(a,"ui-selected")}),u=_.partial(k,o,function(a){return a.dead}),v=_.compose(e,a,q,t["default"].showBigArrow),w=_.compose(f,b,r,t["default"].hideBigArrow),x=_.compose(g,c,f,b,q,t["default"].showBigArrow),y=_.compose(h,d,r,t["default"].hideBigArrow);return{pointup:s(v),pointdown:s(w),select:u(x),deselect:u(y)}}}();return function(b){var c=b.relationId;return _.extend(b,new a(c,b))}}(),j=function(){var a=function(a,b,c){a.bind("mouseenter",b).bind("mouseexit",c)},b=function(a){a.pointup()},c=function(a){a.pointdown()},d=function(a){return a.component},e=function(d){return a(d,b,c),d},f=function(e){return a(new z(e),_.compose(b,d),_.compose(c,d)),e};return _.compose(f,e)}(),l=function(){var a=function(a){var b=function(a){this.bind("click",a),this.getOverlay(x.id).bind("click",function(b,c){a(b.component,c)})};return _.extend({bindClickAction:b})};return function(b){return _.extend(b,new a(b))}}(),m=function(b){return a.trigger("textae.editor.jsPlumbConnection.add",b),b};return _.compose(k,m,l,j,h,g,c)}(),s=function(){var a=function(a){return _.extend(a,{relationId:a.id})},b=function(a){o(a)&&q(a)},c=function(a){var c=function(){return new f["default"](function(c,d){_.defer(function(){try{b(a),c(a)}catch(e){d(e)}})})};return _.extend(a,{render:c})};return _.compose(k,c,a)}(),u=function(c){var d=new n["default"](a,b.annotationData,c.id),e=new i(c.id);d instanceof jsPlumb.Connection&&(b.selectionModel.relation.has(c.id)&&(e.lineWidth=w),d.setPaintStyle(e),new z(d).setLabel("["+c.id+"] "+c.type))},A=function(c){var d=new n["default"](a,b.annotationData,c.id);d instanceof jsPlumb.Connection&&e.update(new z(d).getElement(),c.id)},B=function(c){var e=new n["default"](a,b.annotationData,c.id);d.detach(e),g.connectCache["delete"](c.id),e.dead=!0,c.removed=!0},C=function(a){var c=(0,j["default"])(a);return d=y(c),function(){return(0,p["default"])(a,b,d)}};return{init:C,reset:function(){d.reset(),g.connectCache.clear()},render:s,change:u,changeModification:A,remove:B}}},{"../../../getEntityDom":391,"../../DomPositionCache":333,"../ModificationRenderer":355,"../getAnnotationBox":373,"./Connect":356,"./arrangePositionAll":357,"./determineCurviness":358,"./jsPlumbArrowOverlayUtil":360,"babel-runtime/helpers/interop-require-default":18,bluebird:22}],360:[function(a,b,c){"use strict";var d={width:7,length:9,location:1,id:"normal-arrow"},e={width:14,length:18,location:1,id:"hover-arrow"},f=function(a,b){return a===d.id?b.addOverlay(["Arrow",d]):a===e.id&&b.addOverlay(["Arrow",e]),b},g=function(a,b){return b.forEach(function(b){f(b,a)}),b},h=function(a){return a.getOverlays().filter(function(a){return"Arrow"===a.type}).map(function(a){return a.id})},i=function(a){return a.getOverlay(d.id)},j=function(a){return a.getOverlay(e.id)},k=function(a,b){return b.removeOverlay(a),b},l=function(a,b){return b.forEach(function(b){k(b,a)}),b},m=function(a){_.compose(_.partial(g,a),_.partial(l,a),h)(a)},n=_.partial(f,d.id),o=_.partial(f,e.id),p=_.partial(k,d.id),q=_.partial(k,e.id),r=_.compose(o,p),s=_.compose(n,q);b.exports={NORMAL_ARROW:d,resetArrows:m,showBigArrow:function(a){return j(a)?a:r(a)},hideBigArrow:function(a){return i(a)?a:s(a)}}},{}],361:[function(a,b,c){"use strict";function d(a,b){a.span.topLevel().forEach(function(a){b.render(a)})}function e(a,b){b.reset(),a.relation.all().forEach(b.render)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./getAnnotationBox"),h=f(g);c["default"]=function(a,b,c,f){return function(g){(0,h["default"])(a).empty(),b.gridPositionCache.clear(),d(g,c),e(g,f)}},b.exports=c["default"]},{"./getAnnotationBox":373,"babel-runtime/helpers/interop-require-default":18}],362:[function(a,b,c){"use strict";function d(a,b,c,f){(0,p["default"])(a);var g=(0,h["default"])(a,b.span.topLevel());(0,j["default"])(a,g),(0,l["default"])(a,c),(0,n["default"])(a,b.entity.get,f),e(a,function(a){return d(a,b,c,f)})}function e(a,b){return a.children.forEach(b),a}var f=a("babel-runtime/helpers/interop-require-default")["default"];
Object.defineProperty(c,"__esModule",{value:!0});var g=a("./getBigBrother"),h=f(g),i=a("./renderSingleSpan"),j=f(i),k=a("./renderClassOfSpan"),l=f(k),m=a("./renderEntitiesOfSpan"),n=f(m),o=a("./destroyChildrenSpan"),p=f(o);c["default"]=d,b.exports=c["default"]},{"./destroyChildrenSpan":367,"./getBigBrother":368,"./renderClassOfSpan":370,"./renderEntitiesOfSpan":371,"./renderSingleSpan":372,"babel-runtime/helpers/interop-require-default":18}],363:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=document.createRange();return c.setStart(a,b.start),c.setEnd(a,b.end),c},b.exports=c["default"]},{}],364:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=document.createElement("span");return b.setAttribute("id",a.id),b.setAttribute("title",a.id),b.setAttribute("class","textae-editor__span"),b.setAttribute("tabindex",0),b},b.exports=c["default"]},{}],365:[function(a,b,c){"use strict";function d(a,b){var c=a.begin-b,d=a.end-b;return{start:c,end:d}}function e(a,b){return 0<=b.start&&b.end<=a.length}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./createRange"),h=f(g);c["default"]=function(a,b,c){var f=d(c,b);if(!e(a,f))throw new Error("oh my god! I cannot render this span. "+c.toStringOnlyThis()+", textNode "+a.textContent);return(0,h["default"])(a,f)},b.exports=c["default"]},{"./createRange":363,"babel-runtime/helpers/interop-require-default":18}],366:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){for(var b=document.querySelector("#"+a),c=b.parentNode;b.firstChild;)c.insertBefore(b.firstChild,b);c.removeChild(b),c.normalize()},b.exports=c["default"]},{}],367:[function(a,b,c){"use strict";function d(a){return null!==document.querySelector("#"+a.id)}function e(a){a.children.forEach(function(a){e(a)}),(0,h["default"])(a.id)}var f=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var g=a("./destroy"),h=f(g);c["default"]=function(a){return a.children.filter(d).forEach(e),a},b.exports=c["default"]},{"./destroy":366,"babel-runtime/helpers/interop-require-default":18}],368:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=void 0;return a.parent?(c=a.parent.children.indexOf(a),0===c?null:a.parent.children[c-1]):(c=b.indexOf(a),0===c||b[c-1].paragraph!==a.paragraph?null:b[c-1])},b.exports=c["default"]},{}],369:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./create"),f=d(e),g=a("./destroy"),h=d(g),i=a("./renderClassOfSpan"),j=d(i);c["default"]=function(a,b,c){return{render:function(d){return(0,f["default"])(d,a,b,c)},remove:function(a){return(0,h["default"])(a.id)},change:function(a){return(0,j["default"])(a,b)}}},b.exports=c["default"]},{"./create":362,"./destroy":366,"./renderClassOfSpan":370,"babel-runtime/helpers/interop-require-default":18}],370:[function(a,b,c){"use strict";function d(a,b){return a.getTypes().map(function(a){return a.name}).filter(b).length>0}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("not"),g=e(f),h="textae-editor__span--block",i="textae-editor__span--wrap";c["default"]=function(a,b){var c=document.querySelector("#"+a.id);d(a,b)?c.classList.add(h):c.classList.remove(h),d(a,(0,g["default"])(b))?c.classList.contains(i)&&c.classList.remove(i):c.classList.add(i)},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,not:160}],371:[function(a,b,c){"use strict";function d(a,b,c){a.entities.map(b).forEach(c)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){a.getTypes().forEach(function(a){return d(a,b,c)})},b.exports=c["default"]},{}],372:[function(a,b,c){"use strict";function d(a,b){var c=void 0,d=void 0;if(b){var g=e(b),i=h(g,2);c=i[0],d=i[1]}else{var j=f(a),k=h(j,2);c=k[0],d=k[1]}if(!c)throw new Error("The textNode on to create a span is not found. "+a.toStringOnlyThis());return(0,m["default"])(c,d,a)}function e(a){return[document.querySelector("#"+a.id).nextSibling,a.end]}function f(a){var b=g(a);return[document.querySelector("#"+b.id).firstChild,b.begin]}function g(a){return a.parent?a.parent:a.paragraph}var h=a("babel-runtime/helpers/sliced-to-array")["default"],i=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var j=a("./createSpanElement"),k=i(j),l=a("./createSpanRange"),m=i(l);c["default"]=function(a,b){var c=d(a,b),e=(0,k["default"])(a);c.surroundContents(e)},b.exports=c["default"]},{"./createSpanElement":364,"./createSpanRange":365,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/sliced-to-array":20}],373:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getElement"),f=d(e),g=a("./getEditorBody"),h=d(g);c["default"]=_.compose(_.partial(f["default"],"div","textae-editor__body__annotation-box"),h["default"]),b.exports=c["default"]},{"./getEditorBody":374,"./getElement":375,"babel-runtime/helpers/interop-require-default":18}],374:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getElement"),f=d(e);c["default"]=_.partial(f["default"],"div","textae-editor__body"),b.exports=c["default"]},{"./getElement":375,"babel-runtime/helpers/interop-require-default":18}],375:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){var d=c.find("."+b);return 0===d.length&&(d=$("<"+a+">").addClass(b),c.append(d)),d},b.exports=c["default"]},{}],376:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../idFactory"),f=d(e);c["default"]=function(a,b){return $("#"+f["default"].makeTypeId(a,b))},b.exports=c["default"]},{"../../../idFactory":236,"babel-runtime/helpers/interop-require-default":18}],377:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("../DomPositionCache"),f=d(e),g=a("./Initiator"),h=d(g);b.exports=function(a,b,c,d,e,g){var i=new f["default"](a,b.annotationData.entity),j={init:new h["default"](i,g,c,e,a,b,d),arrangeRelationPositionAll:g.arrangePositionAll,renderLazyRelationAll:g.renderLazyRelationAll};return j}},{"../DomPositionCache":333,"./Initiator":354,"babel-runtime/helpers/interop-require-default":18}],378:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("capitalize"),f=d(e);c["default"]=function(a,b,c,d,e){var g=a[b].get(c.obj);g&&(d.changeModification(g),e["updateBy"+(0,f["default"])(b)]())},b.exports=c["default"]},{"babel-runtime/helpers/interop-require-default":18,capitalize:23}],379:[function(a,b,c){"use strict";function d(a){return m({paragraphs:a})}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("handlebars"),g=e(f),h=a("../getTextBox"),i=e(h),j=a("./getElement"),k=(e(j),a("./getEditorBody")),l=(e(k),'\n{{#paragraphs}}\n<p class="textae-editor__body__text-box__paragraph-margin">\n    <span class="textae-editor__body__text-box__paragraph" id="{{id}}">{{text}}</span>\n</p>\n{{/paragraphs}}\n'),m=g["default"].compile(l);c["default"]=function(a,b){(0,i["default"])(a[0]).innerHTML=d(b)},b.exports=c["default"]},{"../getTextBox":385,"./getEditorBody":374,"./getElement":375,"babel-runtime/helpers/interop-require-default":18,handlebars:147}],380:[function(a,b,c){"use strict";function d(a){a&&a.deselect&&a.deselect()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=a.toConnect(b);d(c)},b.exports=c["default"]},{}],381:[function(a,b,c){"use strict";function d(a,b){var c=(0,p["default"])(a[0],b);if(c){var d=c.parentNode,e=d.previousElementSibling;d.children.length===d.querySelectorAll("."+q).length?(e.classList.add(q),d.classList.add(q)):(e.classList.remove(q),d.classList.remove(q))}}function e(a){return document.querySelector("#"+a)}function f(a,b){a.classList[b](q)}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("../../../idFactory"),i=(g(h),a("../DomPositionCache")),j=g(i),k=a("./selectRelation"),l=g(k),m=a("./deselectRelation"),n=g(m),o=a("../../getEntityDom"),p=g(o),q="ui-selected";c["default"]=function(a,b){var c=new j["default"](a,b.annotationData.entity);return{span:{select:function(a){var b=e(a);f(b,"add"),b.focus()},deselect:function(a){var b=e(a);b&&(f(b,"remove"),b.blur())}},entity:{select:function(b){var c=(0,p["default"])(a[0],b);c&&(f(c,"add"),c.parentNode.previousElementSibling.focus())},deselect:function(b){var c=(0,p["default"])(a[0],b);c&&(f(c,"remove"),c.parentNode.previousElementSibling.blur())}},relation:{select:function(a){return(0,l["default"])(c,a)},deselect:function(a){return(0,n["default"])(c,a)}},entityLabel:{update:function(b){return d(a,b)}}}},b.exports=c["default"]},{"../../../idFactory":236,"../../getEntityDom":391,"../DomPositionCache":333,"./deselectRelation":380,"./selectRelation":382,"babel-runtime/helpers/interop-require-default":18}],382:[function(a,b,c){"use strict";function d(a){a&&a.select&&a.select()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){var c=a.toConnect(b);d(c)},b.exports=c["default"]},{}],383:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return{height:18*a+18+"px","padding-top":18*a+"px"}},b.exports=c["default"]},{}],384:[function(a,b,c){"use strict";function d(a,b,c){var e=0===a.children.length?0:_.max(a.children.map(function(a){return d(a,b,c)})),f=a.getTypes().filter(function(a){return!b.entity.isBlock(a.name)}).length*(18*c+18);return f+e}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],385:[function(a,b,c){"use strict";function d(a){return a.querySelector(".textae-editor__body__text-box")}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],386:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){var h=new j["default"](a,b,f,e,d,g),i=_.debounce(function(){return c(d())},100);h.init(a,b.annotationData,b.selectionModel).on("change",i).on("all.change",i).on("paragraph.change",function(){return l.reduceBottomSpace(a[0])}).on("span.add",i).on("span.remove",i).on("entity.add",i).on("entity.change",i).on("entity.remove",i).on("relation.add",i)}function e(a,b,c,d,e){var f=function(b){return a.find(".textae-editor__type").css(new v["default"](b))};c(f),c(function(c){return l.setToTypeGap(a[0],b.annotationData,d,c)}),c(e.update)}function f(a,b){var c=new r["default"](a);b.on("render.start",function(a){c.startWait()}).on("render.end",function(a){c.endWait()})}var g=a("babel-runtime/helpers/interop-require-default")["default"],h=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var i=a("./Renderer"),j=g(i),k=a("./lineHeight"),l=h(k),m=a("./Hover"),n=g(m),o=a("./Display"),p=g(o),q=a("../../../util/CursorChanger"),r=g(q),s=a("./setSelectionModelHandler"),t=g(s),u=a("./TypeStyle"),v=g(u),w=a("./Renderer/RelationRenderer"),x=g(w),y='\n<div class="textae-editor__body">\n    <div class="textae-editor__body__annotation-box"></div>\n    <div class="textae-editor__body__text-box"></div>\n</div>\n';c["default"]=function(a,b){var c=new n["default"](a,b.annotationData.entity),g={init:function(a,c,h,i){(0,t["default"])(a,b,c),a[0].innerHTML=y;var j=new x["default"](a,b,i),k=j.init(a),m=new p["default"](a,b.annotationData,i,k);e(a,b,h,i,m),f(a,m),d(a,b,m.update,h,i,c.buttonStateHelper,j),g.updateDisplay=function(){m.update(h()),l.reduceBottomSpace(a[0])}},hoverRelation:c};return g},b.exports=c["default"]},{"../../../util/CursorChanger":406,"./Display":328,"./Hover":340,"./Renderer":377,"./Renderer/RelationRenderer":359,"./TypeStyle":383,"./lineHeight":387,"./setSelectionModelHandler":388,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19}],387:[function(a,b,c){"use strict";function d(a){var b=(0,n["default"])(a),c=window.getComputedStyle(b);return i(c.lineHeight)}function e(a){var b=(0,n["default"])(a),c=window.getComputedStyle(b);b.style.height="auto",b.style.height=b.offsetHeight-i(c.paddingTop)+20+"px"}function f(a,b){var c=(0,n["default"])(a);c.style.lineHeight=b+"px",c.style.paddingTop=b/2+"px",h(c,b),e(a)}function g(a,b,c,d){var e=void 0;if(0===b.span.all().length){var g=window.getComputedStyle(a),h=i(g.lineHeight);e="normal"===g.lineHeight?q:h}else e=_.max(b.span.all().map(function(a){return(0,l["default"])(a,c,d)})),e+=o+p;f(a,e)}function h(a,b){var c=a.style.lineHeight,d=i(c);d&&window.scroll(window.scrollX,window.scrollY*b/d)}function i(a){return""===a?0:parseInt(a,10)}var j=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.get=d,c.reduceBottomSpace=e,c.set=f,c.setToTypeGap=g;var k=a("./getHeightIncludeDescendantGrids"),l=j(k),m=a("./getTextBox"),n=j(m),o=23,p=30,q=41},{"./getHeightIncludeDescendantGrids":384,"./getTextBox":385,"babel-runtime/helpers/interop-require-default":18}],388:[function(a,b,c){"use strict";function d(a){return _.partial(_.delay,a,150)}var e=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var f=a("./Selector"),g=e(f);c["default"]=function(a,b,c){var e=new g["default"](a,b);b.selectionModel.on("span.select",e.span.select).on("span.deselect",e.span.deselect).on("span.change",c.buttonStateHelper.updateBySpan).on("entity.select",e.entity.select).on("entity.deselect",e.entity.deselect).on("relation.select",d(e.relation.select)).on("relation.deselect",d(e.relation.deselect)).on("relation.change",c.buttonStateHelper.updateByRelation)},b.exports=c["default"]},{"./Selector":381,"babel-runtime/helpers/interop-require-default":18}],389:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b,c){a.on("mousedown",function(a){return a.shiftKey?!1:void 0}).on("mousedown",".textae-editor__type",function(){return!1}).on("mousedown",".textae-editor__body__text-box__paragraph-margin",function(a){return"textae-editor__body__text-box__paragraph-margin"===a.target.className?!1:void 0}).on("mouseup",".textae-editor__body,.textae-editor__span,.textae-editor__grid,.textae-editor__entity",b.event.editorSelected).on("mouseenter",".textae-editor__entity",function(a){return c.hoverRelation.on($(a.target).attr("title"))}).on("mouseleave",".textae-editor__entity",function(a){return c.hoverRelation.off($(a.target).attr("title"))})},b.exports=c["default"]},{}],390:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./View/lineHeight"),f=d(e);c["default"]=function(a,b,c,d,e){f.setToTypeGap(a[0],b,c,d()),e.updateDisplay()},b.exports=c["default"]},{"./View/lineHeight":387,"babel-runtime/helpers/interop-require-wildcard":19}],391:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a,b){return a.querySelector('[title="'+b+'"]')},b.exports=c["default"]},{}],392:[function(a,b,c){"use strict";function d(a,b){console.assert(b,"element MUST exists.");var c=f(a,b),d=g(c,2),e=d[0],h=d[1];return h>0?e[h-1]:void 0}function e(a,b){console.assert(b,"element MUST exists.");var c=f(a,b),d=g(c,2),e=d[0],h=d[1];return e.length-h>1?e[h+1]:void 0}function f(a,b){var c=h(b.classList).filter(function(a){return 0===a.indexOf("textae-editor__")})[0],d=a.querySelectorAll("."+c),e=h(d).indexOf(b);return[d,e]}var g=a("babel-runtime/helpers/sliced-to-array")["default"],h=a("babel-runtime/core-js/array/from")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c.getLeftElement=d,c.getRightElement=e},{"babel-runtime/core-js/array/from":2,"babel-runtime/helpers/sliced-to-array":20}],393:[function(a,b,c){"use strict";function d(a,b,c){!a[c]&&b.attr(c)&&(a[c]=b.attr(c))}function e(a,b,c){b.attr(c)&&(a[c]=b.attr(c))}function f(a,b){a[b]&&(a[b]=decodeURIComponent(a[b]))}var g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("./getUrlParameters"),i=g(h);c["default"]=function(a){var b=(0,i["default"])(location.search);b.target=a.attr("source")||a.attr("target")||b.source||b.target,e(b,a,"config"),e(b,a,"status_bar"),d(b,a,"mode"),f(b,"config"),f(b,"target"),f(b,"autocompletion_ws");var c=a.text();return a.empty(),b.annotation={inlineAnnotation:c,url:b.target},b},b.exports=c["default"]},{"./getUrlParameters":394,"babel-runtime/helpers/interop-require-default":18}],394:[function(a,b,c){"use strict";b.exports=function(a){var b=a?String(a).replace(/^\?(.*)/,"$1"):"",c=b.length>0?b.split("&"):[];return c.map(function(a){var b=a.split("=");return{key:b[0],val:b[1]}}).reduce(function(a,b){return a[b.key]=b.val?b.val:!0,a},{})}},{}],395:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){var h=f.annotation;if(h){if(h.inlineAnnotation){var i=JSON.parse(h.inlineAnnotation);return e(a,b,c,f.config,i),d.status("inline"),i}h.url&&g.getAnnotationFromServer(h.url)}}function e(a,b,c,d,e){var h=f(a,b,e);"no config"===h?g(a,b,c,d,e):c.reset(e)}function f(a,b,c){return a.reset(),h(a,b,c.config),c.config?void 0:"no config"}function g(a,b,c,d,e){a.reset(),"string"==typeof d?p.getAsync(d,function(d){h(a,b,d),c.reset(e)},function(){return alert("could not read the span configuration from the location you specified.: "+d)}):c.reset(e)}function h(a,b,c){a.set(c),i(b,c)}function i(a,b){return a.setDefinedEntityTypes(b?b["entity types"]:[]),a.setDefinedRelationTypes(b?b["relation types"]:[]),b&&void 0!==b.css&&$("#css_area").html('<link rel="stylesheet" href="'+b.css+'"/>'),b}function j(a,b){return"on"===b?new r["default"](a):{status:function(){}}}var k=a("babel-runtime/helpers/interop-require-default")["default"],l=a("babel-runtime/helpers/interop-require-wildcard")["default"];Object.defineProperty(c,"__esModule",{value:!0});var m=a("observ"),n=k(m),o=a("../../util/ajaxAccessor"),p=l(o),q=a("../../component/StatusBar"),r=k(q),s=a("./getParams"),t=k(s),u=a("./SpanConfig"),v=k(u),w=a("./Command"),x=k(w),y=a("./TypeContainer"),z=k(y),A=a("./View"),B=k(A),C=a("./Presenter"),D=k(C),E=a("./bindMouseEvent"),F=k(E),G=a("./DaoHandler"),H=k(G),I=a("./APIs"),J=k(I),K=a("./calculateLineHeight"),L=k(K);c["default"]=function(a,b,c,f,g,h,i){var k=(0,t["default"])(a),l=new v["default"],m=new x["default"](a,g,c),o=new n["default"](-1),p=new z["default"](g),q=new B["default"](a,g),r=new D["default"](a,g,q,m,l,h,f,o,p,i,k.autocompletion_ws);q.init(a,f,o,p,i),(0,F["default"])(a,r,q),r.init(k.mode);var s=void 0,u=new H["default"](b,c,g.annotationData,p,function(){return s}),w=j(a,k.status_bar);b.on("load",function(a){e(l,p,g.annotationData,k.config,a.annotation),w.status(a.source),s=a.annotation}),s=d(l,p,g.annotationData,w,k,b);var y=function(){return(0,L["default"])(a,g.annotationData,p,o,q)};a.api=new J["default"](m,r,u,f,q,y)},b.exports=c["default"]},{"../../component/StatusBar":178,"../../util/ajaxAccessor":407,"./APIs":239,"./Command":256,"./DaoHandler":258,"./Presenter":313,"./SpanConfig":324,"./TypeContainer":327,"./View":386,"./bindMouseEvent":389,"./calculateLineHeight":390,"./getParams":393,"babel-runtime/helpers/interop-require-default":18,"babel-runtime/helpers/interop-require-wildcard":19,observ:161}],396:[function(a,b,c){"use strict";b.exports={isUri:function(a){return String(a).indexOf("http")>-1},getUrlMatches:function(a){var b=/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/gi;return b.exec(a)}}},{}],397:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"],e=a("./tool"),f=d(e),g=a("./control"),h=d(g),i=a("./editor"),j=d(i),k=new f["default"];jQuery.fn.textae=function(){return function(){if(this.hasClass("textae-editor"))this.each(function(){var a=$(this);return k.pushEditor(a),j["default"].apply(a),a.api.start(a),a}),k.selectFirstEditor();else if(this.hasClass("textae-control")){var a=(0,h["default"])(this);return k.setControl(a),a}}}()},{"./control":196,"./editor":237,"./tool":404,"babel-runtime/helpers/interop-require-default":18}],398:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getMousePoint"),f=d(e);c["default"]=function(a,b){return function(c){switch(c){case"textae.control.button.help.click":a();break;default:b.getSelected()&&b.getSelected().api.handleButtonClick(c,{point:(0,f["default"])()})}}},b.exports=c["default"]},{"./getMousePoint":403,"babel-runtime/helpers/interop-require-default":18}],399:[function(a,b,c){"use strict";function d(a,b){a.filter(function(a){return a!==b}).map(function(a){return a[0]}).forEach(function(a){a.classList.remove(e)}),b[0].classList.add(e)}Object.defineProperty(c,"__esModule",{value:!0});var e="textae-editor--active";c["default"]=function(){var a=[],b=null,c=function(a,c){d(a,c),b=c};return{push:function(b){return a.push(b)},getNewId:function(){return"editor"+a.length},getSelected:function(){return b},select:function(b){return c(a,b)},selectFirst:function(){return c(a,a[0])},forEach:a.forEach.bind(a)}},b.exports=c["default"]},{}],400:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var e=a("./getKeyCode"),f=d(e),g=a("./convertKeyEvent"),h=d(g),i=a("./getMousePoint"),j=d(i);c["default"]=function(a,b){return function(c){var d=(0,h["default"])((0,f["default"])(c));"H"===d?a():b.getSelected()&&b.getSelected().api.handleKeyInput(d,{point:(0,j["default"])(),shiftKey:c.shiftKey})}},b.exports=c["default"]},{"./convertKeyEvent":401,"./getKeyCode":402,"./getMousePoint":403,"babel-runtime/helpers/interop-require-default":18}],401:[function(a,b,c){"use strict";function d(a){return a>=65&&90>=a?String.fromCharCode(a):f.has(a)?f.get(a):void 0}var e=a("babel-runtime/core-js/map")["default"];Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var f=new e([[27,"ESC"],[37,"LEFT"],[38,"UP"],[39,"RIGHT"],[40,"DOWN"],[46,"DEL"]]);b.exports=c["default"]},{"babel-runtime/core-js/map":5}],402:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){return a.keyCode},b.exports=c["default"]},{}],403:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={};document.querySelector("html").addEventListener("mousemove",function(a){d.top=a.clientY,d.left=a.clientX}),c["default"]=function(){return d},b.exports=c["default"]},{}],404:[function(a,b,c){"use strict";function d(){var a=null;return{setInstance:function(b){return a=b},changeButtonState:function(b){a&&a.updateAllButtonEnableState(b)},push:function(b,c){a&&a.updateButtonPushState(b,c)}}}function e(a){window.addEventListener("resize",_.debounce(function(){a.forEach(function(a){return window.requestAnimationFrame(a.api.redraw)})},500))}var f=a("babel-runtime/core-js/object/assign")["default"],g=a("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(c,"__esModule",{value:!0});var h=a("events"),i=a("./EditorContainer"),j=g(i),k=a("./ControlButtonHandler"),l=g(k),m=a("./KeyInputHandler"),n=g(m),o=a("./observeKeyWithoutDialog"),p=g(o),q=a("../component/HelpDialog"),r=g(q),s=new r["default"];c["default"]=function(){var a=new d,b=new j["default"],c=new l["default"](s,b);return window.addEventListener("load",function(){var a=new n["default"](s,b);(0,p["default"])(a),e(b)}),{setControl:function(b){b.on("textae.control.button.click",function(a){for(var b=arguments.length,d=Array(b>1?b-1:0),e=1;b>e;e++)d[e-1]=arguments[e];return c.apply(void 0,d)}),a.setInstance(b)},pushEditor:function(c){b.push(c);var d=(new h.EventEmitter).on("textae.editor.select",function(){return b.select(c)}).on("textae.control.button.push",function(d){c===b.getSelected()&&a.push(d.buttonName,d.state)}).on("textae.control.buttons.change",function(d){c===b.getSelected()&&a.changeButtonState(d)});f(c,{editorId:b.getNewId(),eventEmitter:d})},selectFirstEditor:function(){a.changeButtonState(),b.selectFirst()}}},b.exports=c["default"]},{"../component/HelpDialog":167,"./ControlButtonHandler":398,"./EditorContainer":399,"./KeyInputHandler":400,"./observeKeyWithoutDialog":405,"babel-runtime/core-js/object/assign":6,"babel-runtime/helpers/interop-require-default":18,events:110}],405:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=function(a){var b=function(){},c=a;document.addEventListener("keyup",function(a){return c(a)}),$("body").on("dialogopen",".ui-dialog",function(){return c=b}).on("dialogclose",".ui-dialog",function(){return c=a})},b.exports=c["default"]},{}],406:[function(a,b,c){"use strict";var d=function(a,b){a=a.add(".ui-dialog, .ui-widget-overlay"),a[b+"Class"]("textae-editor--wait")};b.exports=function(a){var b=_.partial(d,a,"add"),c=_.partial(d,a,"remove");return{startWait:b,endWait:c}}},{}],407:[function(a,b,c){"use strict";function d(a,b,c){if(!f(a)){var d={type:"GET",url:a,cache:!1,xhrFields:{withCredentials:!0}};$.ajax(d).done(function(a){void 0!==b&&b(a)}).fail(function(a,b,d){void 0!==c&&c()})}}function e(a,b,c,d,e){if(!f(a)){console.log("POST data",b);var g={type:"post",url:a,contentType:"application/json",data:b,crossDomain:!0,xhrFields:{withCredentials:!0}};$.ajax(g).done(c).fail(d).always(e)}}function f(a){return!a||""===a}Object.defineProperty(c,"__esModule",{value:!0}),c.getAsync=d,c.post=e},{}]},{},[397]),function(a){$(function(){$(".textae-control").textae(),$(".textae-editor").textae()})}(jQuery);